import{u as nt,$ as l,d as V,_ as ft,V as st,aq as gt,r as S,W as Ct,aa as w,t as mt,a as _,e as r,a3 as g,aV as Et,C as rt,p as ot,H as bt,l as kt,T as p,b as Mt,M as Tt,aX as A,R as yt,m as B,b6 as $,ad as At,E as Bt,i as L,aY as xt,g as Vt}from"./index.ab648286.js";import{a0 as v,a7 as St,T as d,U as u,$ as It,bA as Ot,ak as wt,aM as $t,ay as I,az as D,Z as f,W as Lt,ai as Dt,by as M}from"./entry.d8c3daa0.js";import{V as R,B as Rt,r as N}from"./resize_observer.57c96ed3.js";var{ios:Nt,mac:Ht}=nt.real(),Pt=Nt||Ht,Wt=function(t){var e;try{e={start:t.selectionStart,end:t.selectionEnd}}catch{e={start:0,end:0}}return e},Ft=function(t,e){var i=V.getBody();if(!(!i.contains(t)&&!i.contains(t.getRootNode().host)))try{t.selectionStart=e.start,t.selectionEnd=e.end}catch{}},lt=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t=l(t).get(0),!v(e))return Wt(t);!i&&Pt&&V.getActiveElement(t)!==t||Ft(t,e)},c=" ",ht=St.inherit({ctor:function(t){this._value=c,d(this,t)},next:function(t){if(!arguments.length)return this._next;this._next=t},text:u,value:u,rawValue:u,handle:u,_prepareHandlingArgs:function(t,e){var i,a,n;e=e||{};var s=Object.prototype.hasOwnProperty.call(t,"value")?"value":"text";return t[s]=(i=e.str)!==null&&i!==void 0?i:t[s],t.start=(a=e.start)!==null&&a!==void 0?a:t.start,t.length=(n=e.length)!==null&&n!==void 0?n:t.length,t.index=t.index+1,t},reset:u,clear:u,first:function(t){return t=t||0,this.next().first(t+1)},isAccepted:function(){return!1},adjustedCaret:function(t,e,i){return e?this._adjustedForward(t,0,i):this._adjustedBackward(t,0,i)},_adjustedForward:u,_adjustedBackward:u,isValid:u}),Kt=ht.inherit({next:u,handle:function(){return 0},text:function(){return""},value:function(){return""},first:function(){return 0},rawValue:function(){return""},adjustedCaret:function(){return 0},isValid:function(){return!0}}),dt=ht.inherit({text:function(){return(this._value!==c?this._value:this.maskChar)+this.next().text()},value:function(){return this._value+this.next().value()},rawValue:function(){return this._value+this.next().rawValue()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value")?t.value:t.text;if(!e||!e.length||!t.length)return 0;if(t.start)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start-1}));var i=e[0],a=e.substring(1);return this._tryAcceptChar(i,t),this._accepted()?this.next().handle(this._prepareHandlingArgs(t,{str:a,length:t.length-1}))+1:this.handle(this._prepareHandlingArgs(t,{str:a,length:t.length-1}))},clear:function(t){this._tryAcceptChar(c,t),this.next().clear(this._prepareHandlingArgs(t))},reset:function(){this._accepted(!1),this.next().reset()},_tryAcceptChar:function(t,e){if(this._accepted(!1),!!this._isAllowed(t,e)){var i=t===c?this.maskChar:t;e.fullText=e.fullText.substring(0,e.index)+i+e.fullText.substring(e.index+1),this._accepted(!0),this._value=t}},_accepted:function(t){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!t},first:function(t){return this._value===c?t||0:this.callBase(t)},_isAllowed:function(t,e){return t===c?!0:this._isValid(t,e)},_isValid:function(t,e){var i=this.allowedChars;return i instanceof RegExp?i.test(t):It(i)?i(t,e.index,e.fullText):Array.isArray(i)?i.includes(t):i===t},isAccepted:function(t){return t===0?this._accepted():this.next().isAccepted(t-1)},_adjustedForward:function(t,e,i){return e>=t?e:this.next()._adjustedForward(t,e+1,i)||e+1},_adjustedBackward:function(t,e){return e>=t-1?t:this.next()._adjustedBackward(t,e+1)||e+1},isValid:function(t){return this._isValid(this._value,t)&&this.next().isValid(this._prepareHandlingArgs(t))}}),H=dt.inherit({value:function(){return this.next().value()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value"),i=e?t.value:t.text;if(!i.length||!t.length)return 0;if(t.start||e)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start&&t.start-1}));var a=i[0],n=i.substring(1);this._tryAcceptChar(a);var s=this._isAllowed(a)?this._prepareHandlingArgs(t,{str:n,length:t.length-1}):t;return this.next().handle(s)+1},clear:function(t){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(t))},_tryAcceptChar:function(t){this._accepted(this._isValid(t))},_isValid:function(t){return t===this.maskChar},first:function(t){return t=t||0,this.next().first(t+1)},_adjustedForward:function(t,e,i){return e>=t&&i===this.maskChar?e:t===e+1&&this._accepted()?t:this.next()._adjustedForward(t,e+1,i)},_adjustedBackward:function(t,e){return e>=t-1?0:this.next()._adjustedBackward(t,e+1)},isValid:function(t){return this.next().isValid(this._prepareHandlingArgs(t))}}),C="dx-invalid-message",jt="dx-invalid-message-auto",Ut="dx-invalid-message-always",Xt="dx-invalid-message-content",Gt=100,ut=ft.inherit({_getDefaultOptions(){return d(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,preventScrollEvents:!1,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget:function(){var{target:t}=this.option();this.option("position.of",t)},_ensureMessageNotEmpty:function(){this._textMarkup=this._getTextMarkup();var t=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(t)},_toggleVisibilityClasses:function(t){t?(this.$element().addClass(C),this.$wrapper().addClass(C)):(this.$element().removeClass(C),this.$wrapper().removeClass(C))},_updateContentId(){var{container:t,contentId:e}=this.option(),i=e??l(t).attr("aria-describedby");this.$content().addClass(Xt).attr("id",i)},_renderInnerHtml(t){var e=t&&l(t);e==null||e.html(this._textMarkup)},_getTextMarkup(){var t,e=(t=this.option("validationErrors"))!==null&&t!==void 0?t:[],i="";return e.forEach(a=>{var n,s=i?"<br />":"";i+=s+Ot((n=a==null?void 0:a.message)!==null&&n!==void 0?n:"")}),i},_toggleModeClass(){var t=this.option("mode");this.$wrapper().toggleClass(jt,t==="auto").toggleClass(Ut,t==="always")},updateMaxWidth(){var t=this.option("target"),e=st(t),i="100%";e&&(i=Math.max(e,Gt)),this.option({maxWidth:i})},_getPositionsArray:function(t,e){switch(t){case"top":return["".concat(e," bottom"),"".concat(e," top")];case"left":return["right","left"];case"right":return["left","right"];default:return["".concat(e," top"),"".concat(e," bottom")]}},_updatePosition:function(){var{positionSide:t,rtlEnabled:e,offset:i,boundary:a}=this.option(),n=gt(e),s=this._getPositionsArray(t,n),o=wt({},i);this.$element().addClass("dx-invalid-message-".concat(t)),e&&t!=="left"&&t!=="right"&&(o.h=-o.h),t==="top"&&(o.v=-o.v),t==="left"&&(o.h=-o.h),this.option("position",{offset:o,boundary:a,my:s[0],at:s[1],collision:"none flip"})},_optionChanged(t){var{name:e,value:i,previousValue:a}=t;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(t);break;case"boundary":this.option("position.boundary",i);break;case"mode":this._toggleModeClass(i);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass("dx-invalid-message-".concat(a)),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(t);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(t)}}});S("dxValidationMessage",ut);var P="dx-invalid-message-auto",Yt="dx-state-readonly",zt="dx-invalid",qt="dx-show-invalid-badge",W="dx-validation-target",Zt="valid",F="invalid",Jt="editorReadOnly",Qt=["outlined","filled","underlined"],K={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},x=Ct.inherit({ctor:function(){this.showValidationMessageTimeout=null,this.validationRequest=$t(),this.callBase.apply(this,arguments)},_createElement:function(t){this.callBase(t);var e=this.$element();e&&w(e[0],W,this)},_initOptions:function(t){this.callBase.apply(this,arguments),this.option(R.initValidationOptions(t))},_init:function(){this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions"));var t=this.$element();t.addClass(qt)},_getDefaultOptions:function(){return d(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:Zt,validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0})},_attachKeyboardEvents:function(){this.option("readOnly")||this.callBase()},_setOptionsByReference:function(){this.callBase(),d(this._optionsByReference,{validationError:!0})},_createValueChangeAction:function(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction:function(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction:function(){this._valueChangeActionSuppressed=!1},_initMarkup:function(){var t;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),(t=this.option("_onMarkupRendered"))===null||t===void 0||t()},_raiseValueChangeAction:function(t,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(t,e))},_valueChangeArgs:function(t,e){return{value:t,previousValue:e,event:this._valueChangeEventInstance}},_saveValueChangeEvent:function(t){this._valueChangeEventInstance=t},_focusInHandler:function(t){var e=this.option("validationMessageMode")==="auto";if(this._canValueBeChangedByClick()&&e){var i,a=(i=this._validationMessage)===null||i===void 0?void 0:i.$wrapper();a==null||a.removeClass(P),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>a==null?void 0:a.addClass(P),150)}return this.callBase(t)},_canValueBeChangedByClick:function(){return!1},_getStylingModePrefix:function(){return"dx-editor-"},_renderStylingMode:function(){var t=this.option("stylingMode"),e=this._getStylingModePrefix(),i=Qt.map(o=>e+o);i.forEach(o=>this.$element().removeClass(o));var a=e+t;if(i.indexOf(a)===-1){var n=this._getDefaultOptions().stylingMode,s=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;a=e+(s||n)}this.$element().addClass(a)},_getValidationErrors:function(){var t=this.option("validationErrors");return!t&&this.option("validationError")&&(t=[this.option("validationError")]),t},_disposeValidationMessage:function(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses:function(t){this.$element().toggleClass(zt,t),this.setAria(F,t||void 0)},_renderValidationState:function(){var t=this.option("isValid")&&this.option("validationStatus")!==F,e=this._getValidationErrors(),i=this.$element();if(this._toggleValidationClasses(!t),!(!mt()||this.option("_showValidationMessage")===!1)&&(this._disposeValidationMessage(),!t&&e)){var{validationMessageMode:a,validationMessageOffset:n,validationBoundary:s,rtlEnabled:o}=this.option();this._$validationMessage=l("<div>").appendTo(i);var h="dx-".concat(new I);this.setAria("describedby",h),this._validationMessage=new ut(this._$validationMessage,d({validationErrors:e,rtlEnabled:o,target:this._getValidationMessageTarget(),visualContainer:i,mode:a,positionSide:this._getValidationMessagePosition(),offset:n,boundary:s,contentId:h},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessagePosition:function(){return this.option("validationMessagePosition")},_getValidationMessageTarget:function(){return this.$element()},_toggleReadOnlyState:function(){var t=this.option("readOnly");this._toggleBackspaceHandler(t),this.$element().toggleClass(Yt,!!t),this.setAria("readonly",t||void 0)},_toggleBackspaceHandler:function(t){var e=this._keyboardEventBindingTarget(),i=_("keydown",Jt);r.off(e,i),t&&r.on(e,i,a=>{g(a)==="backspace"&&a.preventDefault()})},_dispose:function(){var t=this.$element()[0];w(t,W,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName:function(t){var e=this._getSubmitElement();e&&(t.length>0?e.attr("name",t):e.removeAttr("name"))},_getSubmitElement:function(){return null},_setValidationMessageOption:function(t){var e,{name:i,value:a}=t,n=K[i]?K[i]:i;(e=this._validationMessage)===null||e===void 0||e.option(n,a)},_hasActiveElement:u,_optionChanged:function(t){var e;switch(t.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":t.value!=t.previousValue&&this.validationRequest.fire({value:t.value,editor:this}),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(t.value,t.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(t),(e=this._validationMessage)===null||e===void 0||e.updateMaxWidth();break;case"name":this._setSubmitElementName(t.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(R.synchronizeValidationOptions(t,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(t);break;case"rtlEnabled":this._setValidationMessageOption(t),this.callBase(t);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,t);break;case"_showValidationMessage":break;default:this.callBase(t)}},blur:function(){this._hasActiveElement()&&Et()},reset:function(){var t=this._getDefaultOptions();this.option("value",t.value)}});x.isEditor=t=>t instanceof x;class _t{constructor(e,i,a){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=i,this.name=e,this.options=a||{}}_addPlaceMarker(e){this.$placeMarker=l("<div>").appendTo(e)}_addToContainer(e){var{$placeMarker:i,$container:a}=this;i?i.replaceWith(e):e.appendTo(a)}_attachEvents(){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){var{editor:e,options:i}=this;return i.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){var{instance:e,$placeMarker:i}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),i&&i.remove()}render(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){var{instance:i,$element:a}=this._create();this.instance=i,this._attachEvents(i,a)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}var te=ot.down,ee="dx-state-invisible",ie="dx-clear-button-area",ae="dx-icon-clear",ne="dx-icon",se="dx-show-clear-button";class re extends _t{_create(){var e=l("<span>").addClass(ie).append(l("<span>").addClass(ne).addClass(ae));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){var{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,i){var{editor:a}=this,n=a.NAME;r.on(i,_(te,n),s=>{s.preventDefault(),s.pointerType!=="mouse"&&a._clearValueHandler(s)}),r.on(i,_(rt,n),s=>a._clearValueHandler(s))}_legacyRender(e,i){e.toggleClass(se,i)}update(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!e&&super.update();var{editor:i,instance:a}=this,n=i.$element(),s=this._isVisible();a&&a.toggleClass(ee,!s),this._legacyRender(n,s)}}var j="dx-custom-button-hovered";class oe extends _t{_attachEvents(e,i){var{editor:a}=this;r.on(i,bt,()=>{a.$element().addClass(j)}),r.on(i,kt,()=>{a.$element().removeClass(j)}),r.on(i,rt,n=>{n.stopPropagation()})}_create(){var{editor:e}=this,i=l("<div>");this._addToContainer(i);var a=e._createComponent(i,Rt,d({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:i,instance:a}}_prepareIntegrationOptions(e){return d({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){var e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){var{editor:e}=this;return e.option("visible")}_isDisabled(){var e=this.options.disabled!==void 0;return e?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}var le="dx-texteditor-buttons-container";function he(t){(()=>{if(!t||typeof t!="object"||Array.isArray(t))throw p.Error("E1053")})(),(()=>{if(!("name"in t))throw p.Error("E1054")})(),(()=>{var{name:e}=t;if(typeof e!="string")throw p.Error("E1055")})(),(()=>{var{location:e}=t;"location"in t&&e!=="after"&&e!=="before"&&(t.location="after")})()}function U(t,e){if(t.indexOf(e)!==-1)throw p.Error("E1055",e);t.push(e)}function de(t,e){return!!e.find(i=>i.name===t)}class ue{constructor(e,i){this.buttons=[],this.defaultButtonsInfo=i,this.editor=e}_compileButtonInfo(e){var i=[];return e.map(a=>{var n=typeof a=="string";n||he(a);var s=n||de(a.name,this.defaultButtonsInfo);if(s){var o=this.defaultButtonsInfo.find(k=>{var{name:O}=k;return O===a||O===a.name});if(!o)throw p.Error("E1056",this.editor.NAME,a);return U(i,a),o}else{var{name:h}=a;return U(i,h),d(a,{Ctor:oe})}})}_createButton(e){var{Ctor:i,options:a,name:n}=e,s=new i(n,this.editor,a);return this.buttons.push(s),s}_renderButtons(e,i,a){var n=null,s=e?this._compileButtonInfo(e):this.defaultButtonsInfo;return s.forEach(o=>{var{location:h="after"}=o;h===a&&this._createButton(o).render((()=>(n=n||l("<div>").addClass(le),a==="before"?i.prepend(n):i.append(n),n))())}),n}clean(){this.buttons.forEach(e=>e.dispose()),this.buttons=[]}getButton(e){var i=this.buttons.find(a=>{var{name:n}=a;return n===e});return i&&i.instance}renderAfterButtons(e,i){return this._renderButtons(e,i,"after")}renderBeforeButtons(e,i){return this._renderButtons(e,i,"before")}updateButtons(e){this.buttons.forEach(i=>{(!e||e.indexOf(i.name)!==-1)&&i.update()})}}var X="dx-texteditor-label",G="dx-texteditor-with-label",Y="dx-texteditor-with-floating-label",z="dx-texteditor-with-before-buttons",_e="dx-label-before",ce="dx-label",pe="dx-label-after";class ve{constructor(e){var{$editor:i,text:a,mode:n,mark:s,containsButtonsBefore:o,containerWidth:h,beforeWidth:k}=e;this._props={$editor:i,text:a,mode:n,mark:s,containsButtonsBefore:o,containerWidth:h,beforeWidth:k},this._id="".concat(X,"-").concat(new I),this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=l("<div>").addClass(_e),this._$labelSpan=l("<span>"),this._$label=l("<div>").addClass(ce).append(this._$labelSpan),this._$after=l("<div>").addClass(pe),this._$root=l("<div>").addClass(X).attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){var e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach()}_updateEditorLabelClass(e){if(this._props.$editor.removeClass(Y).removeClass(G),e){var i=this._props.mode==="floating"?Y:G;this._props.$editor.addClass(i)}}_updateEditorBeforeButtonsClass(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass(z),e){var i=this._props.containsButtonsBefore?z:"";this._props.$editor.addClass(i)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){this._$before.css({width:this._props.beforeWidth})}_updateMaxWidth(){this._$label.css({maxWidth:this._props.containerWidth})}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}var fe="dx-texteditor",ge="dx-texteditor-input-container",ct="dx-texteditor-input",Ce="."+ct,me="dx-texteditor-container",Ee="dx-texteditor-buttons-container",q="dx-placeholder",be="dx-texteditor-empty",ke="dx-state-invisible",Me="dx-pending-indicator",Z="dx-validation-pending",Te="dx-valid",m=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],ye=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"],Ae=ve;function J(t){if(v(t)&&!Array.isArray(t))throw p.Error("E1053")}var Be=x.inherit({ctor:function(t,e){e&&J(e.buttons),this._buttonCollection=new ue(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:function(t){return v(t)&&t!==!1?t:""},stylingMode:D().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){var t=Mt();return Tt(t)},options:{stylingMode:D().editorStylingMode||"filled",labelMode:"floating"}}])},_getDefaultButtons:function(){return[{name:"clear",Ctor:re}]},_isClearButtonVisible:function(){return this.option("showClearButton")&&!this.option("readOnly")},_input:function(){return this.$element().find(Ce).first()},_isFocused:function(){return A(this._input())||this.callBase()},_inputWrapper:function(){return this.$element()},_buttonsContainer:function(){return this._inputWrapper().find("."+Ee).eq(0)},_isControlKey:function(t){return ye.indexOf(t)!==-1},_renderStylingMode:function(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup:function(){this.$element().addClass(fe),this._renderInput(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render:function(){this.callBase(),this._refreshValueChangeEvent(),this._renderEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput:function(){this._$buttonsContainer=this._$textEditorContainer=l("<div>").addClass(me).appendTo(this.$element()),this._$textEditorInputContainer=l("<div>").addClass(ge).appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput()),this._renderButtonContainers()},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator:function(){this.$element().addClass(Z);var t=this._getInputContainer(),e=l("<div>").addClass(Me).appendTo(t);this._pendingIndicator=this._createComponent(e,yt)},_disposePendingIndicator:function(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass(Z))},_renderValidationState:function(){this.callBase();var t=this.option("validationStatus")==="pending",e=this.$element();t?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),e.toggleClass(Te,!!this._showValidMark)},_renderButtonContainers:function(){var t=this.option("buttons");this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(t,this._$buttonsContainer),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(t,this._$buttonsContainer)},_cleanButtonContainers:function(){var t,e;(t=this._$beforeButtonsContainer)===null||t===void 0||t.remove(),(e=this._$afterButtonsContainer)===null||e===void 0||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this._$buttonsContainer=null,this.callBase()},_createInput:function(){var t=l("<input>");return this._applyInputAttributes(t,this.option("inputAttr")),t},_setSubmitElementName:function(t){var e=this.option("inputAttr.name");return this.callBase(t||e||"")},_applyInputAttributes:function(t,e){var i=d(this._getDefaultAttributes(),e);t.attr(i).addClass(ct).css("minHeight",this.option("height")?"0":"")},_getDefaultAttributes:function(){var t={autocomplete:"off"},{ios:e,mac:i}=nt.real();return(e||i)&&(t.placeholder=" "),t},_updateButtons:function(t){this._buttonCollection.updateButtons(t)},_updateButtonsStyling:function(t){f(this.option("buttons"),(e,i)=>{var{options:a,name:n}=i;if(a&&!a.stylingMode&&this.option("visible")){var s=this.getButton(n);s.option&&s.option("stylingMode",t==="underlined"?"text":"contained")}})},_renderValue:function(){var t=this._renderInputValue();return t.promise()},_renderInputValue:function(t){var e;t=(e=t)!==null&&e!==void 0?e:this.option("value");var i=this.option("text"),a=this.option("displayValue"),n=this.option("displayValueFormatter");return a!==void 0&&t!==null?i=n(a):v(i)||(i=n(t)),this.option("text",i),this._input().val()!==(v(i)?i:"")?this._renderDisplayText(i):this._toggleEmptinessEventHandler(),new Lt().resolve()},_renderDisplayText:function(t){this._input().val(t),this._toggleEmptinessEventHandler()},_isValueValid:function(){if(this._input().length){var t=this._input().get(0).validity;if(t)return t.valid}return!0},_toggleEmptiness:function(t){this.$element().toggleClass(be,t),this._togglePlaceholder(t)},_togglePlaceholder:function(t){this.$element().find(".".concat(q)).eq(0).toggleClass(ke,!t)},_renderProps:function(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState:function(t){this.callBase.apply(this,arguments);var e=this._input();e.prop("disabled",t)},_toggleTabIndex:function(){var t=this._input(),e=this.option("disabled"),i=this.option("focusStateEnabled");e||!i?t.attr("tabIndex",-1):t.removeAttr("tabIndex")},_toggleReadOnlyState:function(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue:function(){return this.option("readOnly")},_toggleSpellcheckState:function(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize:function(){this._labelContainerElement&&(N.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer:function(){return this._input()},_getLabelContainerWidth:function(){return B(this._getLabelContainer())},_getLabelBeforeWidth:function(){var t=this._$beforeButtonsContainer&&B(this._$beforeButtonsContainer);return t??0},_updateLabelWidth:function(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_getFieldElement(){return this._getLabelContainer()},_setFieldAria(t){var e,i=this._label.getId(),a=(e=this._$placeholder)===null||e===void 0?void 0:e.attr("id"),n=[i,a].filter(Boolean).join(" ");if(n||t){var s={labelledby:n||void 0};this.setAria(s,this._getFieldElement())}},_renderLabel:function(){this._unobserveLabelContainerResize(),this._labelContainerElement=l(this._getLabelContainer()).get(0);var{label:t,labelMode:e,labelMark:i}=this.option(),a={$editor:this.$element(),text:t,mark:i,mode:e,containsButtonsBefore:!!this._$beforeButtonsContainer,containerWidth:this._getLabelContainerWidth(),beforeWidth:this._getLabelBeforeWidth()};this._label=new Ae(a),this._setFieldAria(),this._labelContainerElement&&N.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder:function(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup:function(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);var t=this._input(),e=this.option("placeholder"),i={id:e?"dx-".concat(new I):void 0,"data-dx_placeholder":e},a=this._$placeholder=l("<div>").attr(i);a.insertAfter(t),a.addClass(q)},_attachPlaceholderEvents:function(){var t=_(ot.up,this.NAME);r.on(this._$placeholder,t,()=>{r.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder:function(){return this._$placeholder||l()},_clearValueHandler:function(t){var e=this._input();t.stopPropagation(),this._saveValueChangeEvent(t),this._clearValue(),!this._isFocused()&&r.trigger(e,"focus"),r.trigger(e,"input")},_clearValue:function(){this.reset()},_renderEvents:function(){var t=this._input();f(m,(e,i)=>{if(this.hasActionSubscription("on"+i)){var a=this._createActionByOption("on"+i,{excludeValidators:["readOnly"]});r.on(t,_(i.toLowerCase(),this.NAME),n=>{this._disposed||a({event:n})})}})},_refreshEvents:function(){var t=this._input();f(m,(e,i)=>{r.off(t,_(i.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler:function(){this.option("text",this._input().val())},_keyDownHandler:function(t){var e=this._input(),i=t.ctrlKey&&g(t)==="enter",a=e.val()!==this.option("value");i&&a&&r.trigger(e,"change")},_getValueChangeEventOptionName:function(){return"valueChangeEvent"},_renderValueChangeEvent:function(){var t=_(this._renderValueEventName(),"".concat(this.NAME,"TextChange")),e=_(this.option(this._getValueChangeEventOptionName()),"".concat(this.NAME,"ValueChange")),i=_("keydown","".concat(this.NAME,"TextChange")),a=this._input();r.on(a,t,this._keyPressHandler.bind(this)),r.on(a,e,this._valueChangeEventHandler.bind(this)),r.on(a,i,this._keyDownHandler.bind(this))},_cleanValueChangeEvent:function(){var t=".".concat(this.NAME,"ValueChange"),e=".".concat(this.NAME,"TextChange");r.off(this._input(),t),r.off(this._input(),e)},_refreshValueChangeEvent:function(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:function(){return"input change keypress"},_focusTarget:function(){return this._input()},_focusEventTarget:function(){return this.element()},_isInput:function(t){return t===this._input().get(0)},_preventNestedFocusEvent:function(t){if(t.isDefaultPrevented())return!0;var e=this._isNestedTarget(t.relatedTarget);return t.type==="focusin"?e=e&&this._isNestedTarget(t.target)&&!this._isInput(t.target):e||this._toggleFocusClass(!1,this.$element()),e&&t.preventDefault(),e},_isNestedTarget:function(t){return!!this.$element().find(t).length},_focusClassTarget:function(){return this.$element()},_focusInHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_focusOutHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_toggleFocusClass:function(t,e){this.callBase(t,this._focusClassTarget(e))},_hasFocusClass:function(t){return this.callBase(l(t||this.$element()))},_renderEmptinessEvent:function(){var t=this._input();r.on(t,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler:function(){var t=this._input().val(),e=(t===""||t===null)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler:function(t,e){this.option("readOnly")||(this._saveValueChangeEvent(t),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction:function(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),r.off(this._input(),"keyup.onEnterKey.dxTextEditor"),r.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp:function(t){this._disposed||g(t)==="enter"&&this._enterKeyAction({event:t})},_updateValue:function(){this._options.silent("text",null),this._renderValue()},_dispose:function(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement:function(){return this._input()},_hasActiveElement:function(){return this._input().is(V.getActiveElement(this._input()[0]))},_optionChanged:function(t){var{name:e,fullName:i,value:a}=t,n=e.replace("on","");if(m.includes(n)){this._refreshEvents();return}switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(t),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0);break;case"label":this._label.updateText(a),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(a);break;case"labelMode":this._label.updateMode(a),this._setFieldAria();break;case"width":this.callBase(t),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(t);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":break;case"value":this._updateValue(),this.callBase(t);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":i===e&&J(a),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(t),a&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;case"showValidationMark":break;default:this.callBase(t)}},_renderInputType:function(){this._setInputType(this.option("mode"))},_setInputType:function(t){var e=this._input();t==="search"&&(t="text");try{e.prop("type",t)}catch{e.prop("type","text")}},getButton(t){return this._buttonCollection.getButton(t)},focus:function(){r.trigger(this._input(),"focus")},reset:function(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());var t=this._getDefaultOptions();this.option("value")===t.value?(this._options.silent("text",""),this._renderValue()):this.option("value",t.value)},on:function(t,e){var i=this.callBase(t,e),a=t.charAt(0).toUpperCase()+t.substr(1);return m.indexOf(a)>=0&&this._refreshEvents(),i}}),T="dxMask",xe="blur beforedeactivate",pt=" ",Ve=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],Se=["historyUndo","historyRedo"],Ie=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function Oe(t){return pt.repeat(t)}class we{constructor(e){this.editor=e}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}_attachChangeEventHandler(){if(this._editorOption("valueChangeEvent").split(" ").includes("change")){var e=this._editorInput(),i=_(xe,T);r.on(e,i,a=>{this.editor._changeHandler(a)})}}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(e){var{originalEvent:i}=e;if(i){var{inputType:a}=i;if(Se.includes(a))this._handleHistoryInputEvent();else if(Ve.includes(a))this._handleBackwardDeleteInputEvent();else{var n=this._editorCaret();if(!n.end)return;this._clearSelectedText(),this._autoFillHandler(i),this._editorCaret(n),this._handleInsertTextInputEvent(i.data)}this._editorOption("text")===this._previousText&&e.stopImmediatePropagation()}}_handleHistoryInputEvent(){var e=this._editorCaret();this._updateEditorMask({start:e.start,length:e.end-e.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText();var e=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret();var i=this._editorCaret();i.start!==e.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(){var e,i,a=((e=this._prevCaret)===null||e===void 0?void 0:e.end)-((i=this._prevCaret)===null||i===void 0?void 0:i.start)||1,n=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:n.start,length:a,text:Oe(a)}))}_handleInsertTextInputEvent(e){var i,a,n=e??"";this.editor.setForwardDirection();var s=this._updateEditorMask({start:(i=(a=this._prevCaret)===null||a===void 0?void 0:a.start)!==null&&i!==void 0?i:0,length:n.length||1,text:n});s||this._editorCaret(this._prevCaret)}_updateEditorMask(e){var i=e.text.length,a=this.editor._handleChain(e);if(this.editor._displayMask(),this.editor.isForwardDirection()){var{start:n,end:s}=this._editorCaret(),o=a-i,h=a>1;h&&i===1&&this._editorCaret({start:n+o,end:s+o}),this.editor._adjustCaret()}return!!a}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{var e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(()=>{this._editorCaret({start:e,end:e})},0)}}_focusOutHandler(e){this.editor._changeHandler(e),this._editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(e){var{editor:i}=this;i._maskKeyHandler(e,()=>{i._hasSelection()||i._handleKey(pt)})}_cutHandler(e){var i=this._editorCaret(),a=this._editorInput().val().substring(i.start,i.end);this.editor._maskKeyHandler(e,()=>$(e,a))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(()=>{var e=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",e)})}_pasteHandler(e){var{editor:i}=this;if(!this._editorOption("disabled")){var a=this._editorCaret();i._maskKeyHandler(e,()=>{var n=$(e),s=i._maskRulesChain.text().substring(a.end),o=i._handleChain({text:n,start:a.start,length:n.length}),h=a.start+o;i._handleChain({text:s,start:h,length:s.length}),i._caret({start:h,end:h})})}}_autoFillHandler(e){var{editor:i}=this,a=this._editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._isAutoFill()&&(i._maskKeyHandler(e,()=>{i._handleChain({text:a,start:0,length:a.length})}),i._validateMask())})}_isAutoFill(){var e=this._editorInput();if(At.webkit){var i,a=e.get(0);return(i=a==null?void 0:a.matches(":-webkit-autofill"))!==null&&i!==void 0?i:!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}getHandler(e){return i=>{var a;(a=this["_".concat(e,"Handler")])===null||a===void 0||a.call(this,i)}}attachEvents(){var e=this._editorInput();Ie.forEach(i=>{var a=_(i.toLowerCase(),T);r.on(e,a,this.getHandler(i))}),this._attachChangeEventHandler()}detachEvents(){r.off(this._editorInput(),".".concat(T))}clean(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}}var $e=function(){return{}},E=lt,Q=" ",Le="\\",tt="dx-texteditor-masked",y="forward",De="backward",Re="drop",Ne={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:function(t){return b(t)},l:function(t){return b(t)||it(t)},C:/\S/,c:/./,A:function(t){return b(t)||et(t)},a:function(t){return b(t)||et(t)||it(t)}};function et(t){return/[0-9]/.test(t)}function b(t){var e=t.charCodeAt();return 64<e&&e<91||96<e&&e<123||e>127}function it(t){return t===" "}var vt=Be.inherit({_getDefaultOptions:function(){return d(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:Dt.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys:function(){var t=this,e={del:t._maskStrategy.getHandler("del"),enter:t._changeHandler},i=t.callBase();return f(e,function(a,n){var s=i[a];i[a]=function(o){t.option("mask")&&n.call(t,o),s&&s(o)}}),i},_getSubmitElement:function(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init:function(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy:function(){this._maskStrategy=new we(this)},_initMarkup:function(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers:function(){var t=this._onMouseWheel!==u;if(t){var e=this._input(),i=_(Bt,this.NAME),a=this._createAction((function(n){var{event:s}=n;A(e)&&!L(s)&&(this._onMouseWheel(s),s.preventDefault(),s.stopPropagation())}).bind(this));r.off(e,i),r.on(e,i,function(n){a({event:n})})}},_onMouseWheel:u,_useMaskBehavior(){return!!this.option("mask")},_attachDropEventHandler(){var t=this._useMaskBehavior();if(t){var e=_(Re,this.NAME),i=this._input();r.off(i,e),r.on(i,e,a=>a.preventDefault())}},_render:function(){this._renderMask(),this.callBase(),this._attachDropEventHandler(),this._attachMouseWheelEventHandlers()},_renderHiddenElement:function(){this.option("mask")&&(this._$hiddenElement=l("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement:function(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask:function(){this.$element().removeClass(tt),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass(tt),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_suppressCaretChanging:function(t,e){E=$e;try{t.apply(this,e)}finally{E=lt}},_changeHandler:function(t){var e=this._input(),i=e.val();if(i!==this._changedValue){this._changedValue=i;var a=xt(t,{type:"change"});r.trigger(e,a)}},_parseMask:function(){this._maskRules=d({},Ne,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule:function(t){var e=this.option("mask");if(t>=e.length)return new Kt;var i=e[t],a=i===Le,n=a?new H({maskChar:e[t+1]}):this._getMaskRule(i);return n.next(this._parseMaskRule(t+1+a)),n},_getMaskRule:function(t){var e;return f(this._maskRules,function(i,a){if(i===t)return e={pattern:i,allowedChars:a},!1}),v(e)?new dt(d({maskChar:this.option("maskChar")},e)):new H({maskChar:t})},_renderMaskedValue:function(){if(this._maskRulesChain){var t=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());var e={length:t.length};e[this._isMaskedValueMode()?"text":"value"]=t,this._handleChain(e),this._displayMask()}},_replaceSelectedText:function(t,e,i){if(i===void 0)return t;var a=t.slice(0,e.start),n=t.slice(e.end),s=a+i+n;return s},_isMaskedValueMode:function(){return this.option("useMaskedValue")},_displayMask:function(t){t=t||this._caret(),this._renderValue(),this._caret(t)},_isValueEmpty:function(){return M(this._value)},_shouldShowMask:function(){var t=this.option("showMaskMode");return t==="onFocus"?A(this._input())||!this._isValueEmpty():!0},_showMaskPlaceholder:function(){if(this._shouldShowMask()){var t=this._maskRulesChain.text();this.option("text",t),this.option("showMaskMode")==="onFocus"&&this._renderDisplayText(t)}},_renderValue:function(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){var t=this._maskRulesChain.value(),e=M(t)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue:function(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler:function(t){if(!this._maskRulesChain){this.callBase.apply(this,arguments);return}this._saveValueChangeEvent(t),this.option("value",this._getPreparedValue())},_isControlKeyFired:function(t){return this._isControlKey(g(t))||L(t)},_handleChain:function(t){var e=this._maskRulesChain.handle(this._normalizeChainArguments(t));return this._value=this._maskRulesChain.value(),this._textValue=this._maskRulesChain.text(),e},_normalizeChainArguments:function(t){return t=t||{},t.index=0,t.fullText=this._maskRulesChain.text(),t},_convertToValue:function(t){return this._isMaskedValueMode()?t=this._replaceMaskCharWithEmpty(t||this._textValue||""):t=t||this._value||"",t},_replaceMaskCharWithEmpty:function(t){return t.replace(new RegExp(this.option("maskChar"),"g"),Q)},_maskKeyHandler:function(t,e){if(!this.option("readOnly")){this.setForwardDirection(),t.preventDefault(),this._handleSelection();var i=this._input().val(),a=()=>{i!==this._input().val()&&r.trigger(this._input(),"input")},n=e();n?n.then(a):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),a())}},_handleKey:function(t,e){this._direction(e||y),this._adjustCaret(t),this._handleKeyChain(t),this._moveCaret()},_handleSelection:function(){if(this._hasSelection()){var t=this._caret(),e=new Array(t.end-t.start+1).join(Q);this._handleKeyChain(e)}},_handleKeyChain:function(t){var e=this._caret(),i=this.isForwardDirection()?e.start:e.start-1,a=this.isForwardDirection()?e.end:e.end-1,n=i===a?1:a-i;this._handleChain({text:t,start:i,length:n})},_tryMoveCaretBackward:function(){this.setBackwardDirection();var t=this._caret().start;return this._adjustCaret(),!t||t!==this._caret().start},_adjustCaret:function(t){var e=this._caret().start,i=this.isForwardDirection(),a=this._maskRulesChain.adjustedCaret(e,i,t);this._caret({start:a,end:a})},_moveCaret:function(){var t=this._caret().start,e=t+(this.isForwardDirection()?0:-1),i=this._maskRulesChain.isAccepted(e)?t+(this.isForwardDirection()?1:-1):t;this._caret({start:i,end:i})},_caret:function(t,e){var i=this._input();if(i.length){if(!arguments.length)return E(i);E(i,t,e)}},_hasSelection:function(){var t=this._caret();return t.start!==t.end},_direction:function(t){if(!arguments.length)return this._typingDirection;this._typingDirection=t},setForwardDirection:function(){this._direction(y)},setBackwardDirection:function(){this._direction(De)},isForwardDirection:function(){return this._direction()===y},_clean:function(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask:function(){if(this._maskRulesChain){var t=M(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})}},_updateHiddenElement:function(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption:function(){this._updateHiddenElement(),this._renderMask(),this._validateMask()},_processEmptyMask:function(t){if(!t){var e=this.option("value");this.option({text:e,isValid:!0}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()}},_optionChanged:function(t){switch(t.name){case"mask":this._updateMaskOption(),this._processEmptyMask(t.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(t),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(t)}}});S("dxTextEditor",vt);var He=Vt(),Pe=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],We="dx-textbox",at="dx-searchbox",Fe="dx-icon",Ke="dx-icon-search",je=vt.inherit({ctor:function(t,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup:function(){this.$element().addClass(We),this.callBase(),this.setAria("role","textbox")},_renderInputType:function(){this.callBase(),this._renderSearchMode()},_useTemplates:function(){return!1},_renderProps:function(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp:function(){var t=this._getMaxLength();t&&t>0?this._input().attr("maxLength",t):this._input().removeAttr("maxLength")},_renderSearchMode:function(){var t=this._$element;this.option("mode")==="search"?(t.addClass(at),this._renderSearchIcon(),this._showClearButton===void 0&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(t.removeClass(at),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon:function(){var t=l("<div>").addClass(Fe).addClass(Ke);t.prependTo(this._input().parent()),this._$searchIcon=t},_getLabelContainerWidth:function(){if(this._$searchIcon){var t=this._input().parent();return B(t)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth:function(){var t=this.callBase();return this._$searchIcon&&(t+=st(this._$searchIcon)),t},_optionChanged:function(t){switch(t.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(t),this._updateLabelWidth();break;case"mask":this.callBase(t),this._toggleMaxLengthProp();break;default:this.callBase(t)}},_onKeyDownCutOffHandler:function(t){var e=this._getMaxLength();if(e&&!t.ctrlKey&&!this._hasSelection()){var i=l(t.target),a=g(t);return this._cutOffExtraChar(i),i.val().length<e||Pe.includes(a)||He.getSelection().toString()!==""}else return!0},_onChangeCutOffHandler:function(t){var e=l(t.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar:function(t){var e=this._getMaxLength(),i=t.val();e&&i.length>e&&t.val(i.substr(0,e))},_getMaxLength:function(){var t=!!this.option("mask");return t?null:this.option("maxLength")}});S("dxTextBox",je);export{re as C,x as E,je as T,ut as V,ue as a,_t as b,lt as c,vt as d};
