import{_ as y}from"./section-title.vue.a6fe2dde.js";import{d as v,u as h,a as w,b as x,m as C,o as m,c as k,e as a,w as c,f as D,g as e,z as b,j as A,t as $,h as B,i as N}from"./entry.d8c3daa0.js";import{f as R,n as T,D as V,a as r,b as F,c as S}from"./data-grid.ca6f7250.js";import{u as j}from"./useMutation.0937a1e9.js";import{l as E}from"./accounts-queries.125ed560.js";import{u as L}from"./roles-store.cb3cf705.js";import{_ as Q}from"./_plugin-vue_export-helper.c27b6911.js";import"./_commonjsHelpers.23102255.js";import"./row_dragging.d0454e7a.js";import"./index.ab648286.js";import"./ui.collection_widget.edit.f359a828.js";import"./resize_observer.57c96ed3.js";import"./ui.form.675e7539.js";import"./text_box.67135b71.js";import"./ui.popup.28c204f7.js";import"./load_panel.57c43a65.js";import"./check_box.j.46b9e12f.js";import"./ui.list.edit.decorator.selection.2d64423b.js";import"./ui.menu.8ddfdf72.js";import"./ui.toolbar.89924961.js";import"./m_sortable.23c59dc8.js";var n=(o=>(o.title="pages.settings.my_accounts.title",o.field_name="pages.settings.my_accounts.field_name",o.field_domain="pages.settings.my_accounts.field_domain",o.field_role="pages.settings.my_accounts.field_role",o.action_leave="pages.settings.my_accounts.action_leave",o.message_confirm_deletion="pages.settings.my_accounts.message_confirm_deletion",o))(n||{});const q={class:"flex-1 bg-background-content flex justify-center rounded-md shadow-lg"},z=v({__name:"my-accounts",setup(o){const{t:u}=h();w({title:u(n.title)});const i=x(),d=C(),_=L(),p=j({mutationFn:E});async function f({column:t,data:s}){if(t.dataField!=="name")return;const l=s.id;await i.switchAccount(l),b("/account")}function g(t){const s=t.data.id;t.cancel=p.mutateAsync(s,{onSuccess(){i.refreshProfile(),d.invalidateQueries()}})}return(t,s)=>{const l=y;return m(),k("div",null,[a(l,null,{default:c(()=>[A($(t.$t(e(n).title)),1)]),_:1}),D("div",q,[a(e(S),{"data-source":e(i).profile.accounts,"show-borders":!0,"hover-state-enabled":!0,onCellClick:f,onRowRemoving:g},{default:c(()=>[a(e(R),{"allow-deleting":!0,mode:"row"},{default:c(()=>[a(e(T),{"delete-row":t.$t(e(n).action_leave),"confirm-delete-message":t.$t(e(n).message_confirm_deletion)},null,8,["delete-row","confirm-delete-message"])]),_:1}),e(i).profile.accounts.length>0?(m(),B(e(V),{key:0,visible:!0})):N("",!0),a(e(r),{"data-field":"name","css-class":"name-column",caption:t.$t(e(n).field_name)},null,8,["caption"]),a(e(r),{"data-field":"domain",caption:t.$t(e(n).field_domain)},null,8,["caption"]),a(e(r),{"data-field":"role",caption:t.$t(e(n).field_role)},{default:c(()=>[a(e(F),{"data-source":e(_).lookup,"value-expr":"id","display-expr":"caption"},null,8,["data-source"])]),_:1},8,["caption"])]),_:1},8,["data-source"])])])}}});const le=Q(z,[["__scopeId","data-v-dcd2f995"]]);export{le as default};
