var S=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var s=(i,t,e)=>(S(i,t,"read from private field"),e?e.call(i):t.get(i)),c=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},p=(i,t,e,r)=>(S(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e);var d=(i,t,e)=>(S(i,t,"access private method"),e);import{bb as R,bc as C,bO as U,bk as q,m as D,q as L,bl as j,bm as k,bn as A,n as w,bo as I,bq as P,br as Q,bp as T}from"./entry.f47474d7.js";var b,o,h,a,v,y,m,x,E,z=(E=class extends R{constructor(t,e){super();c(this,v);c(this,m);c(this,b,void 0);c(this,o,void 0);c(this,h,void 0);c(this,a,void 0);p(this,o,void 0),p(this,b,t),this.setOptions(e),this.bindMethods(),d(this,v,y).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=s(this,b).defaultMutationOptions(t),C(e,this.options)||s(this,b).getMutationCache().notify({type:"observerOptionsUpdated",mutation:s(this,h),observer:this}),(r=s(this,h))==null||r.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=s(this,h))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,v,y).call(this),d(this,m,x).call(this,t)}getCurrentResult(){return s(this,o)}reset(){var t;(t=s(this,h))==null||t.removeObserver(this),p(this,h,void 0),d(this,v,y).call(this),d(this,m,x).call(this)}mutate(t,e){var r;return p(this,a,e),(r=s(this,h))==null||r.removeObserver(this),p(this,h,s(this,b).getMutationCache().build(s(this,b),this.options)),s(this,h).addObserver(this),s(this,h).execute(t)}},b=new WeakMap,o=new WeakMap,h=new WeakMap,a=new WeakMap,v=new WeakSet,y=function(){var e;const t=((e=s(this,h))==null?void 0:e.state)??U();p(this,o,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},m=new WeakSet,x=function(t){q.batch(()=>{var e,r,l,u,f,O,M,n;s(this,a)&&this.hasListeners()&&((t==null?void 0:t.type)==="success"?((r=(e=s(this,a)).onSuccess)==null||r.call(e,t.data,s(this,o).variables,s(this,o).context),(u=(l=s(this,a)).onSettled)==null||u.call(l,t.data,null,s(this,o).variables,s(this,o).context)):(t==null?void 0:t.type)==="error"&&((O=(f=s(this,a)).onError)==null||O.call(f,t.error,s(this,o).variables,s(this,o).context),(n=(M=s(this,a)).onSettled)==null||n.call(M,void 0,t.error,s(this,o).variables,s(this,o).context))),this.listeners.forEach(g=>{g(s(this,o))})})},E);function G(i,t){const e=t||D(),r=L(()=>e.defaultMutationOptions(j(i))),l=new z(e,r.value),u=k(l.getCurrentResult()),f=l.subscribe(n=>{A(u,n)}),O=(n,g)=>{l.mutate(n,g).catch(()=>{})};w(r,()=>{l.setOptions(r.value)}),I(()=>{f()});const M=P(Q(u));return w(()=>u.error,n=>{if(n&&T(r.value.throwOnError,[n]))throw n}),{...M,mutate:O,mutateAsync:u.mutate,reset:u.reset}}export{G as u};
