import{r as st,M as x,$ as l,m as D,Q as W,V as T,o as v,b8 as ge,P as Jt,b9 as ve,a5 as A,I as me,R as at,K as k,L as m,u as S,a1 as I,t as L,d as nt,g as X,b as Qt,ai as Dt,a as P,C as Se,e as f,X as Ce,aM as yt,J as te,y as ee,A as ie,B as ne,D as be,a6 as M,aK as At,aL as Lt,aQ as Te,ba as we,ad as Ot,bb as Ee,_ as Be,af as ht,bc as xe,Z as De,a0 as ye,bd as Ae,be as Le,bf as Rt,aB as dt}from"./index.ab648286.js";import{W as y,U as B,af as oe,a8 as ot,a0 as $,T as _,Z as g,aM as C,aA as Oe,ai as E,a9 as se,aL as Re,aB as Ie,aH as Pe,ay as ae,ax as R,aD as Y,ak as re,ba as $e,$ as It,bJ as Pt,ad as ke}from"./entry.d8c3daa0.js";import{g as He,a as ze,B as wt,_ as Ne,r as $t}from"./resize_observer.57c96ed3.js";import{c as le,B as he,u as Me,N as de,E as We,F as Ve,i as Fe,r as Ge,o as Ue,G as kt,H as Ye,I as Xe,J as Ke}from"./ui.collection_widget.edit.f359a828.js";import{L as qe}from"./load_panel.57c43a65.js";var Ze=le.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(t){var e=new y,i=new y;this._deferredItems[t.index]=i;var n=this.callBase.call(this,t);return i.done(()=>{e.resolve(n)}),e.promise()},_onItemTemplateRendered:function(t,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:B,_renderItemsAsync(){var t=new y;return oe.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),t.resolve()}),t.promise()},_clean(){this.callBase(),this._deferredItems=[]}}),je="dx-toolbar",ct="dx-toolbar-before",Je="dx-toolbar-center",Ht="dx-toolbar-after",Qe="dx-toolbar-mini",ti="dx-toolbar-item",V="dx-toolbar-label",ei="dx-toolbar-button",ii="dx-toolbar-items-container",ni="dx-toolbar-group",zt="dx-toolbar-compact",Nt="text",oi="default",si="contained",ai="dxToolbarItemDataKey",ri=15;class li extends Ze{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>e!=="disabled")}_initTemplates(){super._initTemplates();var e=new he((function(i,n,o){if(ot(n)){var{text:s,html:a,widget:r}=n;if(s&&i.text(s).wrapInner("<div>"),a&&i.html(a),r==="dxDropDownButton"){var h;n.options=(h=n.options)!==null&&h!==void 0?h:{},$(n.options.stylingMode)||(n.options.stylingMode=this.option("useFlatButtons")?Nt:si)}if(r==="dxButton"){if(this.option("useFlatButtons")){var d,c;n.options=(d=n.options)!==null&&d!==void 0?d:{},n.options.stylingMode=(c=n.options.stylingMode)!==null&&c!==void 0?c:Nt}if(this.option("useDefaultButtons")){var u,p;n.options=(u=n.options)!==null&&u!==void 0?u:{},n.options.type=(p=n.options.type)!==null&&p!==void 0?p:oi}}}else i.text(String(n));this._getTemplate("dx-polymorph-widget").render({container:i,model:o,parent:this})}).bind(this),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return _(super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return x()},options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".".concat(ct),".".concat(Je),".".concat(Ht)].join(","))}_itemClass(){return ti}_itemDataKey(){return ai}_dimensionChanged(){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(je),this._$toolbarItemsContainer=l("<div>").addClass(ii).appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){var e=this._$toolbarItemsContainer;g(["before","center","after"],(i,n)=>{var o="dx-toolbar-".concat(n),s=e.find(".".concat(o));s.length||(this["_$".concat(n,"Section")]=l("<div>").addClass(o).appendTo(e))})}_arrangeItems(e){var i;e=(i=e)!==null&&i!==void 0?i:D(this.$element()),this._$centerSection.css({margin:"0 auto",float:"none"});var n=W(this._$beforeSection.get(0)),o=W(this._$afterSection.get(0));this._alignCenterSection(n,o,e);var s=this._$toolbarItemsContainer.find(".".concat(V)).eq(0),a=s.parent();if(s.length){var r=n.width?n.width:s.position().left,h=a.hasClass(ct)?0:r,d=a.hasClass(Ht)?0:o.width,c=0;a.children().not(".".concat(V)).each(function(){c+=T(this)});var u=e-c,p=Math.max(u-h-d,0);if(a.hasClass(ct))this._alignSection(this._$beforeSection,p);else{var b=T(s)-D(s);s.css("maxWidth",p-b)}}}_alignCenterSection(e,i,n){this._alignSection(this._$centerSection,n-e.width-i.width);var o=this.option("rtlEnabled"),s=o?i:e,a=o?e:i,r=W(this._$centerSection.get(0));(s.right>r.left||r.right>a.left)&&this._$centerSection.css({marginLeft:s.width,marginRight:a.width,float:s.width>a.width?"none":"right"})}_alignSection(e,i){var n=e.find(".".concat(V)),o=n.toArray();i-=this._getCurrentLabelsPaddings(o);var s=this._getCurrentLabelsWidth(o),a=Math.abs(s-i);i<s?(o=o.reverse(),this._alignSectionLabels(o,a,!1)):this._alignSectionLabels(o,a,!0)}_alignSectionLabels(e,i,n){for(var o=function(c){return W(c).width},s=0;s<e.length;s++){var a=l(e[s]),r=Math.ceil(o(e[s])),h=void 0;n&&a.css("maxWidth","inherit");var d=Math.ceil(n?o(e[s]):r);if(d<i)h=n?d:0,i-=d;else{h=n?r+i:r-i,a.css("maxWidth",h);break}a.css("maxWidth",h)}}_applyCompactMode(){var e=this.$element();e.removeClass(zt),this.option("compactMode")&&this._getSummaryItemsWidth(this.itemElements(),!0)>D(e)&&e.addClass(zt)}_getCurrentLabelsWidth(e){var i=0;return e.forEach(function(n,o){i+=T(n)}),i}_getCurrentLabelsPaddings(e){var i=0;return e.forEach(function(n,o){i+=T(n)-D(n)}),i}_renderItem(e,i,n,o){var s,a,r=(s=i.location)!==null&&s!==void 0?s:"center",h=n??this["_$".concat(r,"Section")],d=!!((a=i.text)!==null&&a!==void 0?a:i.html),c=super._renderItem(e,i,h,o);return c.toggleClass(ei,!d).toggleClass(V,d).addClass(i.cssClass),c}_renderGroupedItems(){g(this.option("items"),(e,i)=>{var n,o=i.items,s=l("<div>").addClass(ni),a=(n=i.location)!==null&&n!==void 0?n:"center";!o||!o.length||(g(o,(r,h)=>{this._renderItem(r,h,s,null)}),this._$toolbarItemsContainer.find(".dx-toolbar-".concat(a)).append(s))})}_renderItems(e){var i=this.option("grouped")&&e.length&&e[0].items;i?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){var e;return(e=this.option("items"))!==null&&e!==void 0?e:[]}_renderContentImpl(){var e=this._getToolbarItems();this.$element().toggleClass(Qe,e.length===0),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return D(this.$element())>0&&v(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,i,n){super._itemOptionChanged.apply(this,[e,i,n]),this._arrangeItems()}_optionChanged(e){var{name:i,value:n}=e;switch(i){case"width":super._optionChanged.apply(this,arguments),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged.apply(this,arguments)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){x()&&Promise.all([(()=>new Promise(e=>{var i=()=>{var o=!0;return this.$element().parents().each((s,a)=>{if(Jt.isAnimating(l(a)))return o=!1,!1}),o&&e(),o},n=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>i()||n(),ri)};n()}))(),(()=>{var e=this.$element().find(".".concat(V)),i=[];return e.each((n,o)=>{var s=l(o).text(),a=l(o).css("fontWeight");i.push(ge(s,a))}),Promise.all(i)})()]).then(()=>{this._dimensionChanged()})}}st("dxToolbarBase",li);var ce="dxswipestart",_e="dxswipe",Et="dxswipeend",hi={defaultItemSizeFunc:function(){return D(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(t){var e=A(t);return(e.x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){var e=A(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},di={defaultItemSizeFunc:function(){return v(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(t){var e=A(t);return(e.y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){var e=A(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},ci={horizontal:hi,vertical:di},_i=ve.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(t){this.callBase(t),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return ci[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(t){this._tickData=A(t)},_start:function(t){this._savedEventData=A(t),t=this._fireEvent(ce,t),t.cancel||(this._maxLeftOffset=t.maxLeftOffset,this._maxRightOffset=t.maxRightOffset,this._maxTopOffset=t.maxTopOffset,this._maxBottomOffset=t.maxBottomOffset)},_move:function(t){var e=this._getStrategy(),i=A(t),n=e.calcOffsetRatio.call(this,t);n=this._fitOffset(n,this.elastic),i.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=i),this._fireEvent(_e,t,{offset:n}),t.cancelable!==!1&&t.preventDefault()},_end:function(t){var e=this._getStrategy(),i=e.calcOffsetRatio.call(this,t),n=e.isFastSwipe.call(this,t),o=i,s=this._calcTargetOffset(i,n);o=this._fitOffset(o,this.elastic),s=this._fitOffset(s,!1),this._fireEvent(Et,t,{offset:o,targetOffset:s})},_fitOffset:function(t,e){var i=this._getStrategy(),n=i.getBounds.call(this);return t<-n[0]?e?(-2*n[0]+t)/3:-n[0]:t>n[1]?e?(2*n[1]+t)/3:n[1]:t},_calcTargetOffset:function(t,e){var i;return e?(i=Math.ceil(Math.abs(t)),t<0&&(i=-i)):i=Math.round(t),i}});me({emitter:_i,events:[ce,_e,Et]});var Mt="dx-list-item-badge-container",ui="dx-list-item-badge",pi="dx-badge",_t="dx-list-item-chevron-container",fi="dx-list-item-chevron",gi=Me.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(t){if(this._$element.children("."+Mt).remove(),!!t){var e=l("<div>").addClass(Mt).append(l("<div>").addClass(ui).addClass(pi).text(t)),i=this._$element.children("."+_t).first();i.length>0?e.insertBefore(i):e.appendTo(this._$element)}},_renderShowChevron:function(t){if(this._$element.children("."+_t).remove(),!!t){var e=l("<div>").addClass(_t),i=l("<div>").addClass(fi);e.append(i).appendTo(this._$element)}}}),Wt="dx-scrollview-pull-down-loading",ut="dx-scrollview-pull-down-ready",vi="dx-scrollview-pull-down-image",mi="dx-scrollview-pull-down-indicator",Si="dx-scrollview-pull-down-text",Ci="dx-scrollview-pull-down-text-visible",K=0,F=1,q=2,pt=3,bi=400,Ti=de.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$refreshingText=t._$refreshingText,this._$scrollViewContent=l(t.content()),this._$container=l(t.container()),this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=C(),this.releaseCallbacks=C(),this.reachBottomCallbacks=C()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=l("<div>").addClass(vi),e=l("<div>").addClass(mi),i=new at(l("<div>")).$element(),n=this._$pullDownText=l("<div>").addClass(Si);this._$pullingDownText=l("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=l("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=l("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(t).append(e.append(i)).append(n)},_releaseState:function(){this._state=K,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this,e=[{element:this._$pullingDownText,visibleState:K},{element:this._$pulledDownText,visibleState:F},{element:this._$refreshingText,visibleState:q}];g(e,function(i,n){var o=t._state===n.visibleState?"addClass":"removeClass";n.element[o](Ci)})},update:function(){this.callBase(),this._setTopPocketOffset()},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},_setTopPocketOffset:function(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd:function(){this.callBase(),this._complete()},handleStop:function(){this.callBase(),this._complete()},_complete:function(){this._state===F&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout((function(){this._pullDownRefreshing()}).bind(this),400))},_setPullDownOffset:function(t){k(this._$topPocket,{top:t}),k(this._$scrollViewContent,{top:t})},handleScroll:function(t){if(this.callBase(t),this._state!==q){var e=this.location().top,i=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isPullDown:function(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this._state!==pt&&(this._state=pt,this.reachBottomCallbacks.fire())},_pullDownReady:function(){this._state!==F&&(this._state=F,this._$pullDown.addClass(ut),this._refreshPullDownText())},_stateReleased:function(){this._state!==K&&(this._$pullDown.removeClass(Wt).removeClass(ut),this._releaseState())},_pullDownRefreshing:function(){this._state!==q&&(this._state=q,this._$pullDown.addClass(Wt).removeClass(ut),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable:function(t){t&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=F},release:function(){var t=new y;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._state===pt&&(this._state=K),this._releaseTimeout=setTimeout((function(){this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}).bind(this),bi),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),Vt="dx-scrollview-pull-down-loading",wi="dx-scrollview-pull-down-indicator",Ei="dx-scrollview-pull-down-refreshing",Bi="dx-icon-pulldown",ft=0,xi=1,Ft=2,gt=4,Z=5,Di=de.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$scrollViewContent=l(t.content()),this._$container=l(t.container()),this._initCallbacks(),this._location=0},_initCallbacks:function(){this.pullDownCallbacks=C(),this.releaseCallbacks=C(),this.reachBottomCallbacks=C()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=l("<div>").addClass(wi),e=new at(l("<div>")).$element();this._$icon=l("<div>").addClass(Bi),this._$pullDown.empty().append(this._$icon).append(t.append(e))},_releaseState:function(){this._state=ft,this._releasePullDown(),this._updateDimensions()},_releasePullDown:function(){this._$pullDown.css({opacity:0})},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},handleInit:function(t){this.callBase(t),this._state===ft&&this._location===0&&(this._startClientY=A(t.originalEvent).y,this._state=gt)},handleMove:function(t){this.callBase(t),this._deltaY=A(t.originalEvent).y-this._startClientY,this._state===gt&&(this._pullDownEnabled&&this._deltaY>0?this._state=Z:this._complete()),this._state===Z&&(t.preventDefault(),this._movePullDown())},_movePullDown:function(){var t=this._getPullDownHeight(),e=Math.min(3*t,this._deltaY+this._getPullDownStartPosition()),i=180*e/t/3;this._$pullDown.css({opacity:1}).toggleClass(Ei,e<t),k(this._$pullDown,{top:e}),this._$icon.css({transform:"rotate("+i+"deg)"})},_isPullDown:function(){return this._pullDownEnabled&&this._state===Z&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight:function(){return Math.round(.05*m(this._$element))},_getPullDownStartPosition:function(){return-Math.round(1.5*m(this._$pullDown))},handleEnd:function(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop:function(){this._complete()},_complete:function(){(this._state===gt||this._state===Z)&&this._releaseState()},handleScroll:function(t){if(this.callBase(t),this._state!==Ft){var e=this.location().top,i=this._location-e;this._location=e,i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this.reachBottomCallbacks.fire()},_stateReleased:function(){this._state!==ft&&(this._$pullDown.removeClass(Vt),this._releaseState())},_pullDownRefreshing:function(){this._state=Ft,this._pullDownRefreshHandler()},_pullDownRefreshHandler:function(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown:function(){this._$pullDown.addClass(Vt),k(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable:function(t){this._$topPocket.toggle(t),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=xi},release:function(){var t=new y;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout((function(){this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}).bind(this),800),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),yi=Math,Gt="dx-scrollview-pull-down-loading",vt="dx-scrollview-pull-down-ready",Ai="dx-scrollview-pull-down-image",Li="dx-scrollview-pull-down-indicator",Oi="dx-scrollview-pull-down-text",Ri="dx-scrollview-pull-down-text-visible",G=0,U=1,mt=2,St=3,Ii=We.inherit({ctor:function(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState:function(){this._state=G,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this,e=[{element:this._$pullingDownText,visibleState:G},{element:this._$pulledDownText,visibleState:U},{element:this._$refreshingText,visibleState:mt}];g(e,function(i,n){var o=t._state===n.visibleState?"addClass":"removeClass";n.element[o](Ri)})},_initCallbacks:function(){this.pullDownCallbacks=C(),this.releaseCallbacks=C(),this.reachBottomCallbacks=C()},_updateBounds:function(){var t=this._direction!=="horizontal";if(t){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;var e=this._$container.get(0),i=this._$content.get(0);this._bottomBoundary=Math.max(i.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar:function(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent:function(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():this._state!==G&&this._stateReleased()},_moveScrollbar:function(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown:function(){return this._pullDownEnabled&&this._location>=0},_isReachBottom:function(){var t=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(t.scrollTop))<=1},_scrollComplete:function(){this._inBounds()&&this._state===U?this._pullDownRefreshing():this._inBounds()&&this._state===St?this._reachBottomLoading():this.callBase()},_reachBottomReady:function(){this._state!==St&&(this._state=St,this._minOffset=this._getMinOffset())},_getMaxOffset:function(){return-this._topPocketSize},_getMinOffset:function(){return yi.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading:function(){this.reachBottomCallbacks.fire()},_pullDownReady:function(){this._state!==U&&(this._state=U,this._maxOffset=0,this._$pullDown.addClass(vt),this._refreshPullDownText())},_stateReleased:function(){this._state!==G&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass(Gt).removeClass(vt),this.releaseCallbacks.fire())},_pullDownRefreshing:function(){this._state!==mt&&(this._state=mt,this._$pullDown.addClass(Gt).removeClass(vt),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler:function(){return this._state===G&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=Oe(this._release.bind(this)),this._releaseTask.promise},_release:function(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler:function(t){this._reachBottomEnabled!==t&&(this._reachBottomEnabled=t,this._updateBounds())},_pullDownEnablingHandler:function(t){this._pullDownEnabled!==t&&(this._pullDownEnabled=t,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange:function(){this._location-=v(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler:function(){this._state=U},dispose:function(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),Pi=Ve.inherit({_init:function(t){this.callBase(t),this._$pullDown=t._$pullDown,this._$topPocket=t._$topPocket,this._$bottomPocket=t._$bottomPocket,this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=C(),this.releaseCallbacks=C(),this.reachBottomCallbacks=C()},render:function(){this._renderPullDown(),this.callBase()},_renderPullDown:function(){var t=l("<div>").addClass(Ai),e=l("<div>").addClass(Li),i=new at(l("<div>")).$element(),n=this._$pullDownText=l("<div>").addClass(Oi);this._$pullingDownText=l("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=l("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=l("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(t).append(e.append(i)).append(n)},pullDownEnable:function(t){this._eventHandler("pullDownEnabling",t)},reachBottomEnable:function(t){this._eventHandler("reachBottomEnabling",t)},_createScroller:function(t){var e=this,i=e._scrollers[t]=new Ii(e._scrollerOptions(t));i.pullDownCallbacks.add(function(){e.pullDownCallbacks.fire()}),i.releaseCallbacks.add(function(){e.releaseCallbacks.fire()}),i.reachBottomCallbacks.add(function(){e.reachBottomCallbacks.fire()})},_scrollerOptions:function(t){return _(this.callBase(t),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease:function(){this._eventHandler("pendingRelease")},release:function(){return this._eventHandler("release").done(this._updateAction)},location:function(){var t=this.callBase();return t.top+=v(this._$topPocket),t},dispose:function(){g(this._scrollers,function(){this.dispose()}),this.callBase()}}),H="dx-scrollview",$i=H+"-content",ki=H+"-top-pocket",Hi=H+"-bottom-pocket",zi=H+"-pull-down",Bt=H+"-scrollbottom",Ni=Bt+"-indicator",Mi=Bt+"-text",Wi=H+"-loadpanel",Vi={pullDown:Ti,swipeDown:Di,simulated:Pi},Fi=!L(),Gi={finishLoading:B,release:B,refresh:B,scrollOffset:()=>({top:0,left:0}),_optionChanged:function(t){if(t.name!=="onUpdated")return this.callBase.apply(this,arguments)}},ue=Fe.inherit(Fi?Gi:{_getDefaultOptions:function(){return _(this.callBase(),{pullingDownText:E.format("dxScrollView-pullingDownText"),pulledDownText:E.format("dxScrollView-pulledDownText"),refreshingText:E.format("dxScrollView-refreshingText"),reachBottomText:E.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){var t=S.real();return t.platform==="android"},options:{refreshStrategy:"swipeDown"}},{device:function(){return x()},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init:function(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup:function(){this.callBase(),this.$element().addClass(H),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent:function(){var t=l("<div>").addClass($i);this._$content.wrapInner(t)},_initTopPocket:function(){var t=this._$topPocket=l("<div>").addClass(ki),e=this._$pullDown=l("<div>").addClass(zi);t.append(e),this._$content.prepend(t)},_initBottomPocket:function(){var t=this._$bottomPocket=l("<div>").addClass(Hi),e=this._$reachBottom=l("<div>").addClass(Bt),i=l("<div>").addClass(Ni),n=new at(l("<div>")).$element(),o=this._$reachBottomText=l("<div>").addClass(Mi);this._updateReachBottomText(),e.append(i.append(n)).append(o),t.append(e),this._$content.append(t)},_initLoadPanel:function(){var t=l("<div>").addClass(Wi).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(t,qe,e)},_updateReachBottomText:function(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy:function(){var t=this.option("useNative")?this.option("refreshStrategy"):"simulated",e=Vi[t];this._strategy=new e(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions:function(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState:function(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on:function(t){var e=this.callBase.apply(this,arguments);return(t==="pullDown"||t==="reachBottom")&&this._tryRefreshPocketState(),e},_pullDownEnable:function(t){if(arguments.length===0)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(t),this._strategy.pullDownEnable(t),this._pullDownEnabled=t)},_reachBottomEnable:function(t){if(arguments.length===0)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(t),this._strategy.reachBottomEnable(t),this._reachBottomEnabled=t)},_pullDownHandler:function(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator:function(t){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=t},_pullDownLoading:function(){this.startLoading(),this._pullDownAction()},_reachBottomHandler:function(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading:function(){this.startLoading(),this._reachBottomAction()},_releaseHandler:function(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged:function(t){switch(t.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(t)}},content:function(){return I(this._$content.children().eq(1))},release:function(t){return t!==void 0&&this.toggleLoading(!t),this._strategy.release()},toggleLoading:function(t){this._reachBottomEnable(t)},refresh:function(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading:function(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading:function(){this._loadPanel.hide(),this._unlock()},_dispose:function(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});st("dxScrollView",ue);var j="__dx_key__";const Ui=le.inherit({_getDefaultOptions:function(){return _(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var t;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{var i=this._dataController;i.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},(t=this._dataController)===null||t===void 0||t.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(t){var e=l(),i=this.key();return this.itemElements().each((n,o)=>{var s=l(o),a=this._getItemData(s);if(i?Ge(i,this.keyOf(a),t):this._isItemEquals(a,t))return e=s,!1}),e},_dataSourceChangedHandler:function(t,e){e!=null&&e.changes?this._modifyByChanges(e.changes):(this.callBase(t,e),this._refreshItemsCache())},_isItemEquals:function(t,e){t&&t[j]&&(t=t.data);try{return JSON.stringify(t)===JSON.stringify(e)}catch{return t===e}},_isItemStrictEquals:function(t,e){return this._isItemEquals(t,e)},_shouldAddNewGroup:function(t,e){var i=!1;return this.option("grouped")&&(t.length||(i=!0),g(t,(n,o)=>{o.type==="insert"&&(i=!0,g(e,(s,a)=>{if(o.data.key!==void 0&&o.data.key===a.key)return i=!1,!1}))})),i},_partialRefresh:function(){if(this.option("repaintChangesOnly")){var t=Ue(this._itemsCache,this._editStrategy.itemsGetter(),e=>e&&e[j]!==void 0?e[j]:this.keyOf(e),this._isItemStrictEquals.bind(this));if(t&&this._itemsCache.length&&!this._shouldAddNewGroup(t,this._itemsCache))return this._modifyByChanges(t,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var t=this._editStrategy.itemsGetter();try{this._itemsCache=_(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map((e,i)=>({[j]:t[i],data:e})))}catch{this._itemsCache=_([],t)}}},_dispose:function(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(t,e,i,n){if(n)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{var o=e[kt(t,e,i.key)];o&&Ye(t,e,i.key,i.data).done(()=>{this._renderItem(e.indexOf(o),o,null,this._findItemElementByKey(i.key))})}},_insertByChange:function(t,e,i,n){oe(n||Xe(t,e,i.data,i.index)).done(()=>{var o;this._beforeItemElementInserted(i);var s=this._getItemContainer(i.data);this._renderItem((o=i.index)!==null&&o!==void 0?o:e.length,i.data,s),this._afterItemElementInserted(),this._correctionIndex++})},_getItemContainer:function(t){return this._itemContainer()},_updateSelectionAfterRemoveByChange:function(t){var e=this.option("selectedIndex");e>t?this.option("selectedIndex",e-1):e===t&&this.option("selectedItems").length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(t){var e=this.option("selectedIndex");t.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:B,_removeByChange:function(t,e,i,n){var o=n?i.index:kt(t,e,i.key),s=n?i.oldItem:e[o];if(s){var a=this._findItemElementByKey(i.key),r=this._extendActionArgs(a);this._waitDeletingPrepare(a).done(()=>{n?(this._updateIndicesAfterIndex(o-1),this._afterItemElementDeleted(a,r),this._updateSelectionAfterRemoveByChange(o)):(this._deleteItemElementByIndex(o),this._afterItemElementDeleted(a,r))}),this._correctionIndex--}},_modifyByChanges:function(t,e){var i=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},o=this._dataController,s=o.paginate(),a=o.group();(s||a)&&(t=t.filter(r=>r.type!=="insert"||r.index!==void 0)),t.forEach(r=>this["_".concat(r.type,"ByChange")](n,i,r,e)),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(t,e,i){var n=t.children(this._itemSelector()).get(i);nt.insertElement(t.get(0),e.get(0),n)},_optionChanged:function(t){switch(t.name){case"items":var e=this._partialRefresh(t.value);e||this.callBase(t);break;case"dataSource":(!this.option("repaintChangesOnly")||!t.value)&&this.option("items",[]),this.callBase(t);break;case"repaintChangesOnly":break;default:this.callBase(t)}}});var Yi=t=>Array.isArray(t)&&t.every(e=>{var i=Object.keys(e).length===2,n="key"in e&&"items"in e;return i&&n&&Array.isArray(e.items)});const Xi={_getSpecificDataSourceOption:function(){var t=this.option("dataSource"),e=!1,i={};return this._getGroupedOption()&&Yi(t)&&(i=t.reduce((n,o)=>{var s=o.items.map(a=>(se(a)||(a={text:a},e=!0),"key"in a||(a.key=o.key),a));return n.concat(s)},[]),t={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(t.searchExpr="text")),t}};function Ki(t){return t?Number(t.replace("px","")):0}function qi(t){var e,i;return t&&L()?(e=(i=X()).getComputedStyle)===null||e===void 0?void 0:e.call(i,t):null}function Zi(t,e){var i=qi(t);return i?Ki(i["margin".concat(Re(e))]):0}var ji="dx-list",it="dx-list-item",Ji="."+it,Qi="dx-list-item-icon-container",tn="dx-list-item-icon",N="dx-list-group",Ct="dx-list-group-header",J="dx-list-group-body",en="dx-list-collapsible-groups",Ut="dx-list-group-collapsed",nn="dx-list-group-header-indicator",on="dx-has-next",sn="dx-list-next-button",Yt="dx-wrap-item-text",an=".dx-list-select-all",rn="dxListItemData",Xt=70,ln=Ie("items"),hn=Ui.inherit({_activeStateUnit:[Ji,an].join(","),_supportedKeys:function(){var t=this,e=function(n){var o=i(n),s=o.is(t.option("focusedElement"));s&&(function(a,r){var h=a.position().top;r==="prev"&&(h=a.position().top-v(t.$element())+m(a)),t.scrollTo(h)}(o,n),o=i(n)),t.option("focusedElement",I(o)),t.scrollToItem(o)};function i(n){var o=t.scrollTop(),s=v(t.$element()),a=l(t.option("focusedElement")),r=!0;if(!a.length)return l();for(;r;){var h=a[n]();if(!h.length)break;var d=h.position().top+m(h)/2;r=d<s+o&&d>o,r&&(a=h)}return a}return _(this.callBase(),{leftArrow:B,rightArrow:B,pageUp:function(){return e("prev"),!1},pageDown:function(){return e("next"),!1}})},_getDefaultOptions:function(){return _(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:E.format("dxList-pullingDownText"),pulledDownText:E.format("dxList-pulledDownText"),refreshingText:E.format("dxList-refreshingText"),pageLoadingText:E.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:E.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(t){return t?t.showChevron:void 0},badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){var t=Qt();return this.callBase().concat(Ke(),[{device:function(){return!Dt},options:{useNativeScrolling:!1}},{device:function(e){return!Dt&&!S.isSimulator()&&S.real().deviceType==="desktop"&&e.platform==="generic"},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return S.real().deviceType==="desktop"&&!S.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return x(t)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:"",useInkRipple:!0}}])},_visibilityChanged:function(t){t&&this._updateLoadingState(!0)},_itemClass:function(){return it},_itemDataKey:function(){return rn},_itemContainer:function(){return this._$container},_saveSelectionChangeEvent:function(t){this._selectionChangeEventInstance=t},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this.option("grouped")?this._itemElementsCache=this._itemContainer().children("."+N).children("."+J).children(this._itemSelector()):this._itemElementsCache=this._itemContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(t,e){var i=this.callBase(t,e);return i.done(function(){this._refreshItemElements()})},deleteItem:function(t){var e=this.callBase(t);return e.done(function(){this._refreshItemElements()})},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(t){if(!(this.option("selectionMode")==="single"&&this.isItemSelected(t.currentTarget)))return this.callBase(t)},_allowDynamicItemsAppend:function(){return!0},_init:function(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._initScrollView(),this._feedbackShowTimeout=Xt,this._createGroupRenderAction()},_scrollBottomMode:function(){return this.option("pageLoadMode")==="scrollBottom"},_nextButtonMode:function(){return this.option("pageLoadMode")==="nextButton"},_dataSourceOptions:function(){var t=this._scrollBottomMode(),e=this._nextButtonMode();return _(this.callBase(),{paginate:Pe(t||e,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(t){return this._itemContainer().find(".".concat(N)).eq(t).find(".".concat(J))},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){var t=this.option("scrollingEnabled"),e=t&&this.option("pullRefreshEnabled"),i=t&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),dn(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!t,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=l(this._scrollView.content()),this.option("wrapItemText")&&this._$container.addClass(Yt),this._createScrollViewActions()},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(t){this._scrollAction&&this._scrollAction(t)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new he(function(t,e){ot(e)?e.key&&t.text(e.key):t.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(t,e){if(this.callBase(t,e),t.icon){var i=He(t.icon).addClass(tn),n=l("<div>").addClass(Qi);n.append(i),e.prepend(n)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(t){var e=this._dataController,i=this._scrollBottomMode()&&t&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(i)?this._infiniteDataLoading():(this._scrollView.release(!i&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted:function(t){return $(t)&&(this._isFirstLoadCompleted=t),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(t){this._loadIndicationSuppressed()||(t&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout((function(){var e=!this._itemElements().length,i=!e||this._isDataSourceFirstLoadCompleted();if(i){var n;(n=this._scrollView)===null||n===void 0||n.startLoading()}}).bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),t||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&L()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(t){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=t},_scrollViewIsFull:function(){var t=this._scrollView;return!t||v(t.content())>v(t.container())},_pullDownHandler:function(t){this._pullRefreshAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading:function(t){var e,i,n=v(this._scrollView.content())-v(this._scrollView.container())<((e=(i=this._scrollView.scrollOffset())===null||i===void 0?void 0:i.top)!==null&&e!==void 0?e:0);return t&&(!this._scrollViewIsFull()||n)},_infiniteDataLoading:function(){var t=this.$element().is(":visible");t&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler:function(t){this._pageLoadingAction(t);var e=this._dataController;!e.isLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()},_renderItems:function(t){this.option("grouped")?(g(t,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),x()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){var t=P(Se,this.NAME),e="."+Ct,i=this.$element(),n=this.option("collapsibleGroups");i.toggleClass(en,n),f.off(i,t,e),n&&f.on(i,t,e,(function(o){this._createAction((function(s){var a=l(s.event.currentTarget).parent();this._collapseGroupHandler(a),this.option("focusStateEnabled")&&this.option("focusedElement",I(a.find("."+it).eq(0)))}).bind(this),{validatingTargetName:"element"})({event:o})}).bind(this))},_collapseGroupHandler:function(t,e){var i=new y;if(t.hasClass(Ut)===e)return i.resolve();var n=t.children("."+J),o=m(n),s=0;return o===0&&(Ce(n,"auto"),s=m(n)),t.toggleClass(Ut,e),Jt.animate(n,{type:"custom",from:{height:o},to:{height:s},duration:200,complete:(function(){this.updateDimensions(),this._updateLoadingState(!0),i.resolve()}).bind(this)}),i.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=l(),this.$element().addClass(ji),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this._setListAria()},_setListAria(){var{items:t}=this.option(),e=t!=null&&t.length?{role:"listbox",label:"Items"}:{role:void 0,label:void 0};this.setAria(e)},_focusTarget:function(){return this._itemContainer()},_renderInkRipple:function(){this._inkRipple=ze()},_toggleActiveState:function(t,e,i){this.callBase.apply(this,arguments);var n=this;if(this._inkRipple){var o={element:t,event:i};e?x()?this._inkRippleTimer=setTimeout(function(){n._inkRipple.showWave(o)},Xt/2):n._inkRipple.showWave(o):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(o))}},_postprocessRenderItem:function(t){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent(l(t.itemElement))},_attachSwipeEvent:function(t){var e=P(Et,this.NAME);f.on(t,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(t){this._itemDXEventHandler(t,"onItemSwipe",{direction:t.offset<0?"left":"right"})},_nextButtonHandler:function(t){this._pageLoadingAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(t,e){var i=l("<div>").addClass(N).appendTo(this._itemContainer()),n="dx-".concat(new ae().toString()),o={role:"group",labelledby:n};this.setAria(o,i);var s=l("<div>").addClass(Ct).attr("id",n).appendTo(i),a=this.option("groupTemplate"),r=this._getTemplate(e.template||a,e,t,s),h={index:t,itemData:e,container:I(s)};this._createItemByTemplate(r,h),x()&&l("<div>").addClass(nn).prependTo(s),this._renderingGroupIndex=t;var d=l("<div>").addClass(J).appendTo(i);g(ln(e)||[],(function(c,u){this._renderItem({group:t,item:c},u,d)}).bind(this)),this._groupRenderAction({groupElement:I(i),groupIndex:t,groupData:e})},downInkRippleHandler:function(t){this._toggleActiveState(l(t.currentTarget),!0,t)},upInkRippleHandler:function(t){this._toggleActiveState(l(t.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){var t="."+Ct,e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var i=[e,"dxpointerdown",t,this._downInkRippleHandler],n=[e,"dxpointerup dxpointerout",t,this._upInkRippleHandler];f.off(...i),f.on(...i),f.off(...n),f.on(...n)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(t){this.callBase(t),this._scrollView.option("disabled",t||!this.option("scrollingEnabled"))},_toggleNextButton:function(t){var e=this._dataController,i=this._getNextButton();this.$element().toggleClass(on,t),t&&e.isLoaded()&&i.appendTo(this._itemContainer()),t||i.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){var t=l("<div>").addClass(sn),e=l("<div>").appendTo(t);return this._createComponent(e,wt,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:x()?"default":void 0,integrationOptions:{}}),t},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if(!L())this.callBase();else{var t=this._scrollView.scrollTop();this.callBase(),t&&this._scrollView.scrollTo(t)}},_optionChanged:function(t){switch(t.name){case"pageLoadMode":this._toggleNextButton(t.value),this._initScrollView();break;case"dataSource":this.callBase(t),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(t),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"grouped":case"collapsibleGroups":case"groupTemplate":this._invalidate();break;case"wrapItemText":this._$container.toggleClass(Yt,t.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(t),this._scrollView.option(t.name,t.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(t),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(t);break;case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(t)}},_extendActionArgs:function(t){if(!this.option("grouped"))return this.callBase(t);var e=t.closest("."+N),i=e.find("."+it);return _(this.callBase(t),{itemIndex:{group:e.index(),item:i.index(t)}})},expandGroup:function(t){var e=new y,i=this._itemContainer().find("."+N).eq(t);return this._collapseGroupHandler(i,!1).done((function(){e.resolveWith(this)}).bind(this)),e.promise()},collapseGroup:function(t){var e=new y,i=this._itemContainer().find("."+N).eq(t);return this._collapseGroupHandler(i,!0).done((function(){e.resolveWith(this)}).bind(this)),e},updateDimensions:function(){var t=this,e=new y;return t._scrollView?t._scrollView.update().done(function(){!t._scrollViewIsFull()&&t._updateLoadingState(!0),e.resolveWith(t)}):e.resolveWith(t),e.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(t){this._scrollView.scrollBy(t)},scrollTo:function(t){this._scrollView.scrollTo(t)},scrollToItem:function(t){var e=this._editStrategy.getItemElement(t),i=e==null?void 0:e.get(0);this._scrollView.scrollToElement(i,{bottom:Zi(i,"bottom")})},_dimensionChanged:function(){this.updateDimensions()}}).include(Xi);hn.ItemClass=gi;function dn(){return ue}var Q=5;class cn{constructor(e){this.init(e)}init(e){var{dragEnabled:i,handle:n,draggableElement:o,positionController:s}=e;this._positionController=s,this._draggableElement=o,this._handle=n,this._dragEnabled=i,this.unsubscribe(),i&&this.subscribe()}moveDown(e){this._moveTo(Q,0,e)}moveUp(e){this._moveTo(-Q,0,e)}moveLeft(e){this._moveTo(0,-Q,e)}moveRight(e){this._moveTo(0,Q,e)}subscribe(){var e=this._getEventNames();f.on(this._handle,e.startEventName,i=>{this._dragStartHandler(i)}),f.on(this._handle,e.updateEventName,i=>{this._dragUpdateHandler(i)}),f.on(this._handle,e.endEventName,i=>{this._dragEndHandler(i)})}unsubscribe(){var e=this._getEventNames();f.off(this._handle,e.startEventName),f.off(this._handle,e.updateEventName),f.off(this._handle,e.endEventName)}_getEventNames(){var e=P(ee,"overlayDrag"),i=P(ie,"overlayDrag"),n=P(ne,"overlayDrag");return{startEventName:e,updateEventName:i,endEventName:n}}_dragStartHandler(e){var i=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=i.top,e.maxBottomOffset=i.bottom,e.maxLeftOffset=i.left,e.maxRightOffset=i.right}_dragUpdateHandler(e){var i={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(i),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,i,n){if(this._dragEnabled){n.preventDefault(),n.stopPropagation();var o=this._fitOffsetIntoAllowedRange(e,i);this._moveByOffset(o),this._dragEndHandler(n)}}_fitOffsetIntoAllowedRange(e,i){var n=this._getAllowedOffsets();return{top:R(e,-n.top,n.bottom),left:R(i,-n.left,n.right)}}_getContainerDimensions(){var e=nt.getDocument(),i=this._positionController.$dragResizeContainer.get(0),n=T(i),o=m(i);return Y(i)&&(o=Math.max(e.body.clientHeight,o),n=Math.max(e.body.clientWidth,n)),{width:n,height:o}}_getContainerPosition(){var e=this._positionController.$dragResizeContainer.get(0);return Y(e)?{top:0,left:0}:yt(e)}_getElementPosition(){return yt(this._draggableElement)}_getInnerDelta(){var e=this._getContainerDimensions(),i=this._getElementDimensions();return{x:e.width-i.width,y:e.height-i.height}}_getOuterDelta(){var{width:e,height:i}=this._getElementDimensions(),n=this._positionController.outsideDragFactor;return{x:e*n,y:i*n}}_getFullDelta(){var e=this._getInnerDelta(),i=this._getOuterDelta();return{x:e.x+i.x,y:e.y+i.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){var e=this._getFullDelta(),i=e.y>=0&&e.x>=0;if(!i)return{top:0,bottom:0,left:0,right:0};var n=this._getElementPosition(),o=this._getContainerPosition(),s=this._getOuterDelta();return{top:n.top-o.top+s.y,bottom:-n.top+o.top+e.y,left:n.left-o.left+s.x,right:-n.left+o.left+e.x}}_moveByOffset(e){var i=te(this._draggableElement),n={left:i.left+e.left,top:i.top+e.top};k(this._draggableElement,n)}}var rt="dxResizable",_n="dx-resizable",un="dx-resizable-resizing",tt="dx-resizable-handle",pn="dx-resizable-handle-top",fn="dx-resizable-handle-bottom",gn="dx-resizable-handle-left",vn="dx-resizable-handle-right",et="dx-resizable-handle-corner",mn=P(ee,rt),Sn=P(ie,rt),Cn=P(ne,rt),bn={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},xt=be.inherit({_getDefaultOptions:function(){return _(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init:function(){this.callBase(),this.$element().addClass(_n)},_initMarkup:function(){this.callBase(),this._renderHandles()},_render:function(){this.callBase(),this._renderActions()},_renderActions:function(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles:function(){this._handles=[];var t=this.option("handles");if(!(t==="none"||!t)){var e=t==="all"?["top","bottom","left","right"]:t.split(" "),i={};g(e,(n,o)=>{i[o]=!0,this._renderHandle(o)}),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}},_renderHandle:function(t){var e=l("<div>").addClass(tt).addClass(tt+"-"+t).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers:function(){if(!this.option("disabled")){var t={};t[mn]=this._dragStartHandler.bind(this),t[Sn]=this._dragHandler.bind(this),t[Cn]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{f.on(e,t,{direction:"both",immediate:!0})})}},_detachEventHandlers:function(){this._handles.forEach(t=>{f.off(t)})},_toggleEventHandlers:function(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize:function(){var t=this.$element();return t.css("boxSizing")==="border-box"?{width:T(t),height:m(t)}:{width:D(t),height:v(t)}},_dragStartHandler:function(t){var e=this.$element();if(e.is(".dx-state-disabled, .dx-state-disabled *")){t.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=te(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null},_toggleResizingClass:function(t){this.$element().toggleClass(un,t)},_renderDragOffsets:function(t){var e=this._getArea();if(e){var i=l(t.target).closest("."+tt),n=T(i),o=m(i),s=i.offset(),a=e.offset,r=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=s.left-a.left-r.scrollX,t.maxRightOffset=this._rightMaxOffset=a.left+e.width-s.left-n+r.scrollX,t.maxTopOffset=this._topMaxOffset=s.top-a.top-r.scrollY,t.maxBottomOffset=this._bottomMaxOffset=a.top+e.height-s.top-o+r.scrollY}},_getBorderWidth:function(t,e){if(Y(t.get(0)))return 0;var i=t.css(bn[e]);return parseInt(i)||0},_proportionate:function(t,e){var i=this._elementSize,n=t==="x"?i.width/i.height:i.height/i.width;return e*n},_getProportionalDelta:function(t){var{x:e,y:i}=t,n=this._proportionate("y",e);if(n>=i)return{x:e,y:n};var o=this._proportionate("x",i);return o>=e?{x:o,y:i}:{x:0,y:0}},_getDirectionName:function(t){var e=this._movingSides;return t==="x"?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea:function(t,e){var i,n=this._getDirectionName(t);return Math.min(e,(i=this["_".concat(n,"MaxOffset")])!==null&&i!==void 0?i:1/0)},_fitDeltaProportionally:function(t){var e=re({},t),i=this._elementSize,{minWidth:n,minHeight:o,maxWidth:s,maxHeight:a}=this.option(),r=()=>i.width+e.x,h=()=>i.height+e.y,d=z=>e[z]===this._fitIntoArea(z,e[z]),c=()=>Pt(r(),n,s)&&d("x"),u=()=>Pt(h(),o,a)&&d("y");if(!c()){var p=this._fitIntoArea("x",R(r(),n,s)-i.width);e={x:p,y:this._proportionate("y",p)}}if(!u()){var b=this._fitIntoArea("y",R(h(),o,a)-i.height);e={x:this._proportionate("x",b),y:b}}return c()&&u()?e:{x:0,y:0}},_fitDelta:function(t){var{x:e,y:i}=t,n=this._elementSize,{minWidth:o,minHeight:s,maxWidth:a,maxHeight:r}=this.option();return{x:R(n.width+e,o,a)-n.width,y:R(n.height+i,s,r)-n.height}},_getDeltaByOffset:function(t){var e=this._movingSides,i=this._isCornerHandler(e)&&this.option("keepAspectRatio"),n={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(i){var o=this._getProportionalDelta(n),s=this._fitDeltaProportionally(o);n=s}else{var a=this._fitDelta(n),r=this._roundByStep(a);n=r}return n},_updatePosition:function(t,e){var{width:i,height:n}=e,o=this._elementLocation,s=this._movingSides,a=this.$element(),r=this._getElementSize(),h=t.y*(s.top?-1:1)-((r.height||n)-n),d=t.x*(s.left?-1:1)-((r.width||i)-i);k(a,{top:o.top+(s.top?h:0),left:o.left+(s.left?d:0)})},_dragHandler:function(t){var e=this._getOffset(t),i=this._getDeltaByOffset(e),n=this._updateDimensions(i);this._updatePosition(i,n),this._triggerResizeAction(t,n)},_updateDimensions:function(t){var e=d=>d.substring(d.length-2)==="px",i=this.option("stepPrecision")==="strict",n=this._elementSize,o=n.width+t.x,s=n.height+t.y,a=this.$element().get(0).style,r=t.x||i||e(a.width),h=t.y||i||e(a.height);return r&&this.option({width:o}),h&&this.option({height:s}),{width:r?o:n.width,height:h?s:n.height}},_triggerResizeAction:function(t,e){var{width:i,height:n}=e;this._resizeAction({event:t,width:this.option("width")||i,height:this.option("height")||n,handles:this._movingSides}),M(this.$element())},_isCornerHandler:t=>Object.values(t).reduce((e,i)=>e^i,0)===0,_getOffset:function(t){var e=t.offset,i=this._movingSides;return!i.left&&!i.right&&(e.x=0),!i.top&&!i.bottom&&(e.y=0),e},_roundByStep:function(t){return this.option("stepPrecision")==="strict"?this._roundStrict(t):this._roundNotStrict(t)},_getSteps:function(){return $e(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict:function(t){var e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict:function(t){var e=this._movingSides,i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},n=this._getSteps(),o=this._elementLocation,s=this._elementSize,a=e.left?o.left:o.left+s.width,r=e.top?o.top:o.top+s.height,h=(a+i.x)%n.h,d=(r+i.y)%n.v,c=Math.sign||(w=>(w=+w,w===0||isNaN(w)?w:w>0?1:-1)),u=(w,lt)=>(1+.2*c(lt))%1*w,p=(w,lt)=>Math.abs(w)<.2*lt,b=i.x-h,z=i.y-d;h>u(n.h,i.x)&&(b+=n.h),d>u(n.v,i.y)&&(z+=n.v);var pe=(e.left||e.right)&&!p(i.x,n.h)?b:0,fe=(e.top||e.bottom)&&!p(i.y,n.v)?z:0;return{x:pe*(e.left?-1:1),y:fe*(e.top?-1:1)}},_getMovingSides:function(t){var e=l(t.target),i=e.hasClass(et+"-top-left"),n=e.hasClass(et+"-top-right"),o=e.hasClass(et+"-bottom-left"),s=e.hasClass(et+"-bottom-right");return{top:e.hasClass(pn)||i||n,left:e.hasClass(gn)||i||o,bottom:e.hasClass(fn)||o||s,right:e.hasClass(vn)||n||s}},_getArea:function(){var t=this.option("area");return It(t)&&(t=t.call(this)),ot(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset:function(){var t=this.option("area"),e=!It(t)&&!ot(t),i={scrollY:0,scrollX:0};if(e){var n=l(t)[0];Y(n)&&(i.scrollX=n.pageXOffset,i.scrollY=n.pageYOffset)}return i},_getAreaFromObject:function(t){var e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement:function(t){var e=l(t),i;return e.length&&(i={width:At(e),height:Lt(e),offset:_({top:0,left:0},Y(e[0])?{}:e.offset())},this._correctAreaGeometry(i,e)),i},_correctAreaGeometry:function(t,e){var i=e?this._getBorderWidth(e,"left"):0,n=e?this._getBorderWidth(e,"top"):0;t.offset.left+=i+this._getBorderWidth(this.$element(),"left"),t.offset.top+=n+this._getBorderWidth(this.$element(),"top"),t.width-=T(this.$element())-At(this.$element()),t.height-=m(this.$element())-Lt(this.$element())},_dragEndHandler:function(t){var e=this.$element();this._resizeEndAction({event:t,width:T(e),height:m(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth:function(t){this.option("width",R(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight:function(t){this.option("height",R(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged:function(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":L()&&this._renderWidth(T(this.$element()));break;case"minHeight":case"maxHeight":L()&&this._renderHeight(m(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean:function(){this.$element().find("."+tt).remove()},_useTemplates:function(){return!1}});st(rt,xt);const Jn=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));var Tn=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],bt=X();class wn extends Te{constructor(e){var{fullScreen:i,forceApplyBindings:n,dragOutsideBoundary:o,dragAndResizeArea:s,outsideDragFactor:a}=e,r=Ne(e,Tn);super(r),this._props=re({},this._props,{fullScreen:i,forceApplyBindings:n,dragOutsideBoundary:o,dragAndResizeArea:s,outsideDragFactor:a}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer()}set outsideDragFactor(e){this._props.outsideDragFactor=e}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._props.fullScreen)k(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,i;(e=(i=this._props).forceApplyBindings)===null||e===void 0||e.call(i),super.positionContent()}}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){if(this._props.dragOutsideBoundary)return l(bt);if(this._props.dragAndResizeArea)return l(this._props.dragAndResizeArea);var e=we().get(0)||this._props.container;return e?this._$markupContainer:l(bt)}_getVisualContainer(){return this._props.fullScreen?l(bt):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}var En={setOverflow:B,restoreOverflow:B},Bn=()=>{if(!L())return En;var t=X(),e=nt.getDocument().documentElement,i=nt.getBody(),n=S.real().platform==="ios",o={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null},s=()=>{var r=t.innerWidth-e.clientWidth;if(!(o.paddingRight||r<=0)){var h=t.getComputedStyle(i).getPropertyValue("padding-right"),d=parseInt(h,10);o.paddingRight=d,i.style.setProperty("padding-right","".concat(d+r,"px"))}},a=()=>{$(o.paddingRight)&&(o.paddingRight?i.style.setProperty("padding-right","".concat(o.paddingRight,"px")):i.style.removeProperty("padding-right"),o.paddingRight=null)};return{setOverflow:n?()=>{if(!($(o.position)||i.style.position==="fixed")){var{scrollY:r,scrollX:h}=t;o.position=i.style.position,o.top=i.style.top,o.left=i.style.left,i.style.setProperty("position","fixed"),i.style.setProperty("top","".concat(-r,"px")),i.style.setProperty("left","".concat(-h,"px"))}}:()=>{s(),!(o.overflow||i.style.overflow==="hidden")&&(o.overflow=i.style.overflow,o.overflowX=i.style.overflowX,o.overflowY=i.style.overflowY,i.style.setProperty("overflow","hidden"))},restoreOverflow:n?()=>{if($(o.position)){var r=-parseInt(i.style.top,10),h=-parseInt(i.style.left,10);["position","top","left"].forEach(d=>{o[d]?i.style.setProperty(d,o[d]):i.style.removeProperty(d)}),t.scrollTo(h,r),o.position=null}}:()=>{a(),["overflow","overflowX","overflowY"].forEach(r=>{if($(o[r])){var h=r.replace(/(X)|(Y)/,d=>"-".concat(d.toLowerCase()));o[r]?i.style.setProperty(h,o[r]):i.style.removeProperty(h),o[r]=null}})}}},xn=X(),Tt="dx-popup",Kt="dx-popup-wrapper",Dn="dx-popup-fullscreen",yn="dx-popup-fullscreen-width",An="dx-popup-normal",Ln="dx-popup-content",On="dx-popup-content-scrollable",Rn="dx-state-disabled",In="dx-popup-draggable",qt="dx-popup-title",Pn="dx-closebutton",Zt="dx-popup-bottom",$n="dx-has-close-button",kn="dx-template-wrapper",Hn="dx-popup-flex-height",zn="dx-popup-inherit-height",Nn="dx-toolbar-label",jt=["cancel","clear","done"],Mn="default",Wn="normal",Vn="text",Fn="contained",Gn=Ot.safari&&Ee(Ot.version,[11])<0,O={static:"",inherit:zn,flex:Hn},Un=t=>{var e=S.current(),i=e.platform,n="bottom",o="before";if(i==="ios")switch(t){case"cancel":n="top";break;case"clear":n="top",o="after";break;case"done":o="after"}else if(i==="android")switch(t){case"cancel":case"done":o="after"}return{toolbar:n,location:o}},Yn=Be.inherit({_supportedKeys:function(){return _(this.callBase(),{upArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveUp(t)},downArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveDown(t)},leftArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveLeft(t)},rightArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveRight(t)}})},_getDefaultOptions:function(){return _(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules:function(){var t=Qt();return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:function(e){return S.real().deviceType==="desktop"&&e.platform==="generic"},options:{dragEnabled:!0}},{device:function(){return S.real().deviceType==="desktop"&&!S.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return x(t)},options:{useDefaultToolbarButtons:!0,useFlatToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation:function(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init:function(){var t=this.option("_wrapperClassExternal"),e=t?"".concat(Kt," ").concat(t):Kt;this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass(Tt),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner(l("<div>").addClass(Ln)).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render:function(){var t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_createBodyOverflowManager:function(){this._bodyOverflowManager=Bn()},_toggleFullScreenClass:function(t){this.$overlayContent().toggleClass(Dn,t).toggleClass(An,!t)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new ht,bottom:new ht})},_getActionsList:function(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler:function(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions:function(){var t=this.option("animation");return["to","from"].some(e=>{var i,n=t==null||(i=t.show)===null||i===void 0?void 0:i[e];return se(n)&&("width"in n||"height"in n)})},_updateResizeCallbackSkipCondition(){var t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize:function(t){if(this.option("useResizeObserver")){var e=this._$content.get(0);t?$t.observe(e,i=>{this._contentResizeHandler(i)}):$t.unobserve(e)}},_areContentDimensionsRendered:function(t){var e,i,n,o=(e=t.contentBoxSize)===null||e===void 0?void 0:e[0];if(o){var s,a;return parseInt(o.inlineSize,10)===((s=this._renderedDimensions)===null||s===void 0?void 0:s.width)&&parseInt(o.blockSize,10)===((a=this._renderedDimensions)===null||a===void 0?void 0:a.height)}var r=t.contentRect;return parseInt(r.width,10)===((i=this._renderedDimensions)===null||i===void 0?void 0:i.width)&&parseInt(r.height,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl:function(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle:function(){var t=this._getToolbarItems("top"),{title:e,showTitle:i}=this.option();if(i&&e&&t.unshift({location:S.current().ios?"center":"before",text:e}),i||t.length>0){this._$title&&this._$title.remove();var n=l("<div>").addClass(qt).insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,n).addClass(qt),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass($n,this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var t,{title:e,showTitle:i}=this.option(),n=i&&!!e,o=n?new ae:null;(t=this._$title)===null||t===void 0||t.find(".".concat(Nn)).eq(0).attr("id",o),this.$overlayContent().attr("aria-labelledby",o)},_renderTemplateByType:function(t,e,i,n){var{rtlEnabled:o,useDefaultToolbarButtons:s,useFlatToolbarButtons:a,disabled:r}=this.option(),h=this._getTemplateByOption(t),d=h instanceof ht;if(d){var c=_({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),u=_(n,{items:e,rtlEnabled:o,useDefaultButtons:s,useFlatButtons:a,disabled:r,integrationOptions:c});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:u}});var p=i.children("div");return i.replaceWith(p),p}else{var b=l(h.render({container:I(i)}));return b.hasClass(kn)&&(i.replaceWith(b),i=b),i}},_getToolbarName:function(){return"dxToolbarBase"},_renderVisibilityAnimate:function(t){return this.callBase(t)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction:function(t){this._getTitleRenderAction()({titleElement:I(t)})},_getTitleRenderAction:function(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction:function(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton:function(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer:function(){return(t,e,i)=>{var n=l("<div>").addClass(Pn);this._createComponent(n,wt,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),l(i).append(n)}},_getToolbarItems:function(t){var e=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];var n=S.current().platform,o=0;return g(e,(s,a)=>{var r=$(a.shortcut),h=r?Un(a.shortcut):a;if(r&&n==="ios"&&o<2&&(h.toolbar="top",o++),h.toolbar=a.toolbar||h.toolbar||"top",h&&h.toolbar===t){r&&_(h,{location:a.location},this._getToolbarItemByAlias(a));var d=n==="generic";a.shortcut==="done"&&d||a.shortcut==="cancel"&&!d?i.unshift(h):i.push(h)}}),t==="top"&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>t.toLowerCase()==="done"?"OK":ke(t,!0),_getToolbarItemByAlias:function(t){var e=this,i=t.shortcut;if(!jt.includes(i))return!1;var n=_({text:E.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:e.option("useDefaultToolbarButtons")?Mn:Wn,stylingMode:e.option("useFlatToolbarButtons")?Vn:Fn},t.options||{}),o=Tt+"-"+i;return this._toolbarItemClasses.push(o),{template:function(s,a,r){var h=l("<div>").addClass(o).appendTo(r);e._createComponent(h,wt,n)}}},_createToolbarItemAction:function(t){return this._createAction(t,{afterExecute:function(e){e.component.hide()}})},_renderBottom:function(){var t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();var e=l("<div>").addClass(Zt).insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass(Zt),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState:function(t){this.callBase(...arguments),this.$content().toggleClass(Rn,!!t)},_toggleClasses:function(){var t=jt;g(t,(e,i)=>{var n=Tt+"-"+i;this._toolbarItemClasses.includes(n)?(this.$wrapper().addClass(n+"-visible"),this._$bottom.addClass(n)):(this.$wrapper().removeClass(n+"-visible"),this._$bottom.removeClass(n))})},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!xe(this._zIndex)){var i=De(this._zIndexInitValue());ye(this._zIndex),this._zIndex=i,this._$wrapper.css("zIndex",i),this._$content.css("zIndex",i)}},_toggleContentScrollClass(){var t=!this.option("preventScrollEvents");this.$content().toggleClass(On,t)},_getPositionControllerConfig(){var{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:o}=this.option();return _({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:o})},_initPositionController(){this._positionController=new wn(this._getPositionControllerConfig())},_getDragTarget:function(){return this.topToolbar()},_renderGeometry:function(t){var{visible:e,useResizeObserver:i}=this.option();if(e&&L()){var n=this._showAnimationProcessing,o=n&&!(t!=null&&t.forceStopAnimation)&&i;this._isAnimationPaused=o||void 0,this._stopAnimation(),t!=null&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(t==null?void 0:t.isDimensionChange),o&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions:function(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(D(this._$content),10),height:parseInt(v(this._$content),10)})},_renderGeometryImpl:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;t||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight:function(){var t=this._getOptionValue("height");t==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag:function(){var t=this._getDragTarget(),e=this.option("dragEnabled");if(t){var i={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new cn(i),this.$overlayContent().toggleClass(In,e)}},_renderResize:function(){this._resizable=this._createComponent(this._$content,xt,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler:function(t){var e=this._resizable.option("width"),i=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight:function(){(this.option("forceApplyBindings")||B)();var t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:function(t,e){return t===O.flex?-e:0},_chooseHeightStrategy:function(t){var e=t.style.width==="auto"||t.style.width==="",i=O.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(e||Gn?i=O.inherit:i=O.flex),i},_getHeightCssStyles:function(t,e){var i={},n=this._getOptionValue("maxHeight",e),o=this._getOptionValue("minHeight",e),s=this._splitPopupHeight(),a=s.header+s.footer+s.contentVerticalOffsets+s.popupVerticalOffsets+this._heightStrategyChangeOffset(t,s.popupVerticalPaddings);if(t===O.static){if(!this._isAutoHeight()||n||o){var r=this.option("fullScreen")?Math.min(W(e).height,X().innerHeight):W(e).height,h=r-a;i={height:Math.max(0,h),minHeight:"auto",maxHeight:"auto"}}}else{var d=l(this._positionController.$visualContainer).get(0),c=Ae(n,-a,d),u=Le(o,-a,d);i={height:"auto",minHeight:u,maxHeight:c}}return i},_setHeightClasses:function(t,e){var i="";for(var n in O)O[n]!==e&&(i+=" "+O[n]);t.removeClass(i).addClass(e)},_isAutoHeight:function(){return this.$overlayContent().get(0).style.height==="auto"},_splitPopupHeight:function(){var t=this.topToolbar(),e=this.bottomToolbar();return{header:Rt(t&&t.get(0)),footer:Rt(e&&e.get(0)),contentVerticalOffsets:dt(this.$overlayContent().get(0),!0),popupVerticalOffsets:dt(this.$content().get(0),!0),popupVerticalPaddings:dt(this.$content().get(0),!1)}},_isAllWindowCovered:function(){return this.callBase()||this.option("fullScreen")},_renderDimensions:function(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),L()&&this._renderFullscreenWidthClass()},_dimensionChanged:function(){this._renderGeometry({isDimensionChange:!0})},_clean:function(){this.callBase(),this._observeContentResize(!1)},_dispose:function(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass:function(){this.$overlayContent().toggleClass(yn,T(this.$overlayContent())===D(xn))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll:function(t){if(this._bodyOverflowManager){var{setOverflow:e,restoreOverflow:i}=this._bodyOverflowManager;t?i():e()}},refreshPosition:function(){this._renderPosition()},_optionChanged:function(t){var e,{value:i,name:n}=t;switch(n){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this._toggleBodyScroll(i);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),M(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),M(this.$overlayContent());break;case"container":if(this.callBase(t),this.option("resizeEnabled")){var o;(o=this._resizable)===null||o===void 0||o.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":this.callBase(t),(e=this._resizable)===null||e===void 0||e.option(n,i);break;case"onTitleRendered":this._createTitleRenderAction(i);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":var s=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),s&&(this._renderGeometry(),M(this.$overlayContent()));break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),M(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=i,this._toggleFullScreenClass(i),this._toggleSafariScrolling(),this._renderGeometry(),M(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(t),this._toggleContentScrollClass();break;default:this.callBase(t)}},bottomToolbar:function(){return this._$bottom},topToolbar:function(){return this._$title},$content:function(){return this._$popupContent},content:function(){return I(this.$content())},$overlayContent:function(){return this._$content}});st("dxPopup",Yn);export{Ui as C,Xi as D,hn as L,Yn as P,xt as R,ue as S,li as T,ce as a,_e as b,Et as c,je as d,Jn as r,Ki as t};
