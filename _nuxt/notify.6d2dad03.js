import{x as L,e as T,d as I,p as D,_ as M,M as P,$ as f,r as F,g as H,aE as W}from"./index.94f86987.js";import{T as v,a1 as m,a8 as w}from"./entry.f47474d7.js";var $=H(),N=L.add,k="dx-toast",c=k+"-",R=c+"wrapper",j=c+"content",G=c+"message",z=c+"icon",U="dxToast",V=["info","warning","error","success"],C=[],X=8e3,K={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},Y={h:0,v:0};N(function(){T.subscribeGlobal(I.getDocument(),D.down,function(e){for(var t=C.length-1;t>=0;t--)if(!C[t]._proxiedDocumentDownHandler(e))return})});var x=M.inherit({_getDefaultOptions:function(){return v(this.callBase(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"android"},options:{hideOnOutsideClick:!0,width:"auto",animation:{show:{type:"slide",duration:200,from:{position:{my:"top",at:"bottom",of:$}}},hide:{type:"slide",duration:200,to:{position:{my:"top",at:"bottom",of:$}}}}}},{device:function(e){var t=e.deviceType==="phone",o=e.platform==="android";return t&&o},options:{width:"100vw",position:{at:"bottom center",my:"bottom center",offset:"0 0"}}},{device:function(e){return e.deviceType==="phone"},options:{width:"100vw"}},{device:function(){return P()},options:{minWidth:344,maxWidth:568,displayTime:4e3}}])},_init:function(){this.callBase(),this._posStringToObject()},_renderContentImpl:function(){this._message=f("<div>").addClass(G).text(this.option("message")).appendTo(this.$content()),this.setAria("role","alert",this._message),V.includes(this.option("type").toLowerCase())&&this.$content().prepend(f("<div>").addClass(z)),this.callBase()},_render:function(){this.callBase(),this.$element().addClass(k),this.$wrapper().addClass(R),this.$content().addClass(c+String(this.option("type")).toLowerCase()),this.$content().addClass(j),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")},_toggleCloseEvents:function(e){var t="dx"+e.toLowerCase();T.off(this.$content(),t),this.option("closeOn"+e)&&T.on(this.$content(),t,this.hide.bind(this))},_posStringToObject:function(){if(m(this.option("position"))){var e=this.option("position").split(" ")[0],t=this.option("position").split(" ")[1];switch(this.option("position",v({boundaryOffset:Y},K[e])),t){case"center":case"left":case"right":this.option("position").at+=" "+t,this.option("position").my+=" "+t}}},_show:function(){return this.callBase.apply(this,arguments).always((function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hide.bind(this),this.option("displayTime"))}).bind(this))},_overlayStack:function(){return C},_zIndexInitValue:function(){return this.callBase()+X},_dispose:function(){clearTimeout(this._hideTimeout),this.callBase()},_optionChanged:function(e){switch(e.name){case"type":this.$content().removeClass(c+e.previousValue),this.$content().addClass(c+String(e.value).toLowerCase());break;case"message":this._message&&this._message.text(e.value);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:this.callBase(e)}}});F(U,x);var O=H(),E=null,B={};function at(e,t,o){var i=w(e)?e:{message:e},n=w(t)?t:void 0,s=w(t)?void 0:t,{onHidden:r}=i;if(n!=null&&n.position){var{position:a}=n,u=n.direction||Z(a),p=m(a)?a:"".concat(a.top,"-").concat(a.left,"-").concat(a.bottom,"-").concat(a.right),{onShowing:d}=i,h=J(p);Q(h,u),v(i,{container:h,onShowing:function(l){tt(h,u,a),d==null||d(l)}})}v(i,{type:s,displayTime:o,onHidden:function(l){f(l.element).remove(),r==null||r(l)}}),E=f("<div>").appendTo(W()),new x(E,i).show()}var Z=e=>m(e)&&e.includes("top")?"down-push":"up-push",q=e=>{var t=f("<div>").appendTo(W());return B[e]=t,t},J=e=>{var t=B[e];return t||q(e)},Q=(e,t)=>{var o="dx-toast-stack dx-toast-stack-".concat(t,"-direction");e.removeAttr("class").addClass(o)},tt=(e,t,o)=>{var{offsetWidth:i,offsetHeight:n}=e.children().first().get(0),s={toastWidth:i,toastHeight:n,windowHeight:O.innerHeight,windowWidth:O.innerWidth},r=m(o)?et(o,s):o,a=ot(t,r,s);e.css(a)},et=(e,t)=>{var{toastWidth:o,toastHeight:i,windowHeight:n,windowWidth:s}=t;switch(e){case"top left":return{top:10,left:10};case"top right":return{top:10,right:10};case"bottom left":return{bottom:10,left:10};case"bottom right":return{bottom:10,right:10};case"top center":return{top:10,left:Math.round(s/2-o/2)};case"left center":return{top:Math.round(n/2-i/2),left:10};case"right center":return{top:Math.round(n/2-i/2),right:10};case"center":return{top:Math.round(n/2-i/2),left:Math.round(s/2-o/2)};case"bottom center":default:return{bottom:10,left:Math.round(s/2-o/2)}}},ot=(e,t,o)=>{var i,n,s,r,a,u,p,d,h,l,g,_,{toastWidth:b,toastHeight:S,windowHeight:y,windowWidth:A}=o;switch(e.replace(/-push|-stack/g,"")){case"up":return{bottom:(i=t.bottom)!==null&&i!==void 0?i:y-S-t.top,top:"",left:(n=t.left)!==null&&n!==void 0?n:"",right:(s=t.right)!==null&&s!==void 0?s:""};case"down":return{top:(r=t.top)!==null&&r!==void 0?r:y-S-t.bottom,bottom:"",left:(a=t.left)!==null&&a!==void 0?a:"",right:(u=t.right)!==null&&u!==void 0?u:""};case"left":return{right:(p=t.right)!==null&&p!==void 0?p:A-b-t.left,left:"",top:(d=t.top)!==null&&d!==void 0?d:"",bottom:(h=t.bottom)!==null&&h!==void 0?h:""};case"right":return{left:(l=t.left)!==null&&l!==void 0?l:A-b-t.right,right:"",top:(g=t.top)!==null&&g!==void 0?g:"",bottom:(_=t.bottom)!==null&&_!==void 0?_:""}}};export{x as T,at as n};
