import{_ as x}from"./section-title.vue.a6fe2dde.js";import{b as y,d as b,u as h,a as P,r as _,o as D,c as S,e as o,w as i,f as l,A as $,g as t,j as V,t as q}from"./entry.d8c3daa0.js";import{f as B,D as c,a as m,c as f,d as k,e as C}from"./form.d85877c6.js";import{u as R}from"./toast.d4c6a9e4.js";import{u as N}from"./useMutation.0937a1e9.js";import{_ as T}from"./_plugin-vue_export-helper.c27b6911.js";import"./_commonjsHelpers.23102255.js";import"./ui.form.675e7539.js";import"./index.ab648286.js";import"./text_box.67135b71.js";import"./resize_observer.57c96ed3.js";import"./ui.popup.28c204f7.js";import"./ui.collection_widget.edit.f359a828.js";import"./load_panel.57c43a65.js";import"./check_box.j.46b9e12f.js";import"./ui.list.edit.decorator.selection.2d64423b.js";import"./notify.edf537cb.js";async function j(e){const d=y(),{data:n}=await d.client.put("auth/password-update",e);return n}var s=(e=>(e.title="pages.settings.security.title",e.subtitle="pages.settings.security.subtitle",e.field_old_password="pages.settings.security.field_old_password",e.field_new_password="pages.settings.security.field_new_password",e.validation_required_field="pages.settings.security.validation_required_field",e.action_update="pages.settings.security.action_update",e.toast_password_updated="pages.settings.security.toast_password_updated",e))(s||{});const A={class:"flex-1 bg-background-content flex justify-center border border-divider rounded-md shadow-lg"},E={class:"grid p-4 w-full max-w-5xl gap-8 items-center lg:flex"},F=b({__name:"security",setup(e){const d=R(),{t:n}=h();P({title:n(s.title)});const a=_({oldPassword:"",newPassword:""}),p=_(null),{mutate:w}=N({mutationFn:j});function g(){w({currentPassword:a.value.oldPassword,newPassword:a.value.newPassword},{onSuccess:()=>{a.value.oldPassword="",a.value.newPassword="",p.value.instance.resetValues(),d.show(s.toast_password_updated)},onError:d.error})}return(r,G)=>{const v=x;return D(),S("div",null,[o(v,null,{default:i(()=>[V(q(r.$t(t(s).title)),1)]),_:1}),l("div",A,[l("div",E,[l("form",{class:"flex-1",onSubmit:$(g,["prevent"])},[o(t(C),{id:"form-security",ref_key:"formRef",ref:p,"label-location":"top","form-data":t(a)},{default:i(()=>[o(t(B),{caption:r.$t(t(s).subtitle),"col-count":1},{default:i(()=>[o(t(c),{"data-field":"oldPassword","editor-options":{mode:"password",onValueChanged:u=>t(a).oldPassword=u.value}},{default:i(()=>[o(t(m),{text:r.$t(t(s).field_old_password)},null,8,["text"]),o(t(f),{message:r.$t(t(s).validation_required_field)},null,8,["message"])]),_:1},8,["editor-options"]),o(t(c),{"data-field":"newPassword","editor-options":{mode:"password",onValueChanged:u=>t(a).newPassword=u.value}},{default:i(()=>[o(t(m),{text:r.$t(t(s).field_new_password)},null,8,["text"]),o(t(f),{message:r.$t(t(s).validation_required_field)},null,8,["message"])]),_:1},8,["editor-options"])]),_:1},8,["caption"]),o(t(k),{"button-options":{text:t(n)(t(s).action_update),useSubmitBehavior:!0}},null,8,["button-options"])]),_:1},8,["form-data"])],32)])])])}}});const st=T(F,[["__scopeId","data-v-233d8d29"]]);export{st as default};
