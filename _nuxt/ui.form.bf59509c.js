import{ad as Jn,a9 as M,Z as g,a1 as N,Y as be,aa as X,a2 as $a,a0 as p,az as ut,bG as er,bH as tr,aF as E,ax as re,bI as it,T as c,W as $,ai as x,aQ as ir,aH as k,bJ as ce,$ as K,bK as ar,U as D,ay as Q,bB as Ha,aB as Wt,bt as de,aN as Di,aD as nr,as as Fe,a5 as yi,ac as rr,ab as sr,bL as or,aC as C,ak as ii,a7 as dt,a6 as Pe,a8 as $e,bC as lr,bM as ur,bN as dr,a3 as zt,aJ as hr,af as cr,ae as ai,aM as _r,bv as Wa,aq as pr,ar as fr}from"./entry.f47474d7.js";import{a as b,W as pe,$ as u,p as _e,e as v,aA as vr,d as se,i as q,ad as at,u as T,a3 as ne,b0 as Gt,r as V,t as F,V as za,aq as mr,aX as Si,a1 as j,T as ze,N as Ga,C as Ie,K as ye,J as Ua,Y as bi,aj as gr,L as Ne,g as Te,D as ni,b1 as Cr,M as ht,aa as ri,H as Dr,P as z,m as oe,l as yr,ak as Sr,o as Ya,b2 as si,b3 as bt,b4 as br,b5 as Ir,an as Tr,a9 as Er,b6 as xr,a6 as Ka,b as wr,aH as Ar,b7 as qa,ap as Br,ae as ja,aR as Vr,S as Or}from"./index.94f86987.js";import{b as Za,d as Mr,T as Lr,E as ct}from"./text_box.08b8e7e6.js";import{B as Se,g as Xa,a as Rr,V as w,r as It}from"./resize_observer.3c2fa9a2.js";import{P as kr,D as Fr,a as Nr,b as Pr,c as $r,C as Qa,d as Hr}from"./ui.popup.81669a77.js";import{k as Ut,D as Wr,b as zr,A as Gr,q as Ur,w as Ii,y as Yr,z as Tt,i as oi,u as li,c as ui,B as Ja}from"./ui.collection_widget.edit.95cdfece.js";import"./check_box.j.64bc2370.js";import{L as en}from"./ui.list.edit.decorator.selection.f35f8c9c.js";var Kr={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function _t(e){return Kr[e]}var He=7,Ti=4,Ei=7,xi=52,Re=["millisecond","second","minute","hour","day","week","month","quarter","year"],qr=function(e,t,i){var a=t.getTime()-e.getTime(),n=_t(i)||1;return Math.floor(a/n)},jr=function(e,t){var i=pt(e);switch(i){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return t?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},tn=function(e){var t,i,a,n=["millisecond","second","minute","hour","day","month","year"],r={};for(t=n.length-1;t>=0;t--)a=n[t],i=Math.floor(e/_t(a)),i>0&&(r[a+"s"]=i,e-=rt(a,i));return r},Zr=function(e){var t=0;return M(e)&&g(e,function(i,a){t+=rt(i.substr(0,i.length-1),a)}),N(e)&&(t=rt(e,1)),t};function rt(e,t){return _t(e)*t}function pt(e){var t=-1,i;return N(e)?e:M(e)?(g(e,function(a,n){for(i=0;i<Re.length;i++)n&&(a===Re[i]+"s"||a===Re[i])&&t<i&&(t=i)}),Re[t]):""}var Xr={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"};function Qr(e){return Xr[pt(e)]||""}var an=function(e){return Math.floor(e/3)},nn=function(e){return 3*an(e)};function rn(e,t,i,a){e=new Date(e.getTime());var n=new Date(e.getTime()),r,s,o=pt(t);switch(o){case"second":e=new Date(1e3*Math.floor(n.getTime()/1e3));break;case"minute":e=new Date(6e4*Math.floor(n.getTime()/6e4));break;case"hour":e=new Date(36e5*Math.floor(n.getTime()/36e5));break;case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0,0,0,0);break;case"week":e=hn(e,a||0),e.setHours(0,0,0,0);break;case"quarter":r=nn(e.getMonth()),s=e.getMonth(),e.setDate(1),e.setHours(0,0,0,0),s!==r&&e.setMonth(r)}return i&&o!=="hour"&&o!=="minute"&&o!=="second"&&pn(n,e),e}function sn(e){return rn(e,"day")}var Jr=function(e){var t=sn(e);return t.setDate(t.getDate()+1),new Date(t.getTime()-1)},es=function(e,t){var i=0,a={year:e.getFullYear()!==t.getFullYear(),month:e.getMonth()!==t.getMonth(),day:e.getDate()!==t.getDate(),hour:e.getHours()!==t.getHours(),minute:e.getMinutes()!==t.getMinutes(),second:e.getSeconds()!==t.getSeconds(),millisecond:e.getMilliseconds()!==t.getMilliseconds()};return g(a,function(n,r){r&&i++}),i===0&&fn(e,t)!==0&&(a.hour=!0,i++),a.count=i,a};function on(e,t,i){var a=new Date(e.getTime()),n=N(t)?un(t.toLowerCase()):be(t)?tn(t):t;return n.years&&a.setFullYear(a.getFullYear()+n.years*i),n.quarters&&a.setMonth(a.getMonth()+3*n.quarters*i),n.months&&a.setMonth(a.getMonth()+n.months*i),n.weeks&&a.setDate(a.getDate()+7*n.weeks*i),n.days&&a.setDate(a.getDate()+n.days*i),n.hours&&a.setTime(a.getTime()+36e5*n.hours*i),n.minutes&&a.setTime(a.getTime()+6e4*n.minutes*i),n.seconds&&a.setTime(a.getTime()+1e3*n.seconds*i),n.milliseconds&&a.setTime(a.getTime()+n.milliseconds*i),a}var ln=function(e,t,i){var a=i?-1:1;return X(e)?on(e,t,a):$a(e+t*a,t)},ts=function(e,t,i){var a=[],n;for(a.push(X(e)?new Date(e.getTime()):e),n=e;n<t;)n=ln(n,i),a.push(n);return a},is=function(e,t){if(e==="month")return G(t.getFullYear(),t.getMonth(),1);if(e==="year")return G(t.getFullYear(),0,t.getDate());if(e==="decade")return G(Ue(t),t.getMonth(),t.getDate());if(e==="century")return G(Ge(t),t.getMonth(),t.getDate())},as=function(e,t){if(e==="month")return G(t.getFullYear(),t.getMonth(),st(t));if(e==="year")return G(t.getFullYear(),11,t.getDate());if(e==="decade")return G(Ue(t)+9,t.getMonth(),t.getDate());if(e==="century")return G(Ge(t)+90,t.getMonth(),t.getDate())},ns=function(e,t){var i=G(t.getFullYear(),t.getMonth(),1);return e==="month"||(i.setMonth(0),e==="year")||(e==="decade"&&i.setFullYear(Ue(t)),e==="century"&&i.setFullYear(Ge(t))),i},rs=function(e,t){var i=new Date(t);return i.setDate(st(t)),e==="month"||(i.setMonth(11),i.setDate(st(i)),e==="year")||(e==="decade"&&i.setFullYear(Ue(t)+9),e==="century"&&i.setFullYear(Ge(t)+99)),i};function st(e){var t=G(e.getFullYear(),e.getMonth()+1,0);return t.getDate()}var ss=function(e){switch(e){case"month":return"year";case"year":return"decade";case"decade":return"century"}},os=function(e){switch(e){case"century":return"decade";case"decade":return"year";case"year":return"month"}},ls=function(e){var t=1;return e==="year"&&(t=12),e==="decade"&&(t=120),e==="century"&&(t=1200),t},us=function(e){var t=1;return e==="decade"&&(t=12),e==="century"&&(t=120),t};function un(e){var t={};switch(e){case"year":t.years=1;break;case"month":t.months=1;break;case"quarter":t.months=3;break;case"week":t.weeks=1;break;case"day":t.days=1;break;case"hour":t.hours=1;break;case"minute":t.minutes=1;break;case"second":t.seconds=1;break;case"millisecond":t.milliseconds=1}return t}function ds(e,t){return Yt(e,t)&&e.getDate()===t.getDate()}function Yt(e,t){return dn(e,t)&&e.getMonth()===t.getMonth()}function dn(e,t){return e&&t&&e.getFullYear()===t.getFullYear()}function hs(e,t){return e&&t&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()}var cs=function(e,t){if(!(!p(e)||!p(t))){var i=e.getFullYear()-e.getFullYear()%10,a=t.getFullYear()-t.getFullYear()%10;return e&&t&&i===a}},_s=function(e,t){if(!(!p(e)||!p(t))){var i=e.getFullYear()-e.getFullYear()%100,a=t.getFullYear()-t.getFullYear()%100;return e&&t&&i===a}};function Ge(e){return e&&e.getFullYear()-e.getFullYear()%100}function Ue(e){return e&&e.getFullYear()-e.getFullYear()%10}var ps=function(){return"yyyy/MM/dd"},fs=function(e){if(p(e))return G(e.getFullYear(),e.getMonth(),1)},vs=function(e){if(p(e))return G(e.getFullYear(),e.getMonth()+1,0)};function hn(e,t){var i=(e.getDay()-t+He)%He,a=new Date(e);return a.setDate(e.getDate()-i),a}function wi(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function ms(e){var t=wi(e)-wi(cn(e.getFullYear()));return 1+Math.floor(t/_t("day"))}function cn(e){return new Date(e,0,1)}function Et(e){return new Date(e,11,31)}function Ai(e,t){var i=e.getDay()-t+1;return i<=0&&(i+=He),i}function Kt(e,t,i){var a=Ai(cn(e.getFullYear()),t),n=Ai(Et(e.getFullYear()),t),r=He-a+1,s=Math.ceil((ms(e)-r)/7);switch(i){case"fullWeek":if(r===He&&s++,s===0){var o=Et(e.getFullYear()-1);return Kt(o,t,i)}return s;case"firstDay":r>0&&s++;var l=a===Ei||n===Ei;return(s>xi&&!l||s===54)&&(s=1),s;case"firstFourDays":r>3&&s++;var d=a===Ti||n===Ti;if(s>xi&&!d&&(s=1),s===0){var h=Et(e.getFullYear()-1);return Kt(h,t,i)}return s}}var gs=function(e,t){var i=f.getDatesInterval(e,t,"day"),a=new Date(e);return i>=6&&(a=new Date(a.setDate(a.getDate()+7))),a},Cs=function(e,t,i,a){return a==="date"&&(t=t&&f.correctDateWithUnitBeginning(t,"day"),i=i&&f.correctDateWithUnitBeginning(i,"day"),e=e&&f.correctDateWithUnitBeginning(e,"day")),_n(e,t,i)===e},Ds=function(e){var{firstMin:t,firstMax:i,secondMin:a,secondMax:n}=e;return t<=a&&a<=i||t>a&&t<n||t<n&&i>n},ys=function(e){var t=Math.floor(e),i=e%1*60;return{hours:t,minutes:i}},Ss=function(e,t){var i=this.dateTimeFromDecimal(t),a=new Date(e);return(e.getHours()===i.hours&&e.getMinutes()<i.minutes||e.getHours()<i.hours)&&a.setHours(i.hours,i.minutes,0,0),a};function _n(e,t,i){var a=e;return p(e)?(p(t)&&e<t&&(a=t),p(i)&&e>i&&(a=i),a):e}function pn(e,t){if(p(e)){var i=t.getHours()-e.getHours();if(i!==0){var a=i===1||i===-23?-1:1,n=new Date(t.getTime()+36e5*a);(a>0||n.getDate()===t.getDate())&&t.setTime(n.getTime())}}}var bs=function(e){var t=new Date(e.getTime());return t.setHours(t.getHours()+1),t.setMinutes(0),t};function fn(e,t){return 60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3}var Is=function(e){return new Date(e)},Ts=function(e,t,i){for(var a=[],n=new Date(e.getTime());n<t;)a.push(new Date(n.getTime())),n=this.addInterval(n,i);return a},G=function(e){var t=new Date(...arguments);return t.setFullYear(e),t},Es=()=>{var e=typeof Intl<"u";return e?Intl.DateTimeFormat().resolvedOptions().timeZone:null},f={dateUnitIntervals:Re,convertMillisecondsToDateUnits:tn,dateToMilliseconds:Zr,getNextDateUnit:jr,convertDateUnitToMilliseconds:rt,getDateUnitInterval:pt,getDateFormatByTickInterval:Qr,getDatesDifferences:es,correctDateWithUnitBeginning:rn,trimTime:sn,setToDayEnd:Jr,roundDateByStartDayHour:Ss,dateTimeFromDecimal:ys,addDateInterval:on,addInterval:ln,getSequenceByInterval:ts,getDateIntervalByString:un,sameHoursAndMinutes:hs,sameDate:ds,sameMonthAndYear:Yt,sameMonth:Yt,sameYear:dn,sameDecade:cs,sameCentury:_s,getDifferenceInMonth:ls,getDifferenceInMonthForCells:us,getFirstYearInDecade:Ue,getFirstDecadeInCentury:Ge,getShortDateFormat:ps,getViewFirstCellDate:is,getViewLastCellDate:as,getViewDown:os,getViewUp:ss,getLastMonthDay:st,getLastMonthDate:vs,getFirstMonthDate:fs,getFirstWeekDate:hn,getWeekNumber:Kt,normalizeDateByWeek:gs,getQuarter:an,getFirstQuarterMonth:nn,dateInRange:Cs,intervalsOverlap:Ds,roundToHour:bs,normalizeDate:_n,getViewMinBoundaryDate:ns,getViewMaxBoundaryDate:rs,fixTimezoneGap:pn,getTimezonesDifference:fn,makeDate:Is,getDatesInterval:qr,getDatesOfInterval:Ts,createDateWithFullYear:G,getMachineTimezoneName:Es};f.sameView=function(e,t,i){return f[Jn("same "+e)](t,i)};var vn="number",mn="yyyy/MM/dd",xs="yyyy/MM/dd HH:mm:ss",gn=/^(\d{4,})(-)?(\d{2})(-)?(\d{2})(?:T(\d{2})(:)?(\d{2})?(:)?(\d{2}(?:\.(\d{1,3})\d*)?)?)?(Z|([+-])(\d{2})(:)?(\d{2})?)?$/,Cn=/^(\d{2}):(\d{2})(:(\d{2}))?$/,Bi=["","yyyy","","MM","","dd","THH","","mm","","ss",".SSS"],ws=/^(\d{4})\/(\d{2})\/(\d{2})$/,As=3,Dn=function(e,t){var i;return N(e)&&!t&&(i=Vs(e)),i||Bs(e)};function R(e){return+e||0}function Bs(e){var t=yn(e)===mn,i=!X(e)&&Date.parse(e);if(!i&&t){var a=e.match(ws);if(a){var n=new Date(R(a[1]),R(a[2]),R(a[3]));return n.setFullYear(R(a[1])),n.setMonth(R(a[2])-1),n.setDate(R(a[3])),n}}return be(i)?new Date(i):e}function Vs(e){var t=e.match(gn);if(!t)return t=e.match(Cn),t?new Date(0,0,0,R(t[1]),R(t[2]),R(t[4])):void 0;var i=R(t[1]),a=--t[3],n=t[5],r=0,s=0,o=m=>(i<100&&m.setFullYear(i),m);r=R(t[14]),s=R(t[16]),t[13]==="-"&&(r=-r,s=-s);var l=R(t[6])-r,d=R(t[8])-s,h=R(t[10]),_=function(m){return m=m||"",R(m)*Math.pow(10,As-m.length)}(t[11]);return t[12]?o(new Date(Date.UTC(i,a,n,l,d,h,_))):o(new Date(i,a,n,l,d,h,_))}var Os=function(e,t){var i=e.match(gn),a="";if(!i)return i=e.match(Cn),i?i[3]?"HH:mm:ss":"HH:mm":void 0;for(var n=1;n<Bi.length;n++)i[n]&&(a+=Bi[n]||i[n]);return i[12]==="Z"&&(a+="'Z'"),i[14]&&(i[15]?a+="xxx":i[16]?a+="xx":a+="x"),a},Ms=function(e){return typeof e=="number"?new Date(e):Dn(e,!ut().forceIsoDateParsing)},Ls=function(e,t){return t?X(e)?t===vn?e&&e.valueOf?e.valueOf():null:er(t,tr)(e):null:e},yn=function(e){if(typeof e=="number")return vn;if(N(e)){var t;return ut().forceIsoDateParsing&&(t=Os(e)),t||(e.indexOf(":")>=0?xs:mn)}else if(e)return null};const B={dateParser:Dn,deserializeDate:Ms,serializeDate:Ls,getDateSerializationFormat:yn};var nt=function(e){for(var t=0,i=0,a=0;a<e.length;++a)if(e[a]==="'"&&t++,e[a]==="."&&(++i,t%2===0))return{occurrence:i,index:a};return{occurrence:1,index:-1}},qt=function(e,t,i){for(var a=-1;i--&&a++<e.length;)a=e.indexOf(t,a);return a},jt=function(e,t){return t===-1?[e]:[e.slice(0,t),e.slice(t+1)]},Rs=function(e,t){return e&&$a(e/100,t)},ot=function(e,t){if(typeof t=="string"){var i=t.split(";"),a=E.getSign(e,t);i[1]=i[1]||"-"+i[0],t=i[a<0?1:0],t=(s=t,s.replace(/'([^']*)'/g,o=>o.split("").map(()=>" ").join("").substr(2)));var n=/^[^#0.,]*/.exec(t)[0].length,r=/[^#0.,]*$/.exec(t)[0].length;return{start:n,end:e.length-r}}else return{start:0,end:e.length};var s},Vi=function(e,t){var i=E.getDecimalSeparator(),a=new RegExp("[^0-9"+it(i)+"]","g"),n=t.slice(0,e);return n.replace(a,"").length},Oi=function(e){return e.split("").reverse().join("")},Mi=function(e,t){if(!e)return-1;for(var i=/[0-9]/g,a=1,n=null,r=i.exec(t);r;){if(n=r.index,a>=e)return n;a++,r=i.exec(t)}return n===null?t.length:n},ks=function(e){return e.replace(/[^0-9e]+$/,"")},he=function(e,t){return e.start===void 0&&(e={start:e,end:e}),{start:e.start+t,end:e.end+t}},Fs=function(e,t,i,a){i=he(i,0);var n=E.getDecimalSeparator(),r=Ns(e),s=nt(a).occurrence,o=r?0:qt(e,n,s),l=qt(t,n,s),d=jt(e,o),h=jt(t,l),_=o!==-1&&i.start>o;if(_){var m=i.start-o-1,S=Vi(m,d[1]),A=h[1]?l+1+Mi(S,h[1])+1:t.length;return ae(A,t,a)}else{var I=ks(h[0]),ee=d[0].length-i.start,Ee=Vi(ee,Oi(d[0])),le=Mi(Ee,Oi(I)),xe=I.length-(le+1);return ae(xe,t,a)}};function Ns(e){return e.length===1&&!!e.match(/^[,.][0-9]*$/g)}var Ps=function(e,t,i){e=he(e,0);var a=ae(e,t,i);return e.start>=a.start&&e.end<=a.end};function ae(e,t,i){e=he(e,0);var a=ot(t,i),n={start:re(e.start,a.start,a.end),end:re(e.end,a.start,a.end)};return n}var $s=function(e,t,i){var a=ot(e,i),n=ot(t,i);return n.start-a.start},Hs="dx-numberbox-spin",Ws="dx-numberbox-spin-button",zs=100,Sn="dxNumberBox",Li=b(_e.up,Sn),Ri=b(_e.cancel,Sn),ve=pe.inherit({_getDefaultOptions:function(){return c(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();var e=Hs+"-"+this.option("direction");this.$element().addClass(Ws).addClass(e),this._spinIcon=u("<div>").addClass(e+"-icon").appendTo(this.$element())},_render:function(){this.callBase();var e=b(_e.down,this.NAME),t=this.$element();v.off(t,e),v.on(t,e,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(e){e.preventDefault(),this._clearTimer(),v.on(this.$element(),Ut.name,(function(){this._feedBackDeferred=new $,vr(this._feedBackDeferred),this._spinChangeHandler({event:e}),this._holdTimer=setInterval(this._spinChangeHandler,zs,{event:e})}).bind(this));var t=se.getDocument();v.on(t,Li,this._clearTimer.bind(this)),v.on(t,Ri,this._clearTimer.bind(this)),this._spinChangeHandler({event:e})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){v.off(this.$element(),Ut.name);var e=se.getDocument();v.off(e,Li),v.off(e,Ri),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(e){switch(e.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(e)}}}),Gs="dx-numberbox-spin",Us="dx-numberbox-spin-container",Ys="dx-numberbox-spin-touch-friendly";class Ks extends Za{_attachEvents(t,i){var{editor:a}=this,n=b(_e.down,a.NAME),r=i.children(),s=a._createAction(o=>a._spinButtonsPointerDownHandler(o));v.off(i,n),v.on(i,n,o=>s({event:o})),ve.getInstance(r.eq(0)).option("onChange",o=>a._spinUpChangeHandler(o)),ve.getInstance(r.eq(1)).option("onChange",o=>a._spinDownChangeHandler(o))}_create(){var{editor:t}=this,i=u("<div>").addClass(Us),a=u("<div>").appendTo(i),n=u("<div>").appendTo(i),r=this._getOptions();return this._addToContainer(i),t._createComponent(a,ve,c({direction:"up"},r)),t._createComponent(n,ve,c({direction:"down"},r)),this._legacyRender(t.$element(),this._isTouchFriendly(),r.visible),{instance:i,$element:i}}_getOptions(){var{editor:t}=this,i=this._isVisible(),a=t.option("disabled");return{visible:i,disabled:a}}_isVisible(){var{editor:t}=this;return super._isVisible()&&t.option("showSpinButtons")}_isTouchFriendly(){var{editor:t}=this;return t.option("showSpinButtons")&&t.option("useLargeSpinButtons")}_legacyRender(t,i,a){t.toggleClass(Ys,i),t.toggleClass(Gs,a)}update(){var t=super.update();if(t){var{editor:i,instance:a}=this,n=i.$element(),r=this._isVisible(),s=this._isTouchFriendly(),o=a.children(),l=ve.getInstance(o.eq(0)),d=ve.getInstance(o.eq(1)),h=this._getOptions();l.option(h),d.option(h),this._legacyRender(n,s,r)}}}var qs=Math,js="dx-numberbox",Zs=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],Xs="NumberBoxForceValueChange",Qs=Mr.inherit({_supportedKeys:function(){return c(this.callBase(),{upArrow:function(e){q(e)||(e.preventDefault(),e.stopPropagation(),this._spinUpChangeHandler(e))},downArrow:function(e){q(e)||(e.preventDefault(),e.stopPropagation(),this._spinDownChangeHandler(e))},enter:function(){}})},_getDefaultOptions:function(){return c(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:x.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:Ks}])},_isSupportInputMode:function(){var e=parseFloat(at.version);return at.chrome&&e>=66||at.safari&&e>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return T.real().generic&&!T.isSimulator()},options:{useLargeSpinButtons:!1}},{device:(function(){return T.real().deviceType!=="desktop"&&!this._isSupportInputMode()}).bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass(js),this.callBase()},_getDefaultAttributes:function(){var e=this.callBase();return e.inputmode="decimal",e},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=u("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(e){this._getSubmitElement().val(ir(e))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(e){this.callBase(e);var t=Gt(e),i=/[\d.,eE\-+]/.test(t);if(!i){var a=ne(e);return q(e)||a&&Zs.includes(a)?void 0:(e.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel:function(e){e.delta>0?this._spinValueChange(1,e):this._spinValueChange(-1,e)},_renderValue:function(){var e=this._input().val(),t=this.option("value");(!e.length||Number(e)!==t)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());var i=p(t)?null:x.format("dxNumberBox-noDataText");return this.setAria({valuenow:k(t,""),valuetext:i}),this.option("text",this._input().val()),this._updateButtons(),new $().resolve()},_forceValueRender:function(){var e=this.option("value"),t=Number(e),i=isNaN(t)?"":this._applyDisplayValueFormatter(e);this._renderDisplayText(i)},_applyDisplayValueFormatter:function(e){return this.option("displayValueFormatter")(e)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:k(this.option("min"),""),valuemax:k(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){var e=this._input();!this.option("useLargeSpinButtons")&&se.getActiveElement()!==e[0]&&v.trigger(e,"focus")},_spinUpChangeHandler:function(e){this.option("readOnly")||this._spinValueChange(1,e.event||e)},_spinDownChangeHandler:function(e){this.option("readOnly")||this._spinValueChange(-1,e.event||e)},_spinValueChange:function(e,t){var i=parseFloat(this.option("step"));if(i!==0){var a=parseFloat(this._normalizeInputValue())||0;a=this._correctRounding(a,i*e);var n=this.option("min"),r=this.option("max");p(n)&&(a=Math.max(n,a)),p(r)&&(a=Math.min(r,a)),this._saveValueChangeEvent(t),this.option("value",a)}},_correctRounding:function(e,t){var i=/[,.](.*)/,a=i.test(e),n=i.test(t);if(a||n){var r=a?i.exec(e)[0].length:0,s=n?i.exec(t)[0].length:0,o=qs.max(r,s);return e=this._round(e+t,o),e}return e+t},_round:function(e,t){t=t||0;var i=Math.pow(10,t);return e*=i,e=Math.round(e)/i,e},_renderValueChangeEvent:function(){this.callBase();var e=b("focusout",Xs);v.off(this.element(),e),v.on(this.element(),e,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if(this.option("mode")!=="number"){var e=this._input(),t=this._applyDisplayValueFormatter(this.option("value"));e.val(null),e.val(t)}},_valueChangeEventHandler:function(e){var t=this._input(),i=this._normalizeText(),a=this._parseValue(i),n=i!=="."&&i!=="-";if(this._isValueValid()&&!this._validateValue(a)){t.val(this._applyDisplayValueFormatter(a));return}n&&this.callBase(e,isNaN(a)?null:a),this._applyValueBoundaries(i,a),this.validationRequest.fire({value:a,editor:this})},_applyValueBoundaries:function(e,t){var i=this._isValueIncomplete(e),a=this._isValueInRange(e);!i&&!a&&t!==null&&Number(e)!==t&&this._input().val(this._applyDisplayValueFormatter(t))},_replaceCommaWithPoint:function(e){return e.replace(",",".")},_inputIsInvalid:function(){var e=this.option("mode")==="number",t=this._input().get(0).validity;return e&&t&&t.badInput},_renderDisplayText:function(e){this._inputIsInvalid()||this.callBase(e)},_isValueIncomplete:function(e){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(e)},_isValueInRange:function(e){return ce(e,this.option("min"),this.option("max"))},_isNumber:function(e){return this._parseValue(e)!==null},_validateValue:function(e){var t=this._normalizeText(),i=this._isValueValid(),a=!0,n=this._isNumber(t);return isNaN(Number(e))&&(a=!1),!e&&i?a=!0:!n&&!i&&(a=!1),this.option({isValid:a,validationError:a?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),a},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){var e=this._input().val().trim();return this._replaceCommaWithPoint(e)},_parseValue:function(e){var t=parseFloat(e);return isNaN(t)?null:re(t,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},reset:function(){this.option("value")===null?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(e){switch(e.name){case"value":this._validateValue(e.value),this._setSubmitValue(e.value),this.callBase(e),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(e)}}}),xt="dxNumberFormatter",je=1,wt=-1,ki="-",Ve="minus",Js="input",Fi=0,Zt=Qs.inherit({_getDefaultOptions:function(){return c(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(e){return e==="del"},_supportedKeys:function(){return this._useMaskBehavior()?c(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,wt),rightArrow:this._arrowHandler.bind(this,je),home:this._moveCaretToBoundaryEventHandler.bind(this,je),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,wt)}):this.callBase()},_getTextSeparatorIndex:function(e){var t=E.getDecimalSeparator(),i=nt(this.option("format")).occurrence;return qt(e,t,i)},_focusInHandler:function(e){this._preventNestedFocusEvent(e)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout((function(){this._caretTimeout=void 0;var t=this._caret();if(t.start===t.end&&this._useMaskBehavior()){var i=this._getInputVal(),a=this._getTextSeparatorIndex(i);a>=0?this._caret({start:a,end:a}):this._moveCaretToBoundaryEventHandler(wt,e)}}).bind(this),Fi)),this.callBase(e)},_focusOutHandler:function(e){var t=!this._preventNestedFocusEvent(e);t&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(e),t&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(e){var t=this._getFormatPattern(),i=this.option("value"),a=this._format(i,t)||"";return a!==e},_updateFormattedValue:function(){var e=this._getInputVal();this._hasValueBeenChanged(e)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&v.trigger(this._input(),"change"))},_arrowHandler:function(e,t){if(this._useMaskBehavior()){var i=this._getInputVal(),a=this._getFormatPattern(),n=he(this._caret(),e);Ps(n,i,a)||(n=e===je?n.end:n.start,t.preventDefault(),this._caret(ae(n,i,a)))}},_moveCaretToBoundary:function(e){var t=ot(this._getInputVal(),this._getFormatPattern()),i=he(e===je?t.start:t.end,0);this._caret(i)},_moveCaretToBoundaryEventHandler:function(e,t){!this._useMaskBehavior()||t&&t.shiftKey||(this._moveCaretToBoundary(e),t&&t.preventDefault())},_shouldMoveCaret:function(e,t){var i=E.getDecimalSeparator(),a=e.charAt(t.end)===i,n=(this._lastKey===i||this._lastKey==="."||this._lastKey===",")&&a;return n},_getInputVal:function(){return E.convertDigits(this._input().val(),!0)},_keyboardHandler:function(e){if(this.clearCaretTimeout(),this._lastKey=E.convertDigits(Gt(e),!0),this._lastKeyName=ne(e),!this._shouldHandleKey(e.originalEvent))return this.callBase(e);var t=this._getInputVal(),i=this._caret(),a=this._lastKeyName===Ve?"":this._lastKey,n=this._tryParse(t,i,a);return this._shouldMoveCaret(t,i)&&(this._moveCaret(1),e.originalEvent.preventDefault()),n===void 0?this._lastKeyName!==Ve&&e.originalEvent.preventDefault():this._parsedValue=n,this.callBase(e)},_keyPressHandler:function(e){this._useMaskBehavior()||this.callBase(e)},_removeHandler:function(e){var t=this._caret(),i=this._getInputVal(),a=t.start,n=t.end;this._lastKey=Gt(e),this._lastKeyName=ne(e);var r=this._isDeleteKey(this._lastKeyName),s=!r;if(a===n){var o=a,l=s&&o>0||r&&o<i.length;if(l)r&&n++,s&&a--;else{e.preventDefault();return}}var d=i.slice(a,n);if(this._isStub(d)){if(this._moveCaret(r?1:-1),this._parsedValue<0||1/this._parsedValue===-1/0){this._revertSign(e),this._setTextByParsedValue();var h=this.option("valueChangeEvent").split(" ").includes("input");h&&v.trigger(this._input(),"input")}e.preventDefault();return}var _=E.getDecimalSeparator();if(d===_){var m=i.indexOf(_);this._isNonStubAfter(m+1)&&(this._moveCaret(r?1:-1),e.preventDefault());return}if(n-a<i.length){var S=this._replaceSelectedText(i,{start:a,end:n},""),A=S.search(/[0-9]/)<0;if(A&&this._isValueInRange(0)){this._parsedValue=this._parsedValue<0||1/this._parsedValue===-1/0?-0:0;return}}var I=this._tryParse(i,{start:a,end:n},"");I===void 0?e.preventDefault():this._parsedValue=I},_isPercentFormat:function(){var e=this._getFormatPattern(),t=e.replace(/'[^']+'/g,"");return t.indexOf("%")!==-1},_parse:function(e,t){var i=this.option("format"),a=K(i.parser),n=a?i.parser:E.parse,r=0;if(!a){var s=nt(t).index,o=this._getTextSeparatorIndex(e),l=s!==-1?s:t.length,d=o!==-1?o:e.length;d>l&&t.indexOf("#")===-1&&(r=d-l)}return e=e.substr(r),n(e,t)},_format:function(e,t){var i=this.option("format"),a=(i==null?void 0:i.formatter)||i,n=K(a)?a:E.format,r=e===null?"":n(e,t);return r},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){var e=this.option("format"),t=K(e==null?void 0:e.parser),i=N(e)&&(e.indexOf("0")>=0||e.indexOf("#")>=0),a=e==="exponential"||(e==null?void 0:e.type)==="exponential",n=t||i||a;this._currentFormat=n?e:ar(r=>{var s=this._format(r,e);return E.convertDigits(s,!0)})},_getFormatForSign:function(e){var t=this._getFormatPattern();if(N(t)){var i=t.split(";"),a=E.getSign(e,t);return i[1]=i[1]||"-"+i[0],a<0?i[1]:i[0]}else{var n=E.getSign(e);return n<0?"-":""}},_removeStubs:function(e,t){var i=this._getFormatForSign(e),a=E.getThousandsSeparator(),n=this._getStubs(i),r=e;if(n.length){var s=n[0],o=new RegExp("("+it(n[1]||"")+")$","g"),l=new RegExp("[-"+it(t?"":a)+"]","g");r=r.replace(s,"").replace(o,"").replace(l,"")}return r},_getStubs:function(e){var t=/[^']([#0.,]+)/g.exec(e),i=t&&t[0].trim();return e.split(i).map(function(a){return a.replace(/'/g,"")})},_truncateToPrecision:function(e,t){if(p(e)){var i=e.toString(),a=i.indexOf(".");if(i&&a>-1){var n=parseFloat(i.substr(0,a+t+1));return isNaN(n)?e:n}}return e},_tryParse:function(e,t,i){var a=this._replaceSelectedText(e,t,i),n=this._getFormatPattern(),r=t.start!==t.end,s=this._getParsedValue(a,n),o=!n.parser&&this._getPrecisionLimits(a).max,l=s!==this._parsedValue,d=E.getDecimalSeparator(),h=i===d&&o===0,_=!r&&!l&&i!==ki&&!this._isValueIncomplete(a)&&this._isStub(i);if(!(h||_)&&(this._removeStubs(a)===""&&(s=Math.abs(0*this._parsedValue)),!isNaN(s))){var m=s===null?this._parsedValue:s;return s=o?this._truncateToPrecision(m,o):s,!n.parser&&this._isPercentFormat()?Rs(s,o):s}},_getParsedValue:function(e,t){var i=E.getSign(e,(t==null?void 0:t.formatter)||t),a=this._removeStubs(e,!0),n=this._parse(a,t),r=n<0?-1:1,s=be(n)&&i!==r?i*n:n;return s},_isValueIncomplete:function(e){if(!this._useMaskBehavior())return this.callBase(e);var t=this._caret(),i=E.getDecimalSeparator(),a=this._getTextSeparatorIndex(e),n=a>=0&&a<t.start,r=this._removeStubs(e,!0).split(i);if(!n||r.length!==2)return!1;var s=r[1].length,o=this._getFormatPattern(),l=!!o.parser,d=!l&&this._getPrecisionLimits(this._getFormatPattern(),e),h=l?!0:ce(s,d.min,d.max),_=r[1].charAt(s-1)==="0";return h&&(_||!s)},_isValueInRange:function(e){var t=k(this.option("min"),-1/0),i=k(this.option("max"),1/0);return ce(e,t,i)},_setInputText:function(e){var t=E.convertDigits(e,!0),i=Fs(this._getInputVal(),t,this._caret(),this._getFormatPattern());this._input().val(e),this._toggleEmptinessEventHandler(),this._formattedValue=e,this._focusOutOccurs||this._caret(i)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){var e=this.option("mode")==="number",t=T.real().deviceType==="desktop";this._useMaskBehavior()&&e?this._setInputType(t||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(e){return N(e)&&e.length===1},_moveCaret:function(e){if(e){var t=he(this._caret(),e),i=ae(t,this._getInputVal(),this._getFormatPattern());this._caret(i)}},_shouldHandleKey:function(e){var t=ne(e),i=q(e)||e.altKey||e.shiftKey||!this._isChar(t),a=t===Ve,n=this._useMaskBehavior();return n&&!i&&!a},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){v.off(this._input(),"."+xt)},_isInputFromPaste:function(e){var t=e.originalEvent&&e.originalEvent.inputType;return p(t)?t==="insertFromPaste":this._isValuePasted},_attachFormatterEvents:function(){var e=this._input();v.on(e,b(Js,xt),(function(t){this._formatValue(t),this._isValuePasted=!1}).bind(this)),v.on(e,b("dxclick",xt),(function(){this._caretTimeout||(this._caretTimeout=setTimeout((function(){this._caretTimeout=void 0,this._caret(ae(this._caret(),this._getInputVal(),this._getFormatPattern()))}).bind(this),Fi))}).bind(this)),v.on(e,"dxdblclick",(function(){this.clearCaretTimeout()}).bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(e){var t=this._getInputVal().slice(e);return t&&!this._isStub(t,!0)},_isStub:function(e,t){var i=it(E.getDecimalSeparator()),a="^[^0-9"+i+"]+$",n=new RegExp(a,"g");return n.test(e)&&(t||this._isChar(e))},_parseValue:function(e){return this._useMaskBehavior()?this._parsedValue:this.callBase(e)},_getPrecisionLimits:function(e){var t=this._getFormatForSign(e),i=nt(t).index,a=(jt(t,i)[1]||"").replace(/[^#0]/g,""),n=a.replace(/^(0*)#*/,"$1").length,r=a.length;return{min:n,max:r}},_revertSign:function(e){if(this._useMaskBehavior()){var t=this._caret();if(t.start!==t.end)if(ne(e)===Ve){this._applyRevertedSign(e,t,!0);return}else this._caret(ae(0,this._getInputVal(),this._getFormatPattern()));this._applyRevertedSign(e,t)}},_applyRevertedSign:function(e,t,i){var a=-1*k(this._parsedValue,null);if((this._isValueInRange(a)||a===0)&&(this._parsedValue=a,i)){var n=this._getFormatPattern(),r=this._getInputVal();this._setTextByParsedValue(),e.preventDefault();var s=this._getInputVal(),o=$s(r,s,n);t=he(t,o);var l=ae(t,s,n);this._caret(l)}},_removeMinusFromText:function(e,t){var i=this._lastKeyName===Ve&&e.charAt(t.start-1)===ki;return i?this._replaceSelectedText(e,{start:t.start-1,end:t.start},""):e},_setTextByParsedValue:function(){var e=this._getFormatPattern(),t=this._parseValue(),i=this._format(t,e)||"";this._setInputText(i)},_formatValue:function(e){var t=this._getInputVal(),i=this._caret(),a=this._removeMinusFromText(t,i),n=a!==t;if(t=a,!this._isInputFromPaste(e)&&this._isValueIncomplete(a)){this._formattedValue=t,n&&this._setTextByParsedValue();return}var r=E.convertDigits(this._formattedValue,!0)!==t;if(r){var s=this._tryParse(t,i,"");p(s)&&(this._parsedValue=s)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){var e=this._getInputVal();this._parsedValue=this._tryParse(e,this._caret())},_adjustParsedValue:function(){if(this._useMaskBehavior()){var e=this._removeStubs(this._getInputVal()),t=e?this._parseValue():null;if(!be(t)){this._parsedValue=t;return}this._parsedValue=re(t,this.option("min"),this.option("max"))}},_valueChangeEventHandler:function(e){if(!this._useMaskBehavior())return this.callBase(e);var t=this._caret();this._saveValueChangeEvent(e),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),t&&this._caret(t)},_optionChanged:function(e){switch(e.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(e);break;default:this.callBase(e)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}});V("dxNumberBox",Zt);var eo="dx-dropdowneditor-button",to="dx-dropdowneditor-button-visible",io="dxDropDownEditor-selectLabel";class ao extends Za{constructor(t,i,a){super(t,i,a),this.currentTemplate=null}_attachEvents(t){var{editor:i}=this;t.option("onClick",a=>{var n;if((n=i._shouldCallOpenHandler)!==null&&n!==void 0&&n.call(i)){i._openHandler(a);return}!i.option("openOnFieldClick")&&i._openHandler(a)}),v.on(t.$element(),"mousedown",a=>{i.$element().is(".dx-state-focused")&&a.preventDefault()})}_create(){var{editor:t}=this,i=u("<div>"),a=this._getOptions();this._addToContainer(i);var n=t._createComponent(i,Se,c({},a,{elementAttr:{"aria-label":x.format(io)}}));return this._legacyRender(t.$element(),i,a.visible),{$element:i,instance:n}}_getOptions(){var{editor:t}=this,i=this._isVisible(),a=t.option("readOnly"),n={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:a,visible:i};return this._addTemplate(n),n}_isVisible(){var{editor:t}=this;return super._isVisible()&&t.option("showDropDownButton")}_legacyRender(t,i,a){t.toggleClass(to,a),i&&i.removeClass("dx-button").addClass(eo)}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(t){this._isSameTemplate()||(t.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){var t=super.update();if(t){var{editor:i,instance:a}=this,n=i.$element(),r=this._getOptions();a==null||a.option(r),this._legacyRender(n,a==null?void 0:a.$element(),r.visible)}}}var Ni=function(e){if(F())return za(e)},bn=function(e){return e===null&&(e=void 0),typeof e=="function"&&(e=e()),e},no="dx-dropdowneditor",Pi="dx-dropdowneditor-input-wrapper",ro="dx-dropdowneditor-icon",Ze="dx-dropdowneditor-overlay",so="dx-dropdowneditor-overlay-flipped",oo="dx-dropdowneditor-active",lo="dx-dropdowneditor-field-clickable",uo="dx-dropdowneditor-field-template-wrapper",$i=T.current().platform==="ios",di=Lr.inherit({_supportedKeys:function(){return c({},this.callBase(),{tab:function(e){if(this.option("opened")){if(this.option("applyValueMode")==="instantly"){this.close();return}var t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&(v.trigger(t,"focus"),t.select()),e.preventDefault()}},escape:function(e){return this.option("opened")&&e.preventDefault(),this.close(),!0},upArrow:function(e){return!q(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this.close(),!1):!0},downArrow:function(e){return!q(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this._validatedOpening(),!1):!0},enter:function(e){return this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:ao}])},_getDefaultOptions:function(){return c(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:x.format("OK"),cancelButtonText:x.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(e){var t=mr(e);return{offset:{h:0,v:-1},my:t+" top",at:t+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){var t=e.platform==="generic";return t},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+Pi).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(e){var{my:t,at:i}=this._getDefaultPopupPosition(e),a=this.option("popupPosition");this.option("popupPosition",c({},a,{my:t,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass(no),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner(u("<div>").addClass(Pi)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())},_renderPlaceholder:function(){var e=!!this._getFieldTemplate();e||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue();var e=this.callBase();e.always(this._renderField.bind(this))},_renderTemplatedField:function(e,t){var i=Si(this._input()),a=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),a.empty();var n=u("<div>").addClass(uo).appendTo(a);e.render({model:t,container:j(n),onRendered:()=>{var r=!!this.$element().find(n).length;if(r){var s=this._input();if(!s.length)throw ze.Error("E1010");this._integrateInput(),i&&v.trigger(s,"focus")}}}),this._attachWrapperContent(a)},_detachWrapperContent(){var e,t,i,a=this.option("useHiddenSubmitElement");a&&((e=this._$submitElement)===null||e===void 0||e.detach());var n=(t=this._$beforeButtonsContainer)===null||t===void 0?void 0:t[0].parentNode,r=(i=this._$afterButtonsContainer)===null||i===void 0?void 0:i[0].parentNode;n==null||n.removeChild(this._$beforeButtonsContainer[0]),r==null||r.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(e){var t,i=this.option("useHiddenSubmitElement");e.prepend(this._$beforeButtonsContainer),i&&((t=this._$submitElement)===null||t===void 0||t.appendTo(e)),e.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){v.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new Ga(function(e){var t=u("<div>").addClass(ro);u(e.container).append(t)})}),this.callBase()},_renderOpenHandler:function(){var e=this._inputWrapper(),t=b(Ie,this.NAME),i=this.option("openOnFieldClick");v.off(e,t),v.on(e,t,this._getInputClickHandler(i)),this.$element().toggleClass(lo,i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){$i&&(this._detachFocusOutEvents(),v.on(this._inputWrapper(),b("focusout",this.NAME),e=>{var t=e.relatedTarget;if(t&&this.option("opened")){var i=this._isTargetOutOfComponent(t);i&&this.close()}}))},_isTargetOutOfComponent:function(e){var t=this.content?u(this.content()).closest(".".concat(Ze)):this._$popup,i=u(e).closest(".".concat(Ze),t).length===0;return i},_detachFocusOutEvents:function(){$i&&v.off(this._inputWrapper(),b("focusout",this.NAME))},_getInputClickHandler:function(e){return e?t=>{this._executeOpenAction(t)}:t=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(e){this._openOnFieldClickAction({event:e})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!Si(this._input())&&(this._resetCaretPosition(),v.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this._input().get(0);if(t){var{value:i}=t,a=p(i)&&(e||this._isEditable())?i.length:0;this._caret({start:a,end:a},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(e){this._focusInput()&&(this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass(oo,e),this._setPopupOption("visible",e);var t={expanded:e,controls:this._getControlsAria()};this.setAria(t),this.setAria("owns",e?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=u("<div>").addClass(Ze).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:D,_renderPopup:function(){var e=c(this._popupConfig(),this._options.cache("dropDownOptions"));delete e.closeOnOutsideClick,e.elementAttr&&!Object.keys(e.elementAttr).length&&delete e.elementAttr,this._popup=this._createComponent(this._$popup,kr,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId(e){this._popupContentId="dx-"+new Q,this.setAria("id",this._popupContentId,e)},_contentReadyHandler:D,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:c(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Ni(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_wrapperClassExternal:Ze,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?e=>{this._popupInitializedAction({popup:e.component})}:null},_dimensionChanged:function(){if(F()&&!this.$element().is(":visible")){this.close();return}this._updatePopupWidth()},_updatePopupWidth:function(){var e=bn(this.option("dropDownOptions.width"));e===void 0&&this._setPopupOption("width",()=>Ni(this.$element()))},_popupPositionedHandler:function(e){var t,i,{labelMode:a,stylingMode:n}=this.option();if(this._popup){var r=this._popup.$overlayContent(),s=(t=e.position)===null||t===void 0||(i=t.v)===null||i===void 0?void 0:i.flip,o=a!=="hidden"&&n==="outlined";if(e.position&&r.toggleClass(so,s),s&&o&&this._label.isVisible()){var l=this._label.$element();ye(r,{top:Ua(r).top-parseInt(l.css("fontSize"))})}}},_popupShowingHandler:D,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var e;this._openAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var e;this._closeAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var e=this.option("validationMessagePosition");if(e!=="auto")return e;var t="bottom";if(this._popup&&this._popup.option("visible")){var{top:i}=bi.setup(this.$element()),{top:a}=bi.setup(this._popup.$content());t=i+this.option("popupPosition").offset.v>a?"bottom":"top"}return t},_closeOutsideDropDownHandler:function(e){var{target:t}=e,i=u(t),a=this.getButton("dropDown"),n=a&&a.$element(),r=!!i.closest(this.$element()).length,s=!!i.closest(n).length,o=!r&&!s;return o},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(e,t){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return this.option("applyValueMode")==="useButtons"?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(e){var t=u(e.currentTarget);(e.shiftKey&&t.is(this._getFirstPopupElement())||!e.shiftKey&&t.is(this._getLastPopupElement()))&&(v.trigger(this._input(),"focus"),e.preventDefault())},_popupElementEscHandler:function(){v.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(e){e.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),e.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(e)},_applyButtonsLocation:function(e){var t=this.option("buttonsLocation"),i=e;if(t!=="default"){var a=Ha(t);g(i,function(n,r){c(r,{toolbar:a[0],location:a[1]})})}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(e){var t=pe.getOptionsFromContainer(e);this._setPopupOption(t);var i=Object.keys(t);(i.indexOf("width")!==-1||i.indexOf("height")!==-1)&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=u("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(e){var t;switch(e.name){case"width":case"height":this.callBase(e),(t=this._popup)===null||t===void 0||t.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":p(e.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":F()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(e.value),this.callBase(e);break;default:this.callBase(e)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return j(this._input())},content:function(){return this._popup?this._popup.content():null}});V("dxDropDownEditor",di);var Hi=c({},Wr,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new zr({store:new Gr(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=Wt(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=Wt(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(e){var t=new $;return e=this._unwrappedValue(e),p(e)?(this._loadSingle(this._valueGetterExpr(),e).done((function(i){this._isValueEquals(this._valueGetter(i),e)?t.resolve(i):t.reject()}).bind(this)).fail(function(){t.reject()}),this._loadValueDeferred=t,t.promise()):t.reject().promise()},_rejectValueLoading:function(){var e;(e=this._loadValueDeferred)===null||e===void 0||e.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(e){var t;return e=(t=e)!==null&&t!==void 0?t:this._getCurrentValue(),e&&this._dataSource&&this._valueGetterExpr()==="this"&&(e=this._getItemKey(e)),de.unwrap(e)},_getItemKey:function(e){var t=this._dataSource.key();if(Array.isArray(t)){for(var i={},a=0,n=t.length;a<n;a++)i[t[a]]=e[t[a]];return i}return t&&typeof e=="object"&&(e=e[t]),e},_isValueEquals:function(e,t){var i=this._dataSource&&this._dataSource.key(),a=this._compareValues(e,t);return!a&&i&&p(e)&&p(t)&&(Array.isArray(i)?a=this._compareByCompositeKey(e,t,i):a=this._compareByKey(e,t,i)),a},_compareByCompositeKey:function(e,t,i){var a=M;if(!a(e)||!a(t))return!1;for(var n=0,r=i.length;n<r;n++)if(e[i[n]]!==t[i[n]])return!1;return!0},_compareByKey:function(e,t,i){var a=de.unwrap,n=k(a(e[i]),e),r=k(a(t[i]),t);return this._compareValues(n,r)},_compareValues:function(e,t){return Di(e,!0)===Di(t,!0)},_initDynamicTemplates:D,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var e=this.option("valueExpr"),t=N(e)&&e!=="this"||K(e);return t?e:null},_dataExpressionOptionChanged:function(e){switch(e.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),Wi=Te(),ho=".dx-list-item",co="dxListItemData",_o="dx-dropdownlist-popup-wrapper",po="input",fo=["startswith","contains","endwith","notcontains"],zi=T.real().platform!=="android",In=di.inherit({_supportedKeys:function(){var e=this.callBase();return c({},e,{tab:function(t){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(t);var i=u(this._list.option("focusedElement"));i.length&&this._setSelectedElement(i)}e.tab.apply(this,arguments)},space:D,home:D,end:D})},_allowSelectItemByTab:function(){return this.option("opened")&&this.option("applyValueMode")==="instantly"},_setSelectedElement:function(e){var t=this._valueGetter(this._list._getItemData(e));this._setValue(t)},_setValue:function(e){this.option("value",e)},_getDefaultOptions:function(){return c(this.callBase(),c(Hi._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:x.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:D,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),c(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var e=this.option().items;e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new gr("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(e){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(e,t,i){return e>i?t:e<t?i:e},_items:function(){var e=this._getPlainItems(!this._list&&this._dataSource.items()),t=new Ur(e).filter("disabled","<>",!0).toArray();return t},_calcNextItem:function(e){var t=this._items(),i=this._fitIntoRange(this._getSelectedIndex()+e,0,t.length-1);return t[i]},_getSelectedIndex:function(){var e=this._items(),t=this.option("selectedItem"),i=-1;return g(e,(function(a,n){if(this._isValueEquals(n,t))return i=a,!1}).bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var e=this._popup.$content();v.off(e,"mouseup"),v.on(e,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var e=this.option("dropDownOptions.container"),t=e&&u(e);if(t&&t.length&&!nr(t.get(0))){var i=[].slice.call(t.parents());i.unshift(t.get(0)),g(i,(function(a,n){if(n===u("body").get(0))return!1;if(Wi.getComputedStyle(n).overflowY==="hidden")return this._$customBoundaryContainer=u(n),!1}).bind(this))}},_popupWrapperClass:function(){return _o},_renderInputValue:function(){var e=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(e,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,e))},_loadInputValue:function(e,t){return this._loadItem(e).always(t)},_getItemFromPlain:function(e,t){var i,a;return t&&typeof e!="object"&&(t.itemByValue||(t.itemByValue={},i=this._getPlainItems(),i.forEach(function(n){t.itemByValue[this._valueGetter(n)]=n},this)),a=t.itemByValue[e]),a||(i=this._getPlainItems(),a=Fe(i,(function(n){return this._isValueEquals(this._valueGetter(n),e)}).bind(this))[0]),a},_loadItem:function(e,t){var i=this._getItemFromPlain(e,t);return i!==void 0?new $().resolve(i).promise():this._loadValue(e)},_getPlainItems:function(e){var t=[];e=e||this.option("items")||this._dataSource.items()||[];for(var i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},_updateActiveDescendant(){var e,t=this.option("opened"),i=(e=this._list)===null||e===void 0?void 0:e.getFocusedItemId(),a=u("#".concat(i)).length>0,n=t&&a&&i;this.setAria({activedescendant:n||null})},_setSelectedItem:function(e){var t=this._displayValue(e);this.option("selectedItem",k(e,null)),this.option("displayValue",t)},_displayValue:function(e){return this._displayGetter(e)},_refreshSelected:function(){var e={};this._listItemElements().each((function(t,i){var a=u(i),n=this._valueGetter(a.data(co)),r=this._isSelectedValue(n,e);r?this._list.selectItem(a):this._list.unselectItem(a)}).bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(e){return this._isValueEquals(e,this.option("value"))},_validateSearchMode:function(){var e=this.option("searchMode"),t=e.toLowerCase();if(!fo.includes(t))throw ze.Error("E1019",e)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail((function(){this._isCustomValueAllowed()||this._clearSelectedItem()}).bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(ho):u()},_popupConfig:function(){return c(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var e=this._canListHaveFocus();return this.callBase().concat([!e&&this._list])},_renderList:function(){this._listId="dx-"+new Q()._value;var e=u("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=e,this._list=this._createComponent(e,en,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var e=b("mousedown","dxDropDownList");v.off(this._$list,e),v.on(this._$list,e,t=>t.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){var e=!!this._list.option("dataSource");return e!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return T.real().deviceType==="desktop"},_listConfig:function(){var e={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?this.option("hoverStateEnabled"):!1,focusStateEnabled:this._isDesktopDevice()?this.option("focusStateEnabled"):!1};return this._canListHaveFocus()||(e.tabIndex=null),e},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(e,t){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(e){this._listItemClickHandler(e),this._itemClickAction(e)},_listItemClickHandler:D,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()},_canKeepDataSource:function(){var e=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!e&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return b(po,this.NAME+"Search")},_getCompositionStartEvent:function(){return b("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return b("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return b("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),v.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(v.on(this._input(),this._getSearchEvent(),e=>{this._searchHandler(e)}),zi&&(v.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),v.on(this._input(),this._getCompositionEndEvent(),e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){v.off(this._input(),this._getSearchEvent()),v.off(this._input(),this._getSetFocusPolicyEvent()),zi&&(v.off(this._input(),this._getCompositionStartEvent()),v.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(e){if(arguments.length)this._isTextComposition=e;else return this._isTextComposition},_searchHandler:function(e,t){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}var i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(t)},i)):this._searchDataSource(t)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(e)},_filterDataSource:function(e){this._clearSearchTimer();var t=this._dataController;t.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),t.searchOperation(this.option("searchMode")),t.searchValue(e),t.load().done(this._dataSourceFiltered.bind(this,e))},_clearFilter:function(){var e=this._dataController;e.searchValue()&&e.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!(this.option("readOnly")||!this._searchValue())){var e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler:function(e){this._dataController.pageIndex()===0?this.option().items=e:this.option().items=this.option().items.concat(e)},_hasItemsToShow:function(){var e=this._dataController,t=e.items()||[],i=t.length,a=this._needPassDataSourceToList();return!!(a&&i)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){var e=this._dataController,t=e.pageIndex(),i=p(this._pageIndex)&&t<=this._pageIndex||e.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=t,i},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){var e=this.$element(),t=this._$customBoundaryContainer,i=e.offset().top-(t?t.offset().top:0),a=Ne(Wi),n=t?Math.min(Ne(t),a):a,r=Math.max(i,n-i-Ne(e));return Math.min(.5*n,r)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var e=this.option("value"),t=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(t)},_shouldUseDisplayValue:function(e){return this.option("valueExpr")==="this"&&M(e)},_optionChanged:function(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),this.callBase(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:this.callBase(e)}}}).include(Hi,Fr);V("dxDropDownList",In);var vo=".dx-state-disabled",mo="dx-selectbox",go="dx-selectbox-popup",Co="dx-selectbox-container",Gi="dx-selectbox-popup-wrapper",hi=In.inherit({_supportedKeys:function(){var e=this,t=this.callBase(),i=function(n){var r=this._isEditable();r?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(n.preventDefault(),this.reset()),this._savedTextRemoveEvent=n,this._preventSubstitution=!0},a=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return c({},t,{tab:function(){this.option("opened")&&this.option("applyValueMode")==="instantly"&&this._resetCaretPosition(!0),t.tab&&t.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(n){if(t.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(n),!0},downArrow:function(n){if(t.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(n),!0},leftArrow:function(){a(),t.leftArrow&&t.leftArrow.apply(this,arguments)},rightArrow:function(){a(),t.rightArrow&&t.rightArrow.apply(this,arguments)},home:function(){a(),t.home&&t.home.apply(this,arguments)},end:function(){a(),t.end&&t.end.apply(this,arguments)},escape:function(){var n=t.escape&&t.escape.apply(this,arguments);return this._cancelEditing(),n??!0},enter:function(n){var r=this.option("opened"),s=this._input().val().trim(),o=s&&this._list&&!this._list.option("focusedElement");if(!s&&p(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(n),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return n.preventDefault(),o&&(r&&this._toggleOpenState(),this._valueChangeEventHandler(n)),r;if(t.enter&&t.enter.apply(this,arguments))return r}},space:function(n){var r=this.option("opened"),s=this.option("searchEnabled"),o=this.option("acceptCustomValue");if(!(!r||s||o))return n.preventDefault(),this._valueChangeEventHandler(n),!0},backspace:i,del:i})},_getDefaultOptions:function(){return c(this.callBase(),{placeholder:x.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(e){p(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass(mo),this._renderTooltip(),this.callBase(),this._$container.addClass(Co)},_createPopup:function(){this.callBase(),this._popup.$element().addClass(go),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" "+Gi},_setDeprecatedOptions(){this.callBase(),c(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var e,t=this._searchValue();if(!t){this._focusListElement(null);return}var{items:i,selectedItem:a}=this.option(),n=this._list._itemElements(),r=(e=i==null?void 0:i.indexOf(a))!==null&&e!==void 0?e:-1,s=r!==-1&&!this._isCustomItemSelected()?n.eq(r):null;this._focusListElement(s)},_renderFocusedElement:function(){if(this._list){var e=this._searchValue();if(!e||this.option("acceptCustomValue")){this._focusListElement(null);return}var t=this._list._itemElements(),i=t.not(vo).eq(0);this._focusListElement(i)}},_focusListElement:function(e){this._preventInputValueRender=!0,this._list.option("focusedElement",j(e)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase();var e=this._dataController.paginate();e&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),new $().resolve()},_renderInputValue:function(){return this.callBase().always((function(){this._renderInputValueAsync()}).bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always((function(){this._refreshSelected()}).bind(this))},_renderInputValueImpl:function(){return this._renderField(),new $().resolve()},_setNextItem:function(e){var t=this._calcNextItem(e),i=this._valueGetter(t);this._setValue(i)},_setNextValue:function(e){var t=this._dataController.isLoaded()?new $().resolve():this._dataController.load();t.done((function(){var i=this._getSelectedIndex(),a=this._dataController.pageSize(),n=this._dataController.isLastPage(),r=i===this._items().length-1;this._saveValueChangeEvent(e);var s=ne(e)==="downArrow"?1:-1;a&&!n&&r&&s>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,s))):this._setNextItem(s)}).bind(this))},_setSelectedItem:function(e){var t=!this._isCustomValueAllowed()&&e===void 0;this.callBase(t?null:e),!t&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(e){return e=!p(e)&&this._isCustomValueAllowed()?this.option("value"):e,this.callBase(e)},_listConfig:function(){var e=c(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&c(e,{showSelectionControls:!0,selectByClick:!0}),e},_listFocusedItemChangeHandler:function(e){if(!this._preventInputValueRender){var t=e.component,i=u(t.option("focusedElement")),a=t._getItemData(i);this._updateField(a)}},_updateField:function(e){var t=this._getTemplateByOption("fieldTemplate");if(!(t&&this.option("fieldTemplate"))){var i=this._displayGetter(e);this.option("text",i),this._renderDisplayText(i);return}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):D},_selectionChangeHandler:function(e){g(e.addedItems||[],(function(t,i){this._setValue(this._valueGetter(i))}).bind(this))},_getActualSearchValue:function(){return this._dataController.searchValue()},_toggleOpenState:function(e){if(!this.option("disabled")){if(e=arguments.length?e:!this.option("opened"),!e&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&e){this._wasSearch(!1);var t=this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded();if(t&&this._dataController.getDataSource()){if(this._searchTimer)return;var i=this._getActualSearchValue();i&&this._wasSearch(!0),this._filterDataSource(i||null)}else this._setListOption("items",[])}e&&this._scrollToSelectedItem(),this.callBase(e)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText:function(){var e=this.option("selectedItem");if(e===null)return!1;var t=this._displayGetter(e),i=t?String(t):"",a=this._searchValue();return i===a},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(e){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always((function(){var{acceptCustomValue:t,text:i,selectedItem:a}=this.option();if(t){!e&&!this._isValueChanging&&(this._updateField(a??this._createCustomItem(i)),this._clearFilter());return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always((function(n){var r=k(n,a);this._setSelectedItem(r),this._updateField(r),this._clearFilter()}).bind(this))}).bind(this))},_valueChangeEventIncludesBlur:function(){var e=this.option(this._getValueChangeEventOptionName());return e.includes("blur")},_isPreventedFocusOutEvent:function(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()},_focusOutHandler:function(e){if(!this._isPreventedFocusOutEvent(e)){var t=this._isOverlayNestedTarget(e.relatedTarget);t||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)}e.target=this._input().get(0),this.callBase(e)},_cancelSearchIfNeed:function(e){var{searchEnabled:t}=this.option(),i=this._isOverlayNestedTarget(e==null?void 0:e.relatedTarget),a=this._wasSearch()&&t&&!i;if(a){var n,r=(n=this._popup)===null||n===void 0?void 0:n._hideAnimationProcessing;this._clearSearchTimer(),r?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e},_isOverlayNestedTarget:function(e){return!!u(e).closest(".".concat(Gi)).length},_clearTextValue:function(){var e=this.option("selectedItem"),t=this._displayGetter(e),i=e&&t!=="";i&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var e=se.getActiveElement(this.element());return this.callBase()&&u(e).closest(this._input()).length>0},_getValueChangeEventOptionName:function(){return"customItemCreateEvent"},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var e=this._list&&this.option("opened")&&u(this._list.option("focusedElement"));return e&&e.length?this._list._getItemData(e):this.option("selectedItem")},_isSelectedValue:function(e){return this._isValueEquals(e,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&this.option("selectionMode")!=="single")},_listItemClickHandler:function(e){var t=this._getCurrentValue();this._focusListElement(u(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&t===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(e){this._setValue(e)},_loadItem:function(e,t){var i=this,a=new $;return this.callBase(e,t).done((function(n){a.resolve(n)}).bind(this)).fail((function(n){if(!(n!=null&&n.shouldSkipCallback)){var r=i.option("selectedItem");i.option("acceptCustomValue")&&e===i._valueGetter(r)?a.resolve(r):a.reject()}}).bind(this)),a.promise()},_loadInputValue:function(e,t){return this._loadItemDeferred=this._loadItem(e).always(t),this._loadItemDeferred},_isCustomItemSelected:function(){var e=this.option("selectedItem"),t=this._searchValue(),i=this._displayGetter(e);return!i||t!==i.toString()},_valueChangeEventHandler:function(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(e){var t={text:e},i=this._customItemCreatingAction(t),a=k(i,t.customItem);return p(i)&&yi.log("W0015","onCustomItemCreating","customItem"),a},_customItemAddedHandler:function(e){var t=this._searchValue(),i=this._createCustomItem(t);if(this._saveValueChangeEvent(e),i===void 0)throw this._renderValue(),yi.Error("E0121");rr(i)?sr(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem:function(e){this._disposed||(e=e||null,this.option("selectedItem",e),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)),this._isValueChanging=!1)},_clearValueHandler:function(e){return this._preventFiltering=!0,this.callBase(e),this._searchCanceled(),!1},_wasSearch:function(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e},_searchHandler:function(){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments)},_dataSourceFiltered:function(e){this.callBase(),e!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var e=this._input().get(0),t=this._searchValue().length,i=e.selectionStart===0&&e.selectionEnd===t,a=e.selectionStart!==e.selectionEnd,n=t===e.selectionEnd;return this._wasSearch()&&a&&!i&&n&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&this.option("searchMode")==="startswith"},_renderInputSubstitution:function(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}var e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(e){var t=this._input(),i=t.val().length;if(i!==0){var a=t.get(0),n=this._displayGetter(e).toString();a.value=n,this._caret({start:i,end:n.length})}}},_dispose:function(){this._renderInputValueAsync=D,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(e){switch(e.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(e)}}});V("dxSelectBox",hi);const sh=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"}));var Ui=e=>e.getMonth()+1,Yi=(e,t)=>{var i=e.getDate(),a=We("M",e),n=re(parseInt(t),a.min,a.max);e.setMonth(n-1,1);var{min:r,max:s}=We("dM",e),o=re(i,r,s);e.setDate(o)},Do={a:e=>e.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:Ui,L:Ui,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},yo=c({},or(),{a:(e,t)=>{var i=e.getHours(),a=i>=12;a!==!!parseInt(t)&&e.setHours((i+12)%24)},d:(e,t)=>{var i=We("dM",e).max;t>i&&e.setMonth(e.getMonth()+1),e.setDate(t)},h:(e,t)=>{var i=e.getHours()>=12;e.setHours(+t%12+(i?12:0))},M:Yi,L:Yi,E:(e,t)=>{t<0||e.setDate(e.getDate()-e.getDay()+parseInt(t))},y:(e,t)=>{var i=e.getFullYear(),a=String(t).length,n=String(We("y",e).max).length,r=parseInt(String(i).substr(0,n-a)+t);e.setFullYear(r)}}),So=e=>Do[e]||(()=>e),bo=(e,t)=>{for(var i=t.regexp.exec(e),a=0,n=0,r=[],s=function(){a=n,n=a+i[o].length;var l=t.patterns[o-1].replace(/^'|'$/g,""),d=So(l[0]);r.push({index:o-1,isStub:l===i[o],caret:{start:a,end:n},pattern:l,text:i[o],limits:function(){for(var h=arguments.length,_=new Array(h),m=0;m<h;m++)_[m]=arguments[m];return We(l[0],..._)},setter:yo[l[0]]||D,getter:d})},o=1;o<i.length;o++)s();return r},We=(e,t,i)=>{var a={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:0,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return a[i||e]||a.getAmPm},Io=(e,t)=>{for(var i=0;i<e.length;i++){var a=e[i].caret.end>=t;if(!e[i].isStub&&a)return i}return null},At=["year","day","month","day"],Ki=["hours","minutes","seconds","milliseconds"],Tn=6e4,En=60*Tn*24,To=365*En,Eo=function(e){var t=typeof e;return t==="string"?"format":t==="object"&&e.type!==void 0?e.type:null},y={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:Tn,ONE_DAY:En,ONE_YEAR:To,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var e=new Date;return new Date(e.getFullYear()+50,e.getMonth(),e.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:At},time:{getStandardPattern:function(){return"HH:mm"},components:Ki},datetime:{getStandardPattern:function(){var e;return function(){var t=u("<input>").attr("type","datetime");t.val("2000-01-01T01:01Z"),t.val()&&(e="yyyy-MM-ddTHH:mmZ")}(),e||(e="yyyy-MM-ddTHH:mm:ssZ"),y.FORMATS_INFO.datetime.getStandardPattern=function(){return e},e},components:[...At,...Ki]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...At,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(e,t){var i=y.FORMATS_INFO[t].getStandardPattern();return B.serializeDate(e,i)},fromStandardDateFormat:function(e){var t=B.dateParser(e);return X(t)?t:void 0},getMaxMonthDay:function(e,t){return new Date(e,t+1,0).getDate()},mergeDates:function(e,t,i){if(!t)return t||null;if(!e||isNaN(e.getTime())){var a=new Date(null);e=new Date(a.getFullYear(),a.getMonth(),a.getDate())}var n=new Date(e.valueOf()),r=y.FORMATS_INFO[i];return g(r.components,function(){var s=y.DATE_COMPONENTS_INFO[this];n[s.setter](t[s.getter]())}),n},getLongestCaptionIndex:function(e){var t=0,i=0,a;for(a=0;a<e.length;++a)e[a].length>i&&(t=a,i=e[a].length);return t},formatUsesMonthName:function(e){return C.formatUsesMonthName(e)},formatUsesDayName:function(e){return C.formatUsesDayName(e)},getLongestDate:function(e,t,i){var a=Eo(e),n=9;(!a||y.formatUsesMonthName(a))&&(n=y.getLongestCaptionIndex(t));var r=new Date(1888,n,21,23,59,59,999);if(!a||y.formatUsesDayName(a)){var s=r.getDate()-r.getDay()+y.getLongestCaptionIndex(i);r.setDate(s)}return r},normalizeTime:function(e){e.setSeconds(0),e.setMilliseconds(0)}};y.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(e,t){var i=new Date(t.getTime());return i.setFullYear(e),C.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(e,t){var i=new Date(t.getTime());return i.setDate(e),C.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(e){return C.getMonthNames()[e]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(e){return C.format(new Date(0,0,0,e),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(e){return C.format(new Date(0,0,0,0,e),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(e){return C.format(new Date(0,0,0,0,0,e),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(e){return C.format(new Date(0,0,0,0,0,0,e),"millisecond")},startValue:0,endValue:999}};var xn="dxSwipeable",xo="dx-swipeable",wo={onStart:Nr,onUpdated:Pr,onEnd:$r,onCancel:"dxswipecancel"},Ao=180,lt=ni.inherit({_getDefaultOptions:function(){return c(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:Ao,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass(xo),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),!this.option("disabled")){var e=this.NAME;this._createEventData(),g(wo,(function(t,i){var a=this._createActionByOption(t,{context:this});i=b(i,e),v.on(this.$element(),i,this._eventData,function(n){return a({event:n})})}).bind(this))}},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){v.off(this.$element(),"."+xn)},_optionChanged:function(e){switch(e.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(e)}},_useTemplates:function(){return!1}});Cr(lt,xn);var Bo="dx-calendar-navigator",Vo="dx-calendar-navigator-previous-month",Oo="dx-calendar-navigator-next-month",Mo="dx-calendar-navigator-previous-view",Lo="dx-calendar-navigator-next-view",Ro="dx-calendar-disabled-navigator-link",ko="dx-calendar-caption-button",Fo="dx-button-text";class No extends pe{_getDefaultOptions(){return c(super._getDefaultOptions(),{onClick:null,onCaptionClick:null,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return ht()},options:{type:"default",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),this.$element().addClass(Bo),this._renderButtons(),this._renderCaption()}_renderButtons(){var{rtlEnabled:t,type:i,stylingMode:a}=this.option();this._prevButton=this._createComponent(u("<div>"),Se,{focusStateEnabled:!1,icon:t?"chevronright":"chevronleft",onClick:o=>{this._clickAction({direction:-1,event:o})},type:i,stylingMode:a,integrationOptions:{}});var n=this._prevButton.$element().addClass(Mo).addClass(Vo);this._nextButton=this._createComponent(u("<div>"),Se,{focusStateEnabled:!1,icon:t?"chevronleft":"chevronright",onClick:o=>{this._clickAction({direction:1,event:o})},type:i,stylingMode:a,integrationOptions:{}});var r=this._nextButton.$element().addClass(Lo).addClass(Oo);this._caption=this._createComponent(u("<div>").addClass(ko),Se,{focusStateEnabled:!1,onClick:o=>{this._captionClickAction({event:o})},type:i,stylingMode:a,template:(o,l)=>{var{text:d}=this.option(),h=d.split(" - ");h.forEach(_=>{u(l).append(u("<span>").addClass(Fo).text(_))})},integrationOptions:{}});var s=this._caption.$element();this.$element().append(n,s,r)}_renderCaption(){this._caption.option("text",this.option("text"))}toggleButton(t,i){var a="_"+t+"Button",n=this[a];n&&(n.option("disabled",i),n.$element().toggleClass(Ro,i))}_optionChanged(t){switch(t.name){case"text":this._renderCaption();break;default:super._optionChanged(t)}}}var{abstract:Z}=pe,Po="dx-calendar-other-view",$o="dx-calendar-cell",Ho="dx-calendar-cell-start",Wo="dx-calendar-cell-end",zo="dx-calendar-cell-start-in-row",Go="dx-calendar-cell-end-in-row",Uo="dx-calendar-week-number-cell",Bt="dx-calendar-empty-cell",Yo="dx-calendar-today",qi="dx-calendar-selected-date",ji="dx-calendar-cell-in-range",Vt="dx-calendar-cell-range-hover",Ot="dx-calendar-cell-range-hover-start",Mt="dx-calendar-cell-range-hover-end",Zi="dx-calendar-range-start-date",Xi="dx-calendar-range-end-date",Lt="dx-calendar-contoured-date",Qi="td:not(.".concat(Uo,")"),Ji=b(Ie,"dxCalendar"),ea=b(Dr,"dxCalendar"),Rt="dxDateValueKey",Xe=pe.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return c(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents()},_createTable:function(){this._$table=u("<table>");var e=x.format("dxCalendar-ariaWidgetName"),t=x.format("dxCalendar-ariaHotKeysInfo");return this.setAria({label:"".concat(e,". ").concat(t),role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=u("<tbody>").appendTo(this._$table);for(var e={cellDate:this._getFirstCellData(),prevCellDate:null},t=0,i=this.option("rowCount");t<i;t++){e.row=this._createRow();for(var a=0,n=this.option("colCount");a<n;a++)this._renderCell(e,a);this._renderWeekNumberCell(e)}},_createRow:function(){var e=se.createElement("tr");return this.setAria("role","row",u(e)),this.$body.get(0).appendChild(e),e},_createCell:function(e,t){var i=se.createElement("td"),a=u(i);return i.className=this._getClassNameByDate(e,t),i.setAttribute("data-value",B.serializeDate(e,f.getShortDateFormat())),ri(i,Rt,e),this.setAria({role:"gridcell",label:this.getCellAriaLabel(e)},a),{cell:i,$cell:a}},_renderCell:function(e,t){var{cellDate:i,prevCellDate:a,row:n}=e;a&&f.fixTimezoneGap(a,i),e.prevCellDate=i;var{cell:r,$cell:s}=this._createCell(i,t),o=this.option("cellTemplate");u(n).append(r),o?o.render(this._prepareCellTemplateData(i,t,s)):r.innerHTML=this._getCellText(i),e.cellDate=this._getNextCellData(i)},_getClassNameByDate:function(e,t){var i=$o;return this._isTodayCell(e)&&(i+=" ".concat(Yo)),(this._isDateOutOfRange(e)||this.isDateDisabled(e))&&(i+=" ".concat(Bt)),this._isOtherView(e)&&(i+=" ".concat(Po)),this.option("selectionMode")==="range"&&(t===0&&(i+=" ".concat(zo)),t===this.option("colCount")-1&&(i+=" ".concat(Go)),this._isStartDayOfMonth(e)&&(i+=" ".concat(Ho)),this._isEndDayOfMonth(e)&&(i+=" ".concat(Wo))),i},_prepareCellTemplateData:function(e,t,i){var a=e instanceof Date,n=a?this._getCellText(e):e,r=a?e:void 0,s=this._getViewName();return{model:{text:n,date:r,view:s},container:j(i),index:t}},_renderEvents:function(){this._createCellClickAction(),v.off(this._$table,Ji),v.on(this._$table,Ji,Qi,e=>{u(e.currentTarget).hasClass(Bt)||this._cellClickAction({event:e,value:u(e.currentTarget).data(Rt)})}),v.off(this._$table,ea),this.option("selectionMode")==="range"&&(this._createCellHoverAction(),v.on(this._$table,ea,Qi,e=>{u(e.currentTarget).hasClass(Bt)||this._cellHoverAction({event:e,value:u(e.currentTarget).data(Rt)})}))},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction:function(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createDisabledDatesHandler:function(){var e=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(e)?this._getDefaultDisabledDatesHandler(e):e||D},_getDefaultDisabledDatesHandler:function(e){return D},_isTodayCell:Z,_isDateOutOfRange:Z,isDateDisabled:function(e){var t={date:e,view:this._getViewName()};return this._disabledDatesHandler(t)},_isOtherView:Z,_isStartDayOfMonth:Z,_isEndDayOfMonth:Z,_getCellText:Z,_getFirstCellData:Z,_getNextCellData:Z,_renderContouredDate:function(e){if(this.option("focusStateEnabled")){e=e||this.option("contouredDate");var t=this._getContouredCell(),i=this._getCellByDate(e);t.removeClass(Lt),e&&i.addClass(Lt)}},_getContouredCell:function(){return this._$table.find(".".concat(Lt))},_renderValue:function(){if(this.option("allowValueSelection")){var e=this.option("value");Array.isArray(e)||(e=[e]),this._updateSelectedClass(e)}},_updateSelectedClass:function(e){var t;this._isRangeMode()&&!this._isMonthView()||((t=this._$selectedCells)===null||t===void 0||t.forEach(i=>{i.removeClass(qi)}),this._$selectedCells=e.map(i=>this._getCellByDate(i)),this._$selectedCells.forEach(i=>{i.addClass(qi)}))},_renderRange:function(){var e,t,i,a,n,r,s,o,{allowValueSelection:l,value:d,range:h}=this.option();!l||!this._isRangeMode()||!this._isMonthView()||((e=this._$rangeCells)===null||e===void 0||e.forEach(_=>{_.removeClass(ji)}),(t=this._$hoveredRangeCells)===null||t===void 0||t.forEach(_=>{_.removeClass(Vt)}),(i=this._$rangeStartHoverCell)===null||i===void 0||i.removeClass(Ot),(a=this._$rangeEndHoverCell)===null||a===void 0||a.removeClass(Mt),(n=this._$rangeStartDateCell)===null||n===void 0||n.removeClass(Zi),(r=this._$rangeEndDateCell)===null||r===void 0||r.removeClass(Xi),this._$rangeCells=h.map(_=>this._getCellByDate(_)),this._$rangeStartDateCell=this._getCellByDate(d[0]),this._$rangeEndDateCell=this._getCellByDate(d[1]),this._$rangeCells.forEach(_=>{_.addClass(ji)}),(s=this._$rangeStartDateCell)===null||s===void 0||s.addClass(Zi),(o=this._$rangeEndDateCell)===null||o===void 0||o.addClass(Xi))},_renderHoveredRange(){var e,t,i,a,n,{allowValueSelection:r,hoveredRange:s}=this.option();!r||!this._isRangeMode()||!this._isMonthView()||((e=this._$hoveredRangeCells)===null||e===void 0||e.forEach(o=>{o.removeClass(Vt)}),(t=this._$rangeStartHoverCell)===null||t===void 0||t.removeClass(Ot),(i=this._$rangeEndHoverCell)===null||i===void 0||i.removeClass(Mt),this._$hoveredRangeCells=s.map(o=>this._getCellByDate(o)),this._$rangeStartHoverCell=this._getCellByDate(s[0]),this._$rangeEndHoverCell=this._getCellByDate(s[s.length-1]),this._$hoveredRangeCells.forEach(o=>{o.addClass(Vt)}),(a=this._$rangeStartHoverCell)===null||a===void 0||a.addClass(Ot),(n=this._$rangeEndHoverCell)===null||n===void 0||n.addClass(Mt))},_isMonthView:function(){return this.option("zoomLevel")==="month"},_isRangeMode:function(){return this.option("selectionMode")==="range"},getCellAriaLabel:function(e){return this._getCellText(e)},_getFirstAvailableDate:function(){var e=this.option("date"),t=this.option("min");return e=f.getViewFirstCellDate(this._getViewName(),e),new Date(t&&e<t?t:e)},_getCellByDate:Z,isBoundary:Z,_optionChanged:function(e){var{name:t,value:i}=e;switch(t){case"value":this._renderValue();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(e)}}}),Ko="dx-calendar-other-month",qo="dx-calendar-other-view",jo="dx-calendar-week-number-cell",Zo={month:Xe.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return c(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat(qo)).addClass(Ko)},_renderFocusTarget:D,getCellAriaLabel:function(e){return C.format(e,"longdate")},_renderHeader:function(){var e=u("<tr>"),t=u("<thead>").append(e);this._$table.prepend(t);for(var i=0,a=this.option("colCount");i<a;i++)this._renderHeaderCell(i,e);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(e)},_renderHeaderCell:function(e,t){var{firstDayOfWeek:i}=this.option(),{full:a,abbreviated:n}=this._getDayCaption(i+e),r=u("<th>").attr({scope:"col",abbr:a}).text(n);t.append(r)},_renderWeekHeaderCell:function(e){var t=u("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});e.prepend(t)},_renderWeekNumberCell:function(e){var{showWeekNumbers:t,cellTemplate:i}=this.option();if(t){var a=this._getWeekNumber(e.prevCellDate),n=se.createElement("td"),r=u(n);n.className=jo,i?i.render(this._prepareCellTemplateData(a,-1,r)):n.innerHTML=a,e.row.prepend(n),this.setAria({role:"gridcell",label:"Week ".concat(a)},r)}},_getWeekNumber:function(e){var{weekNumberRule:t,firstDayOfWeek:i}=this.option();return t==="auto"?f.getWeekNumber(e,i,i===1?"firstFourDays":"firstDay"):f.getWeekNumber(e,i,t)},getNavigatorCaption:function(){return C.format(this.option("date"),"monthandyear")},_isTodayCell:function(e){var t=this.option("_todayDate")();return f.sameDate(e,t)},_isDateOutOfRange:function(e){var t=this.option("min"),i=this.option("max");return!f.dateInRange(e,t,i,"date")},_isOtherView:function(e){return e.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth:function(e){return f.sameDate(e,f.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth:function(e){return f.sameDate(e,f.getLastMonthDate(this.option("date")))},_getCellText:function(e){return C.format(e,"d")},_getDayCaption:function(e){var t=this.option("colCount"),i=e%t;return{full:C.getDayNames()[i],abbreviated:C.getDayNames("abbreviated")[i]}},_getFirstCellData:function(){var{firstDayOfWeek:e}=this.option(),t=f.getFirstMonthDate(this.option("date")),i=e-t.getDay(),a=this.option("colCount");return i>=0&&(i-=a),t.setDate(t.getDate()+i),t},_getNextCellData:function(e){return e=new Date(e),e.setDate(e.getDate()+1),e},_getCellByDate:function(e){return this._$table.find("td[data-value='".concat(B.serializeDate(e,f.getShortDateFormat()),"']"))},isBoundary:function(e){return f.sameMonthAndYear(e,this.option("min"))||f.sameMonthAndYear(e,this.option("max"))},_getDefaultDisabledDatesHandler:function(e){return function(t){var i=e.some(function(a){return f.sameDate(a,t.date)});if(i)return!0}}}),year:Xe.inherit({_getViewName:function(){return"year"},_isTodayCell:function(e){var t=this.option("_todayDate")();return f.sameMonthAndYear(e,t)},_isDateOutOfRange:function(e){return!f.dateInRange(e,f.getFirstMonthDate(this.option("min")),f.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(e){return C.getMonthNames("abbreviated")[e.getMonth()]},_getFirstCellData:function(){var e=this.option("date"),t=new Date(e);return t.setDate(1),t.setMonth(0),t},_getNextCellData:function(e){return e=new Date(e),e.setMonth(e.getMonth()+1),e},_getCellByDate:function(e){var t=new Date(e);return t.setDate(1),this._$table.find("td[data-value='".concat(B.serializeDate(t,f.getShortDateFormat()),"']"))},getCellAriaLabel:function(e){return C.format(e,"monthandyear")},getNavigatorCaption:function(){return C.format(this.option("date"),"yyyy")},isBoundary:function(e){return f.sameYear(e,this.option("min"))||f.sameYear(e,this.option("max"))},_renderWeekNumberCell:D}),decade:Xe.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(e){var t=this.option("_todayDate")();return f.sameYear(e,t)},_isDateOutOfRange:function(e){var t=this.option("min"),i=this.option("max");return!f.dateInRange(e.getFullYear(),t&&t.getFullYear(),i&&i.getFullYear())},_isOtherView:function(e){var t=new Date(e);return t.setMonth(1),!f.sameDecade(t,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(e){return C.format(e,"yyyy")},_getFirstCellData:function(){var e=f.getFirstYearInDecade(this.option("date"))-1;return f.createDateWithFullYear(e,0,1)},_getNextCellData:function(e){return e=new Date(e),e.setFullYear(e.getFullYear()+1),e},getNavigatorCaption:function(){var e=this.option("date"),t=f.getFirstYearInDecade(e),i=new Date(e),a=new Date(e);return i.setFullYear(t),a.setFullYear(t+9),C.format(i,"yyyy")+"-"+C.format(a,"yyyy")},_isValueOnCurrentView:function(e,t){return f.sameDecade(e,t)},_getCellByDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),this._$table.find("td[data-value='".concat(B.serializeDate(t,f.getShortDateFormat()),"']"))},isBoundary:function(e){return f.sameDecade(e,this.option("min"))||f.sameDecade(e,this.option("max"))},_renderWeekNumberCell:D}),century:Xe.inherit({_getViewName:function(){return"century"},_isTodayCell:function(e){var t=this.option("_todayDate")();return f.sameDecade(e,t)},_isDateOutOfRange:function(e){var t=f.getFirstYearInDecade(e),i=f.getFirstYearInDecade(this.option("min")),a=f.getFirstYearInDecade(this.option("max"));return!f.dateInRange(t,i,a)},_isOtherView:function(e){var t=new Date(e);return t.setMonth(1),!f.sameCentury(t,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(e){var t=C.format(e,"yyyy"),i=new Date(e);return i.setFullYear(i.getFullYear()+9),t+" - "+C.format(i,"yyyy")},_getFirstCellData:function(){var e=f.getFirstDecadeInCentury(this.option("date"))-10;return f.createDateWithFullYear(e,0,1)},_getNextCellData:function(e){return e=new Date(e),e.setFullYear(e.getFullYear()+10),e},_getCellByDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(f.getFirstYearInDecade(t)),this._$table.find("td[data-value='".concat(B.serializeDate(t,f.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var e=this.option("date"),t=f.getFirstDecadeInCentury(e),i=new Date(e),a=new Date(e);return i.setFullYear(t),a.setFullYear(t+99),C.format(i,"yyyy")+"-"+C.format(a,"yyyy")},isBoundary:function(e){return f.sameCentury(e,this.option("min"))||f.sameCentury(e,this.option("max"))},_renderWeekNumberCell:D})};class ci{constructor(t){this.calendar=t}dateOption(t){return this.calendar._dateOption(t)}dateValue(t,i){this.calendar._dateValue(t,i)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(t,i){this.calendar._updateAriaSelected(t,i),t[0]&&this.calendar.option("currentDate").getTime()===t[0].getTime()&&this.calendar._updateAriaId(t[0])}processValueChanged(t,i){var a,n;t=((a=t)===null||a===void 0?void 0:a.map(r=>this._convertToDate(r)))||[],i=((n=i)===null||n===void 0?void 0:n.map(r=>this._convertToDate(r)))||[],this._updateViewsValue(t),this.updateAriaSelected(t,i),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_getLowestDateInArray(t){if(t.length)return new Date(Math.min(...t))}_convertToDate(t){return this.calendar._convertToDate(t)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(t,i){this.calendar._updateViewsOption(t,i)}_updateViewsValue(t){this._updateViewsOption("value",t)}_updateCurrentDate(t){this.calendar.option("currentDate",t??new Date)}}class Xo extends ci{constructor(t){super(t),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(t,i){this.skipNavigate(),this.dateValue(t,i)}updateAriaSelected(t,i){var a,n;(a=t)!==null&&a!==void 0||(t=[this.dateOption("value")]),(n=i)!==null&&n!==void 0||(i=[]),super.updateAriaSelected(t,i)}getDefaultCurrentDate(){return this.dateOption("value")}_updateViewsValue(t){this._updateViewsOption("value",t[0])}}class Qo extends ci{constructor(t){super(t),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("values"),range:[],selectionMode:"multi"}}selectValue(t,i){var a=[...this.dateOption("values")],n=a.findIndex(r=>(r==null?void 0:r.toDateString())===t.toDateString());n>-1?a.splice(n,1):a.push(t),this.skipNavigate(),this._updateCurrentDate(t),this._currentDateChanged=!0,this.dateValue(a,i)}updateAriaSelected(t,i){var a,n;(a=t)!==null&&a!==void 0||(t=this.dateOption("values")),(n=i)!==null&&n!==void 0||(i=[]),super.updateAriaSelected(t,i)}getDefaultCurrentDate(){var t=this.dateOption("values").filter(i=>i);return this._getLowestDateInArray(t)}}var wn=864e5,ta=120*wn;class Jo extends ci{constructor(t){super(t),this.NAME="RangeSelection"}getViewOptions(){var t=this._getValues(),i=this._getDaysInRange(t[0],t[1]);return{value:t,range:i,selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this)}}selectValue(t,i){var[a,n]=this._getValues();this.skipNavigate(),this._updateCurrentDate(t),this._currentDateChanged=!0,this.calendar.option("_allowChangeSelectionOrder")===!0?(this.calendar._valueSelected=!0,this.calendar.option("_currentSelection")==="startDate"?this.calendar._convertToDate(t)>this.calendar._convertToDate(n)?this.dateValue([t,null],i):this.dateValue([t,n],i):this.calendar._convertToDate(t)>=this.calendar._convertToDate(a)?this.dateValue([a,t],i):this.dateValue([t,null],i)):!a||n?this.dateValue([t,null],i):this.dateValue(a<t?[a,t]:[t,a],i)}updateAriaSelected(t,i){var a,n;(a=t)!==null&&a!==void 0||(t=this._getValues()),(n=i)!==null&&n!==void 0||(i=[]),super.updateAriaSelected(t,i)}processValueChanged(t,i){super.processValueChanged(t,i);var a=this._getRange();this._updateViewsOption("range",a)}getDefaultCurrentDate(){var{_allowChangeSelectionOrder:t,_currentSelection:i}=this.calendar.option(),a=this.dateOption("values");if(t){if(i==="startDate"&&a[0])return a[0];if(i==="endDate"&&a[1])return a[1]}var n=a.filter(r=>r);return this._getLowestDateInArray(n)}_getValues(){var t=this.dateOption("values");if(!t.length)return t;var[i,a]=t;return i&&a&&i>a&&([i,a]=[a,i]),[i,a]}_getRange(){var[t,i]=this._getValues();return this._getDaysInRange(t,i)}_getDaysInRange(t,i){if(!t||!i)return[];var a=this.calendar.option("currentDate").getTime(),n=new Date(Math.max(a-ta,t)),r=new Date(Math.min(a+ta,i));return[...f.getDatesOfInterval(n,r,wn),r]}_cellHoverHandler(t){var i=this._isMaxZoomLevel(),[a,n]=this._getValues(),{_allowChangeSelectionOrder:r,_currentSelection:s}=this.calendar.option();if(i){var o=r&&s==="startDate";if(a&&!n&&!o){if(t.value>a){this._updateViewsOption("hoveredRange",this._getDaysInRange(a,t.value));return}}else if(!a&&n&&!(r&&s==="endDate")){if(t.value<n){this._updateViewsOption("hoveredRange",this._getDaysInRange(t.value,n));return}}else if(a&&n){if(s==="startDate"&&t.value<a){this._updateViewsOption("hoveredRange",this._getDaysInRange(t.value,a));return}else if(s==="endDate"&&t.value>n){this._updateViewsOption("hoveredRange",this._getDaysInRange(n,t.value));return}}this._updateViewsOption("hoveredRange",[])}}}var el="dx-calendar",tl="dx-calendar-body",il="dx-calendar-cell",al="dx-calendar-footer",nl="dx-calendar-today-button",rl="dx-calendar-with-footer",sl="dx-calendar-views-wrapper",ia="dx-calendar-view",ol="dx-calendar-multiview",ll="dx-calendar-range",ul="dx-state-focused",dl="dx-gesture-cover",Qe=250,aa=.6,na=1,hl="yyyy-MM-dd",cl="dxDateValueKey",ra=b(yr,"dxCalendar"),me={month:3,year:2,decade:1,century:0},O={MONTH:"month",YEAR:"year",DECADE:"decade",CENTURY:"century"},_l={SingleSelection:Xo,MultiSelection:Qo,RangeSelection:Jo};function pl(e){return e.hasClass(ul)}var An=ct.inherit({_activeStateUnit:"."+il,_getDefaultOptions:function(){return c(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,values:[],dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:O.MONTH,maxZoomLevel:O.MONTH,minZoomLevel:O.CENTURY,selectionMode:"single",showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return T.real().deviceType==="desktop"&&!T.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return c(this.callBase(),{rightArrow:function(e){e.preventDefault(),q(e)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(e){e.preventDefault(),q(e)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(e){if(e.preventDefault(),q(e))this._navigateUp();else{if(z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(e){if(e.preventDefault(),q(e))this._navigateDown();else{if(z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(e){e.preventDefault();var t=this.option("zoomLevel"),i=this.option("currentDate"),a=this._dateOption("min");if(!this._view.isDateDisabled(i)){var n=f.sameView(t,i,a)?a:f.getViewFirstCellDate(t,i);this._moveToClosestAvailableDate(n)}},end:function(e){e.preventDefault();var t=this.option("zoomLevel"),i=this.option("currentDate"),a=this._dateOption("max");if(!this._view.isDateDisabled(i)){var n=f.sameView(t,i,a)?a:f.getViewLastCellDate(t,i);this._moveToClosestAvailableDate(n)}},pageUp:function(e){e.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(e){e.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:D,enter:this._enterKeyHandler})},_enterKeyHandler:function(e){if(!this._isMaxZoomLevel())this._navigateDown();else if(!this._view.isDateDisabled(this.option("currentDate"))){var t=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(t,e)}},_getSerializationFormat:function(e){var t=this.option(e||"value");if(this.option("dateSerializationFormat"))return this.option("dateSerializationFormat");if(be(t))return"number";if(N(t))return B.getDateSerializationFormat(t)},_convertToDate:function(e){return B.deserializeDate(e)},_dateValue:function(e,t){var i=Array.isArray(e)?"values":"value";if(t){if(t.type==="keydown"){var a=this._view._getContouredCell().get(0);t.target=a}this._saveValueChangeEvent(t)}this._dateOption(i,e)},_dateOption:function(e,t){if(arguments.length===1){var i,a=(i=this.option("values"))!==null&&i!==void 0?i:[];return e==="values"?a.map(s=>this._convertToDate(s)):this._convertToDate(this.option(e))}var n=this._getSerializationFormat(e),r=e==="values"?(t==null?void 0:t.map(s=>B.serializeDate(s,n)))||[]:B.serializeDate(t,n);this.option(e,r)},_shiftDate:function(e,t,i,a){switch(e){case O.MONTH:t.setDate(t.getDate()+i*a);break;case O.YEAR:t.setMonth(t.getMonth()+i*a);break;case O.DECADE:t.setFullYear(t.getFullYear()+i*a);break;case O.CENTURY:t.setFullYear(t.getFullYear()+10*i*a)}},_moveCurrentDateByOffset:function(e){var t=this.option("currentDate"),i=new Date(t),a=this.option("zoomLevel");this._shiftDate(a,i,e,1);for(var n=this._getMaxDate(),r=this._getMinDate(),s=this._areDatesInNeighborView(a,i,t),o=ce(i,r,n)&&s,l=new Date(i);o;){if(!this._view.isDateDisabled(l)){i=l;break}this._shiftDate(a,l,e,1),s=this._areDatesInNeighborView(a,l,t),o=ce(l,r,n)&&s}this._view.isDateDisabled(t)||this._view.isDateDisabled(i)?this._waitRenderView(e>0?1:-1):(this._skipNavigate=!0,this.option("currentDate",i))},_areDatesInSameView(e,t,i){switch(e){case O.MONTH:return t.getMonth()===i.getMonth();case O.YEAR:return t.getYear()===i.getYear();case O.DECADE:return parseInt(t.getYear()/10)===parseInt(i.getYear()/10);case O.CENTURY:return parseInt(t.getYear()/100)===parseInt(i.getYear()/100)}},_areDatesInNeighborView(e,t,i){switch(e){case O.MONTH:return a=t.getMonth(),n=i.getMonth(),r=Math.abs(a-n),Math.min(r,12-r)<=1;case O.YEAR:return Math.abs(t.getYear()-i.getYear())<=1;case O.DECADE:return Math.abs(t.getYear()-i.getYear())<=10;case O.CENTURY:return Math.abs(t.getYear()-i.getYear())<=100}var a,n,r},_moveToClosestAvailableDate:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.option("currentDate"),t=new Date(e),i=this.option("zoomLevel"),a=!this._isDateNotAvailable(t),n=a,r=a,s,o,l=new Date(t),d=new Date(t);do{if(n){t=l;break}if(r){t=d;break}this._shiftDate(i,l,1,1),this._shiftDate(i,d,1,-1),s=this._areDatesInSameView(i,l,e),o=this._areDatesInSameView(i,d,e),n=s&&!this._isDateNotAvailable(l),r=o&&!this._isDateNotAvailable(d)}while(s||o);this.option("currentDate",t)},_isDateNotAvailable:function(e){var t=this._getMaxDate(),i=this._getMinDate();return!ce(e,i,t)||this._view.isDateDisabled(e)},_init:function(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy:function(){var e=this._getSelectionStrategyName(),t=_l[e];(!this._selectionStrategy||this._selectionStrategy.NAME!==e)&&(this._selectionStrategy=new t(this))},_refreshSelectionStrategy:function(){this._initSelectionStrategy(),this._refresh()},_getSelectionStrategyName:function(){var e=this.option("selectionMode");switch(e){case"multi":return"MultiSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel:function(){var e=this.option("minZoomLevel"),t=this.option("maxZoomLevel"),i=this.option("zoomLevel");me[t]<me[e]||(me[i]>me[t]?this.option("zoomLevel",t):me[i]<me[e]&&this.option("zoomLevel",e))},_initCurrentDate:function(){var e,t=(e=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate()))!==null&&e!==void 0?e:this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",t)},_getNormalizedDate:function(e){return e=f.normalizeDate(e,this._getMinDate(),this._getMaxDate()),p(e)?this._getDate(e):e},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new Ga(function(e){var t=e.model;u(e.container).append(u("<span>").text(t&&t.text||String(t)))})}),this.callBase()},_updateCurrentDate:function(e){z.isAnimating(this._$viewsWrapper)&&z.stop(this._$viewsWrapper,!0);var t=this._getMinDate(),i=this._getMaxDate();if(t>i){this.option("currentDate",new Date);return}var a=this._getNormalizedDate(e);if(e.getTime()!==a.getTime()){this.option("currentDate",new Date(a));return}var n=this._getViewsOffset(this._view.option("date"),a);n!==0&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(n=0),this._view&&n!==0&&!this._suppressNavigation?this._additionalView?n>2||n<-1?(this._refreshViews(),this._setViewContoured(a),this._updateAriaId(a),this._renderNavigator()):n===1&&this._skipNavigate?(this._setViewContoured(a),this._updateAriaId(a)):this._navigate(n,a):this._navigate(n,a):(this._renderNavigator(),this._setViewContoured(a),this._updateAriaId(a)),this._skipNavigate=!1},_isAdditionalViewDate(e){return this._additionalView?e>=this._additionalView._getFirstAvailableDate():!1},_getActiveView:function(e){return this._isAdditionalViewDate(e)?this._additionalView:this._view},_setViewContoured:function(e){if(this.option("skipFocusCheck")||pl(this._focusTarget())){var t;this._view.option("contouredDate",null),(t=this._additionalView)===null||t===void 0||t.option("contouredDate",null);var i=this._isAdditionalViewDate(e)?this._additionalView:this._view;i.option("contouredDate",e)}},_getMinDate:function(){var e=this.option("_rangeMin");return e||(this.min?this.min:(this.min=this._dateOption("min")||new Date(1e3,0),this.min))},_getMaxDate:function(){var e=this.option("_rangeMax");return e||(this.max?this.max:(this.max=this._dateOption("max")||new Date(3e3,0),this.max))},_getViewsOffset:function(e,t){var i=this.option("zoomLevel");if(i===O.MONTH)return this._getMonthsOffset(e,t);var a;switch(i){case O.CENTURY:a=100;break;case O.DECADE:a=10;break;default:a=1}return parseInt(t.getFullYear()/a)-parseInt(e.getFullYear()/a)},_getMonthsOffset:function(e,t){var i=t.getFullYear()-e.getFullYear(),a=t.getMonth()-e.getMonth();return 12*i+a},_waitRenderView:function(e){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var t=this._getDateByOffset(e*this._getRtlCorrection());this._moveToClosestAvailableDate(t),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(e,t){var i;t=this._getDate((i=t)!==null&&i!==void 0?i:this.option("currentDate"));var a=t.getDate(),n=f.getDifferenceInMonth(this.option("zoomLevel"))*e;t.setDate(1),t.setMonth(t.getMonth()+n);var r=f.getLastMonthDate(t).getDate();return t.setDate(a>r?r:a),t},_focusTarget:function(){return this.$element()},_initMarkup:function(){this._renderSubmitElement(),this.callBase();var e=this.$element();e.addClass(el),e.toggleClass(ll,this.option("selectionMode")==="range"),this._renderBody(),e.append(this.$body),this._renderViews(),this._renderEvents(),this._renderNavigator(),e.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=u("<div>").addClass(tl),this._$viewsWrapper=u("<div>").addClass(sl),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass(ia+"-"+this.option("zoomLevel"));var{currentDate:e,viewsCount:t}=this.option();if(this.$element().toggleClass(ol,t>1),this._view=this._renderSpecificView(e),F()){var i=this._getDateByOffset(-1,e);this._beforeView=this._isViewAvailable(i)?this._renderSpecificView(i):null;var a=this._getDateByOffset(t,e);a.setDate(1),this._afterView=this._isViewAvailable(a)?this._renderSpecificView(a):null}t>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,e))),this._translateViews()},_renderSpecificView:function(e){var{zoomLevel:t}=this.option(),i=Zo[t],a=u("<div>").appendTo(this._$viewsWrapper),n=this._viewConfig(e),r=this._createComponent(a,i,n);return r},_viewConfig:function(e){var t,i=this.option("disabledDates");return i=K(i)?this._injectComponent(i.bind(this)):i,ii({},this._selectionStrategy.getViewOptions(),{date:e,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:(t=this.option("firstDayOfWeek"))!==null&&t!==void 0?t:C.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:i,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){v.off(this._$viewsWrapper,ra),this.option("selectionMode")==="range"&&v.on(this._$viewsWrapper,ra,null,e=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent:function(e){var t=this;return function(i){return c(i,{component:t}),e(i)}},_isViewAvailable:function(e){var t=this.option("zoomLevel"),i=f.getViewMinBoundaryDate(t,this._getMinDate()),a=f.getViewMaxBoundaryDate(t,this._getMaxDate());return f.dateInRange(e,i,a)},_translateViews:function(){var{viewsCount:e}=this.option();ye(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,e),this._moveViewElement(this._additionalView,1)},_moveViewElement(e,t){e&&ye(e.$element(),{left:this._getViewPosition(t),top:0})},_getViewPosition:function(e){var t=this.option("rtlEnabled")?-1:1;return 100*e*t+"%"},_cellClickHandler:function(e){var t=this.option("zoomLevel"),i=f.getViewDown(t),a=this._isMaxZoomLevel();if(i&&!a)this._navigateDown(e.event.currentTarget);else{var n=this._updateTimeComponent(e.value);this._selectionStrategy.selectValue(n,e.event),this._cellClickAction(e)}},_updateTimeComponent:function(e){var t=new Date(e),i=this._dateOption("value");return i&&(t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),t.setSeconds(i.getSeconds()),t.setMilliseconds(i.getMilliseconds())),t},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(e){var t=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var i=f.getViewDown(t);if(i){var a=this._view.option("contouredDate")||this._view.option("date");e&&(a=u(e).data(cl)),this._isOtherViewCellClicked=!0,this.option("currentDate",a),this.option("zoomLevel",i),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new No(u("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig:function(){var{rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),rtlEnabled:e}},_navigatorClickHandler:function(e){var{currentDate:t,viewsCount:i}=this.option(),a=e.direction;if(i>1){var n=this._isAdditionalViewDate(t),r=n&&a<0||!n&&a>0;r&&(a*=2)}var s=this._getDateByOffset(a,t);this._moveToClosestAvailableDate(s)},_navigateUp:function(){var e=this.option("zoomLevel"),t=f.getViewUp(e);!t||this._isMinZoomLevel(e)||(this.option("zoomLevel",t),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(e){var t=this._getMinDate(),i=this._getMaxDate();return f.sameView(e,t,i)||this.option("minZoomLevel")===e},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!p(this._afterView)),this._navigator.toggleButton("prev",!p(this._beforeView))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),lt,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(e){z.stop(this._$viewsWrapper,!0);var{viewsCount:t}=this.option();this._toggleGestureCoverCursor("grabbing"),e.event.maxLeftOffset=this._getRequiredView("next")?1/t:0,e.event.maxRightOffset=this._getRequiredView("prev")?1/t:0},_toggleGestureCoverCursor:function(e){u(".".concat(dl)).css("cursor",e)},_getRequiredView:function(e){var t,i=this.option("rtlEnabled");return e==="next"?t=i?this._beforeView:this._afterView:e==="prev"&&(t=i?this._afterView:this._beforeView),t},_swipeUpdateHandler:function(e){var t=e.event.offset;ye(this._$viewsWrapper,{left:t*this._viewWidth(),top:0}),this._updateNavigatorCaption(t)},_swipeEndHandler:function(e){this._toggleGestureCoverCursor("auto");var{currentDate:t,rtlEnabled:i}=this.option(),a=e.event.targetOffset,n=a?a/Math.abs(a):0,r=this._isAdditionalViewDate(t),s=r&&(i?n===-1:n===1);if(n===0){this._animateWrapper(0,Qe);return}var o=-n*this._getRtlCorrection()*(s?2:1),l=this._getDateByOffset(o);this._isDateInInvalidRange(l)&&(n>=0?l=new Date(this._getMinDate()):l=new Date(this._getMaxDate())),this.option("currentDate",l)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=oe(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption:function(e){e*=this._getRtlCorrection();var t=this.option("viewsCount")>1,i,a;e>.5&&this._beforeView?(i=this._beforeView,a=t&&this._view):e<-.5&&this._afterView?(i=t?this._additionalView:this._afterView,a=t?this._afterView:null):(i=this._view,a=t?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(i,a))},_getViewsCaption:function(e,t){var i=e.getNavigatorCaption(),{viewsCount:a}=this.option();if(a>1&&t){var n=t.getNavigatorCaption();i="".concat(i," - ").concat(n)}return i},_isDateInInvalidRange:function(e){if(!this._view.isBoundary(e)){var t=this._getMinDate(),i=this._getMaxDate(),a=f.normalizeDate(e,t,i);return a===t||a===i}},_renderFooter:function(){var e=this.option("showTodayButton");if(e){var t=this._createComponent(u("<div>"),Se,{focusStateEnabled:this.option("focusStateEnabled"),text:x.format("dxCalendar-todayButtonText"),onClick:i=>{this._toTodayView(i)},type:"default",stylingMode:"text",integrationOptions:{}}).$element().addClass(nl);this._$footer=u("<div>").addClass(al).append(t),this.$element().append(this._$footer)}this.$element().toggleClass(rl,e)},_renderSubmitElement:function(){this._$submitElement=u("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(e){var t=this._convertToDate(e);this._getSubmitElement().val(B.serializeDate(t,hl))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){z.stop(this._view.$element(),!0),this._popAnimationView(this._view,aa,na,Qe),this.option("viewsCount")>1&&(z.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,aa,na,Qe))},_popAnimationView:function(e,t,i,a){return z.animate(e.$element(),{type:"pop",from:{scale:t,opacity:t},to:{scale:i,opacity:i},duration:a})},_navigate:function(e,t){if(e!==0&&Math.abs(e)!==1&&this._isViewAvailable(t)){var i=this._renderSpecificView(t);e>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=i):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=i),this._translateViews()}var a=this._getRtlCorrection(),n=e>0?1:e<0?-1:0,r=-a*n*this._viewWidth(),s=this._$viewsWrapper.position().left;s!==r&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(e,t):this._animateWrapper(r,Qe).done(this._wrapperAnimationEndHandler.bind(this,e,t)))},_animateWrapper:function(e,t){return z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:e},duration:t})},_getDate:e=>new Date(e),_toTodayView:function(e){var t=new Date;if(this._isMaxZoomLevel()){this._selectionStrategy.selectValue(t,e.event);return}this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(t,e.event),this._animateShowView(),this._preventViewChangeAnimation=!1},_wrapperAnimationEndHandler:function(e,t){this._rearrangeViews(e),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(t),this._updateAriaId(t),this._selectionStrategy.updateAriaSelected()},_rearrangeViews:function(e){var t;if(e!==0){var{viewsCount:i}=this.option(),a,n,r,s,o;if(e<0?(a=1,n="_beforeView",r="_afterView",s="_view",o=i===1?"_view":"_additionalView"):(a=-1,n="_afterView",r="_beforeView",s=i===1?"_view":"_additionalView",o="_view"),!!this[n]){var l=this[n].option("date");(t=this[r])===null||t===void 0||t.$element().remove(),this[r]=this._renderSpecificView(this._getDateByOffset(a*i,l)),this[o].$element().remove(),i===1?this[o]=this[n]:(this[o]=this[s],this[s]=this[n]);var d=this._getDateByOffset(-a,l);this[n]=this._isViewAvailable(d)?this._renderSpecificView(d):null}}},_resetLocation:function(){ye(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_focusInHandler:function(){this.callBase.apply(this,arguments),this._setViewContoured(this.option("currentDate"))},_focusOutHandler:function(){var e;this.callBase.apply(this,arguments),this._view.option("contouredDate",null),(e=this._additionalView)===null||e===void 0||e.option("contouredDate",null)},_updateViewsOption:function(e,t){var i,a,n;this._view.option(e,t),(i=this._additionalView)===null||i===void 0||i.option(e,t),(a=this._beforeView)===null||a===void 0||a.option(e,t),(n=this._afterView)===null||n===void 0||n.option(e,t)},_setViewsMinOption:function(e){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(e)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption:function(e){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(e)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions:function(){this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateAriaSelected:function(e,t){t.forEach(i=>{this.setAria("selected",void 0,this._view._getCellByDate(i))}),e.forEach(i=>{this.setAria("selected",!0,this._view._getCellByDate(i))}),this.option("viewsCount")>1&&(t.forEach(i=>{this.setAria("selected",void 0,this._additionalView._getCellByDate(i))}),e.forEach(i=>{this.setAria("selected",!0,this._additionalView._getCellByDate(i))}))},_updateAriaId:function(e){var t;e=(t=e)!==null&&t!==void 0?t:this.option("currentDate");var i="dx-"+new Q,a=this._getActiveView(e),n=a._getCellByDate(e);this.setAria("id",i,n),this.setAria("activedescendant",i),this._onContouredChanged(i)},_suppressingNavigation:function(e,t){this._suppressNavigation=!0,e.apply(this,t),delete this._suppressNavigation},_optionChanged:function(e){var{value:t,previousValue:i}=e;switch(e.name){case"width":this.callBase(e),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(i)),this._updateCurrentDate(t);break;case"zoomLevel":this.$element().removeClass(ia+"-"+i),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this.option("selectionMode")==="single"&&this._selectionStrategy.processValueChanged([t],[i]),this._setSubmitValue(t),this.callBase(e);break;case"values":this.option("selectionMode")!=="single"&&this._selectionStrategy.processValueChanged(t,i),this._raiseValueChangeAction(t,i),this._saveValueChangeEvent(void 0);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",t);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"skipFocusCheck":break;case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;default:this.callBase(e)}},getContouredDate:function(){return this._view.option("contouredDate")}});V("dxCalendar",An);var Je=dt.abstract,ft=dt.inherit({ctor:function(e){this.dateBox=e},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(e){e=e||u("<div>"),this._widget=this._createWidget(e),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(e){var t=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(e,t,i)},_getWidgetOptions:Je,_getWidgetName:Je,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:Je,supportedKeys:D,getKeyboardListener:D,customizeButtons:D,getParsedText:function(e,t){var i=C.parse(e,t);return i||C.parse(e)},renderInputMinMax:D,renderOpenedState:function(){this._updateValue()},popupConfig:Je,_dimensionChanged:function(){var e;(e=this._getPopup())===null||e===void 0||e.repaint()},renderPopupContent:function(){var e=this._getPopup();this._renderWidget();var t=e.$content().parent();v.off(t,"mousedown"),v.on(t,"mousedown",this._preventFocusOnPopup.bind(this))},getFirstPopupElement:D,getLastPopupElement:D,_preventFocusOnPopup:function(e){e.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:D,popupHiddenHandler:D,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:D,getDefaultDate:function(){return new Date},textChangedHandler:D,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var e=this._getPopup();e&&e.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}),Bn=ft.inherit({NAME:"Calendar",getDefaultOptions:function(){return c(this.callBase(),{todayButtonText:x.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var e=function(t){return this.option("opened")?(t.preventDefault(),!0):!1};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:(function(t){if(this.dateBox.option("opened"))if(t.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var i=this._getContouredValue(),a=this._lastActionElement,n=this._closeDropDownByEnter();return n&&i&&a==="calendar"&&this.dateBoxValue(i,t),n&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(t),!n}else return!0;else this.dateBox._valueChangeEventHandler(t)}).bind(this),home:e,end:e}},getDisplayFormat:function(e){return e||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return An},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var e=this.dateBox.option("disabledDates");return c(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),tabIndex:null,disabledDates:K(e)?this._injectComponent(e.bind(this.dateBox)):e,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(e){var t=this;return function(i){return c(i,{component:t.dateBox}),e(i)}},_refreshActiveDescendant:function(e){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",e.actionValue)},_getTodayButtonConfig(){var e=this.dateBox.option("buttonsLocation"),t=e==="default",i=t?["bottom","center"]:Ha(e);return{widget:"dxButton",toolbar:i[0],location:i[1]==="after"?"before":i[1],options:{onInitialized:(function(a){a.component.registerKeyHandler("escape",this._escapeHandler.bind(this))}).bind(this),onClick:a=>{this._widget._toTodayView(a)},text:this.dateBox.option("todayButtonText"),type:"today"}}},_isCalendarVisible:function(){var{calendarOptions:e}=this.dateBox.option();return Pe(e)||e.visible!==!1},_getPopupToolbarItems(e){var t=this.dateBox.option("applyValueMode")==="useButtons",i=t&&this._isCalendarVisible();if(i){var a=this._getTodayButtonConfig();return[a,...e]}return e},popupConfig:function(e){return c(!0,e,{position:{collision:"flipfit flip"},width:"auto"})},_escapeHandler:function(){this.dateBox.close(),this.dateBox.focus()},_valueChangedHandler:function(e){var t=e.value,i=e.previousValue;f.sameDate(t,i)&&f.sameHoursAndMinutes(t,i)||this.dateBox.option("applyValueMode")==="instantly"&&this.dateBoxValue(this.getValue(),e.event)},_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(e){var t=this.dateBox;t.option("applyValueMode")==="instantly"&&(t.option("opened",!1),this.dateBoxValue(this.getValue(),e.event))}});class fl{constructor(t){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=t??Ii}get isHorizontal(){return this.direction===Yr||this.direction===Tt}get isVertical(){return this.direction===Ii||this.direction===Tt}get isBoth(){return this.direction===Tt}}function vl(e,t){if($e(e)){var i=k(e.left,e.x),a=k(e.top,e.y);return{left:p(i)?i:void 0,top:p(a)?a:void 0}}var{isHorizontal:n,isVertical:r}=new fl(t);return{left:n&&p(e)?e:void 0,top:r&&p(e)?e:void 0}}var ml="dx-dateviewroller",gl="dx-state-active",Cl="dx-dateviewroller-current",sa="dx-dateview-item",Dl="dx-dateview-item-selected",yl="dx-dateview-item-selected-frame",Sl="dx-dateview-item-selected-border";class Vn extends oi{_getDefaultOptions(){return c(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass(ml),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){v.on(u(this.container()),"dxmousewheel",t=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(this.option("showOnClick")){var t=b(Ie,this.NAME),i=this._createActionByOption("onClick");v.off(u(this.container()),t),v.on(u(this.container()),t,function(a){i({event:a})})}}_renderItems(){var t=this.option("items")||[],i=u();u(this.content()).empty(),t.forEach(function(a){i=i.add(u("<div>").addClass(sa).append(a))}),u(this.content()).append(i),this._$items=i,this.update()}_renderSelectedItemFrame(){u("<div>").addClass(yl).append(u("<div>").addClass(Sl)).appendTo(u(this.container()))}_renderSelectedValue(t){var i=this._fitIndex(t??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(i)}),this._renderActiveStateItem()}_fitIndex(t){var i=this.option("items")||[],a=i.length;return t>=a?a-1:t<0?0:t}_getItemPosition(t){return Math.round(this._itemHeight()*t)}_renderItemsClick(){var t=this._getItemSelector(),i=b(Ie,this.NAME);v.off(this.$element(),i,t),v.on(this.$element(),i,t,this._itemClickHandler.bind(this))}_getItemSelector(){return"."+sa}_itemClickHandler(t){this.option("selectedIndex",this._itemElementIndex(t.currentTarget))}_itemElementIndex(t){return this._itemElements().index(t)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var t=this.option("selectedIndex");g(this._$items,function(i){u(this).toggleClass(Dl,t===i)})}_shouldScrollToNeighborItem(){return T.real().deviceType==="desktop"&&this._isWheelScrolled}_moveTo(t){var{top:i,left:a}=vl(t),n=this.scrollOffset(),r={x:n.left-a,y:n.top-i};if(this._isVisible()&&(r.x||r.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;z.stop(u(this.content())),z.animate(u(this.content()),{duration:200,type:"slide",to:{top:Math.floor(r.y)},complete(){Sr(u(s.content())),s.handleMove({delta:r})}}),delete this._animation}else this.handleMove({delta:r})}_validate(t){return this._moveIsAllowed(t)}_fitSelectedIndexInRange(t){var i=this.option("items").length;return Math.max(Math.min(t,i-1),0)}_isInNullNeighborhood(t){return-.1<=t&&t<=.1}_getSelectedIndexAfterScroll(t){var i=this.scrollOffset().top,a=t*this._itemHeight(),n=i-a;if(this._isInNullNeighborhood(n))return t;var r=n>0?1:-1,s=this._fitSelectedIndexInRange(t+r);return s}_getNewSelectedIndex(t){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(t);this._animation=!0;var i=this.scrollOffset().top/this._itemHeight();return Math.round(i)}_endActionHandler(){var t=this.option("selectedIndex"),i=this._getNewSelectedIndex(t);i===t?this._renderSelectedValue(i):this.option("selectedIndex",i),this._isWheelScrolled=!1}_itemHeight(){var t=this._$items.first();return Ya(t)}_toggleActive(t){this.$element().toggleClass(gl,t)}_isVisible(){return u(this.container()).is(":visible")}_fireSelectedIndexChanged(t,i){this._selectedIndexChanged({value:t,previousValue:i,event:void 0})}_visibilityChanged(t){super._visibilityChanged(t),this._visibilityChangedHandler(t)}_visibilityChangedHandler(t){t&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(t){this.$element().toggleClass(Cl,t)}_refreshSelectedIndex(){var t=this.option("selectedIndex"),i=this._fitIndex(t);i===t?this._renderActiveStateItem():this.option("selectedIndex",i)}_optionChanged(t){switch(t.name){case"selectedIndex":this._fireSelectedIndexChanged(t.value,t.previousValue),this._renderSelectedValue(t.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(t)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}V("dxDateViewRoller",Vn);var kt="dx-dateview",bl="dx-dateview-compact",Il="dx-dateview-wrapper",Tl="dx-dateview-rollers",El="dx-dateviewroller",oa={date:"date",datetime:"datetime",time:"time"},P={year:"year",month:"month",day:"day",hours:"hours"},On=ct.inherit({_valueOption:function(){var e=this.option("value"),t=new Date(e);return!e||isNaN(t)?this._getDefaultDate():t},_getDefaultDate:function(){var e=new Date;return this.option("type")===oa.date?new Date(e.getFullYear(),e.getMonth(),e.getDate()):e},_getDefaultOptions:function(){return c(this.callBase(),{minDate:y.MIN_DATEVIEW_DEFAULT_DATE,maxDate:y.MAX_DATEVIEW_DEFAULT_DATE,type:oa.date,value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){return e.deviceType!=="desktop"},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass(kt),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(e,t){this.$element().addClass(kt+"-"+e),t&&this.$element().removeClass(kt+"-"+t)},_toggleCompactClass:function(){this.$element().toggleClass(bl,this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=u("<div>").addClass(Il),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=u("<div>").addClass(Tl)),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var e=this;g(e._rollerConfigs,function(t){var i=u("<div>").appendTo(e._$rollersContainer).addClass(El+"-"+e._rollerConfigs[t].type);e._rollers[e._rollerConfigs[t].type]=e._createComponent(i,Vn,{items:e._rollerConfigs[t].displayItems,selectedIndex:e._rollerConfigs[t].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(a){var n=a.component;n._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t],n.option("selectedIndex"))},onEnd:function(a){var n=a.component;n._toggleActive(!1)},onClick:function(a){var n=a.component;n._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t],n.option("selectedIndex")),e._setRollerState(e._rollerConfigs[t],n.option("selectedIndex")),n._toggleActive(!1)},onSelectedIndexChanged:function(a){var n=a.component;e._setRollerState(e._rollerConfigs[t],n.option("selectedIndex"))}})}),e._$rollersContainer.appendTo(e._wrapper())},_createRollerConfigs:function(e){var t=this;e=e||t.option("type"),t._rollerConfigs={},C.getFormatParts(y.FORMATS_MAP[e]).forEach(function(i){t._createRollerConfig(i)})},_createRollerConfig:function(e){for(var t=y.DATE_COMPONENTS_INFO[e],i=this._calculateRollerConfigValueRange(e),a=i.startValue,n=i.endValue,r=t.formatter,s=this._getCurrentDate(),o={type:e,setValue:t.setter,valueItems:[],displayItems:[],getIndex:function(d){return d[t.getter]()-a}},l=a;l<=n;l++)o.valueItems.push(l),o.displayItems.push(r(l,s));o.selectedIndex=o.getIndex(s),this._rollerConfigs[e]=o},_setActiveRoller:function(e){var t=e&&this._rollers[e.type];g(this._rollers,function(){this.toggleActiveState(this===t)})},_updateRollersPosition:function(){var e=this;g(this._rollers,function(t){var i=e._rollerConfigs[t].getIndex(e._getCurrentDate());this.option("selectedIndex",i)})},_setRollerState:function(e,t){if(t!==e.selectedIndex){var i=e.valueItems[t],a=e.setValue,n=new Date(this._getCurrentDate()),r=n.getDate(),s=this.option("minDate"),o=this.option("maxDate");e.type===P.month?r=Math.min(r,y.getMaxMonthDay(n.getFullYear(),i)):e.type===P.year&&(r=Math.min(r,y.getMaxMonthDay(i,n.getMonth()))),n.setDate(r),n[a](i);var l=f.normalizeDate(n,s,o);n=y.mergeDates(l,n,"time"),n=f.normalizeDate(n,s,o),this.option("value",n),e.selectedIndex=t}e.type===P.year&&this._refreshRollers(),e.type===P.month&&(this._refreshRoller(P.day),this._refreshRoller(P.hours))},_refreshRoller:function(e){var t=this._rollers[e];if(t){this._createRollerConfig(e);var i=this._rollerConfigs[e];(e===P.day||i.displayItems.toString()!==t.option("items").toString())&&t.option({items:i.displayItems,selectedIndex:i.selectedIndex})}},_getCurrentDate:function(){var e=this._valueOption(),t=this.option("minDate"),i=this.option("maxDate");return f.normalizeDate(e,t,i)},_calculateRollerConfigValueRange:function(e){var t=this._getCurrentDate(),i=this.option("minDate"),a=this.option("maxDate"),n=f.sameYear(t,i),r=n&&t.getMonth()===i.getMonth(),s=f.sameYear(t,a),o=s&&t.getMonth()===a.getMonth(),l=r&&t.getDate()===i.getDate(),d=o&&t.getDate()===a.getDate(),h=y.DATE_COMPONENTS_INFO[e],_=h.startValue,m=h.endValue;return e===P.year&&(_=i.getFullYear(),m=a.getFullYear()),e===P.month&&(n&&(_=i.getMonth()),s&&(m=a.getMonth())),e===P.day&&(m=y.getMaxMonthDay(t.getFullYear(),t.getMonth()),n&&r&&(_=i.getDate()),s&&o&&(m=a.getDate())),e===P.hours&&(_=l?i.getHours():_,m=d?a.getHours():m),{startValue:_,endValue:m}},_refreshRollers:function(){this._refreshRoller(P.month),this._refreshRoller(P.day),this._refreshRoller(P.hours)},_optionChanged:function(e){switch(e.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(e.value,e.previousValue);break;case"visible":this.callBase(e),e.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(e)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});V("dxDateView",On);var xl=Te(),wl=ft.inherit({NAME:"DateView",getDefaultOptions:function(){return c(this.callBase(),{openOnFieldClick:!0,applyButtonText:x.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(e){return e||y.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(e){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:e.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(t){var i=t.platform;return i==="generic"||i==="ios"},options:{width:"auto",height:"auto"}},{device:function(t){var i=t.platform,a=t.phone;return i==="generic"&&a},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:xl}}}]}},_renderWidget:function(){if(si(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly")){this._widget&&(this._widget.$element().remove(),this._widget=null);return}var e=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var t=u("<div>").appendTo(e.$content());this._widget=this._createWidget(t)}this._widget.$element().appendTo(this._getWidgetContainer())},_getWidgetName:function(){return On},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*y.ONE_YEAR),onDisposing:(function(){this._widget=null}).bind(this)}}}),Al=ft.inherit({NAME:"Native",popupConfig:function(e){return c({},e,{width:"auto"})},getParsedText:function(e){return e?this.dateBox.option("type")==="datetime"?new Date(e.replace(/-/g,"/").replace("T"," ").split(".")[0]):y.fromStandardDateFormat(e):null},renderPopupContent:D,_getWidgetName:D,_getWidgetOptions:D,_getDateBoxType:function(){var e=this.dateBox.option("type");return y.SUPPORTED_FORMATS.includes(e)?e==="datetime"&&!si(e)&&(e="datetime-local"):e="date",e},customizeButtons:function(){var e=this.dateBox.getButton("dropDown");T.real().android&&e&&e.on("click",(function(){this.dateBox._input().get(0).click()}).bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(e){var t=this._getDateBoxType();return e||y.FORMATS_MAP[t]},renderInputMinMax:function(e){e.attr({min:B.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:B.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}}),Bl="dx-box",Vl="dx-box-flex",Ol="dx-box-item",Mn="dxBoxItemData",Ml=1,Ll={row:"minWidth",col:"minHeight"},Rl={row:"maxWidth",col:"maxHeight"},la={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},ua={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},kl={row:"row",col:"column"},ge=(e,t,i)=>{if(i=br(t,i),e.style[Ir(t)]=i,!F()){if(i===""||!p(i))return;var a=lr(t),n=a+": "+i+";";Tr(e,n,!1)}};class Fl extends li{_renderVisible(t,i){super._renderVisible(t),p(i)&&this._options.fireItemStateChangedAction({name:"visible",state:t,oldState:i})}}class Nl{constructor(t,i){this._$element=t,this._option=i}renderBox(){this._$element.css({display:bt("flexDirection")+"flex"}),ge(this._$element.get(0),"flexDirection",kl[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var t=this._option("align");return t in la?la[t]:t}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var t=this._option("crossAlign");return t in ua?ua[t]:t}renderItems(t){var i=bt("flexDirection"),a=this._option("direction");g(t,function(){var n=u(this),r=n.data(Mn);n.css({display:i+"flex"}).css(Rl[a],r.maxSize||"none").css(Ll[a],r.minSize||"0"),ge(n.get(0),"flexBasis",r.baseSize||0),ge(n.get(0),"flexGrow",r.ratio),ge(n.get(0),"flexShrink",p(r.shrink)?r.shrink:Ml),n.children().each((s,o)=>{u(o).css({width:"auto",height:"auto",display:bt("flexDirection")+"flex",flexBasis:0}),ge(o,"flexGrow",1),ge(o,"flexDirection",u(o)[0].style.flexDirection||"column")})})}}class J extends ui{_getDefaultOptions(){return c(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return Ol}_itemDataKey(){return Mn}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass(Vl),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new Nl(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return this.option("_queue")?!1:!!this._queue.length}_pushItemToQueue(t,i){this._queue.push({$item:t,config:i})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass(Bl),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(t){for(super._renderItems(t);this._queueIsNotEmpty();){var i=this._shiftItemFromQueue();this._createComponent(i.$item,J,c({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},i.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(t){var i=t.itemData&&t.itemData.node;return i?this._renderItemContentByNode(t,i):super._renderItemContent(t)}_postprocessRenderItem(t){var i=t.itemData.box;i&&this._pushItemToQueue(t.itemContent,i)}_createItemByTemplate(t,i){return i.itemData.box?t.source?t.source():u():super._createItemByTemplate(t,i)}_itemOptionChanged(t,i,a,n){i==="visible"&&this._onItemStateChanged({name:i,state:a,oldState:n!==!1}),super._itemOptionChanged(t,i,a)}_optionChanged(t){switch(t.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(t)}}_itemOptions(){var t=super._itemOptions();return t.fireItemStateChangedAction=i=>{this._onItemStateChanged(i)},t}}J.ItemClass=Fl;V("dxBox",J);const oh=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));var Pl="dx-timeview",$l="dx-timeview-clock",Hl="dx-timeview-field",Wl="dx-timeview-hourarrow",zl="dx-timeview-time-separator",Gl="dx-timeview-format12",Ft=-1,Nt=1,Ul="dx-timeview-minutearrow",da=function(e,t,i){Yl(e,t,i)},Yl=function(e,t,i){e.css("transform","rotate("+t+"deg) translate(0,"+i+"px)")},Ln=ct.inherit({_getDefaultOptions:function(){return c(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass(Pl)},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var e=u("<div>").appendTo(this.$element()),t=[];this.option("_showClock")&&t.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),t.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(e,J,{height:"100%",width:"100%",direction:"col",items:t})},_renderClock:function(e,t,i){this._$hourArrow=u("<div>").addClass(Wl),this._$minuteArrow=u("<div>").addClass(Ul);var a=u(i);a.addClass($l).append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",a)},_updateClock:function(){var e=this._getValue(),t=e.getHours()/12*360+e.getMinutes()/60*30,i=e.getMinutes()/60*360;da(this._$hourArrow,t,this.option("_arrowOffset")),da(this._$minuteArrow,i,this.option("_arrowOffset"))},_getBoxItems:function(e){var t=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:u("<div>").addClass(zl).text(C.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return e&&t.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),t},_renderField:function(){var e=!this.option("use24HourFormat");return this._createHourBox(e),this._createMinuteBox(),e&&this._createFormat12Box(),this._createComponent(u("<div>").addClass(Hl),J,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(e)}).$element()},_createHourBox:function(e){var t=this._hourBox=this._createComponent(u("<div>"),Zt,c({min:-1,max:e?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:i=>this._keyboardHandler(i)},this._getNumberBoxConfig()));t.setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&this._format12.option("value")===1},_onHourBoxValueChanged:function(e){var{value:t,component:i}=e,a=this._getValue(),n=new Date(a),r=this._convertMaxHourToMin(t);i.option("value",r),this._isPM()&&(r+=12),n.setHours(r),y.normalizeTime(n),this.option("value",n)},_convertMaxHourToMin:function(e){var t=this.option("use24HourFormat")?24:12;return(t+e)%t},_createMinuteBox:function(){var e=this._minuteBox=this._createComponent(u("<div>"),Zt,c({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{var{value:i,component:a}=t,n=(60+i)%60;a.option("value",n);var r=new Date(this._getValue());r.setMinutes(n),y.normalizeTime(r),this.option("value",r)}},this._getNumberBoxConfig()));e.setAria("label","minutes")},_createFormat12Box:function(){var e=C.getPeriodNames(),t=this._format12=this._createComponent(u("<div>").addClass(Gl),hi,{items:[{value:Ft,text:e[0]},{value:Nt,text:e[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:i=>this._keyboardHandler(i),onValueChanged:i=>{var{value:a}=i,n=this._getValue().getHours(),r=new Date(this._getValue()),s=(n+12*a)%24;r.setHours(s),this.option("value",r)},value:this._getValue().getHours()>=12?Nt:Ft,stylingMode:this.option("stylingMode")});t.setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var e=this._getValue(),t=e.getHours(),i=t>=12,a=i?Nt:Ft;this._silentEditorValueUpdate(this._format12,a)}},_silentEditorValueUpdate:function(e,t){e&&(e._suppressValueChangeAction(),e.option("value",t),e._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(e){return(e<10?"0":"")+e},stylingMode:this.option("stylingMode")}},_normalizeHours:function(e){return this.option("use24HourFormat")?e:e%12||12},_updateField:function(){var e=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,e),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(e){e&&this._updateTime()},_optionChanged:function(e){switch(e.name){case"value":this._updateTime(),this.callBase(e);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(e)}}});V("dxTimeView",Ln);var Kl=Te(),ql=573,jl="dx-datebox-adaptivity-mode",ha="dx-datebox-datetime-time-side",Zl=Bn.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return c(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return f.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(e){return e||"shortdateshorttime"},_is24HourFormat:function(){return C.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var e=this.callBase();return this._updateDateTime(e)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent(u("<div>"),Ln,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")}),this._timeView.registerKeyHandler("escape",this._escapeHandler.bind(this))},renderOpenedState:function(){this.callBase();var e=this._getPopup();e&&e.$wrapper().toggleClass(jl,this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout((function(){this._getPopup()&&this._getPopup().repaint()}).bind(this),0)},isAdaptivityChanged:function(){var e=this._isShrinkView(),t=this._currentAdaptiveMode;return e!==t?(this._currentAdaptiveMode=e,t!==void 0):this.callBase()},_updateValue:function(e){var t=this.dateBoxValue();!t&&!e&&(t=new Date,y.normalizeTime(t)),this.callBase(),this._timeView&&(t&&this._timeView.option("value",t),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return oe(Kl)<=ql},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var e=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||e.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),e},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var e=this._getPopup().$content();this._box=this.dateBox._createComponent(u("<div>").appendTo(e),J,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:(function(t,i,a){var n=u("<div>");switch(t.name){case"calendar":n.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(ha),n.append(this._timeView.$element()));break;case"time":n.append(this._timeView.$element()),u(a).addClass(ha)}return n}).bind(this)}),this._attachTabHandler()},popupConfig:function(e){var t=this.callBase(e);return c(t,{width:"auto"})},getFirstPopupElement:function(){return this._timeView._hourBox.$element().find("input")},_attachTabHandler:function(){var e=this.dateBox;this._timeView._hourBox.registerKeyHandler("tab",function(t){t.shiftKey&&(t.preventDefault(),e.focus())})},_preventFocusOnPopup:function(e){u(e.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(e){var t=this._timeView.option("value");return e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e},getValue:function(){var e,t=(e=this._widget.option("value"))!==null&&e!==void 0?e:this._widget.getContouredDate();return t=t?new Date(t):new Date,this._updateDateTime(t)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}}),Xl=Te(),Ql="date",Jl={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},eu=ft.inherit({NAME:"List",supportedKeys:function(){return{tab:function(){var{opened:e,applyValueMode:t}=this.option();e&&t==="instantly"&&this.close()},space:D,home:D,end:D}},getDefaultOptions:function(){return c(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(e){return e||"shorttime"},popupConfig:function(e){return e},getValue:function(){var e=this._widget.option("selectedIndex");if(e===-1)return this.dateBox.option("value");var t=this._widgetItems[e];return this._getDateByItemData(t)},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return en},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(e){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",e.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var e=this.dateBoxValue(),t=this._getDateIndex(e);t===-1?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",t)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(e){for(var t=-1,i=0,a=this._widgetItems.length;i<a;i++)if(this._areDatesEqual(e,this._widgetItems[i])){t=i;break}return t},_areDatesEqual:function(e,t){return X(e)&&X(t)&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()},_getTimeListItems:function(){var e=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),t=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null,a=t-e,n=e.getMinutes()%this.dateBox.option("interval");return a<0?[]:(a>y.ONE_DAY&&(a=y.ONE_DAY),i-e<y.ONE_DAY?this._getRangeItems(e,new Date(e),a):(e=this._getBoundaryDate("min"),e.setMinutes(n),i&&Math.abs(i-t)<y.ONE_DAY&&(a=(60*t.getHours()+Math.abs(t.getMinutes()-n))*y.ONE_MINUTE),this._getRangeItems(e,new Date(e),a)))},_getRangeItems:function(e,t,i){for(var a=[],n=this.dateBox.option("interval");t-e<=i;)a.push(new Date(t)),t.setMinutes(t.getMinutes()+n);return a},_getBoundaryDate:function(e){var t=Jl[e],i=new Date(k(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.getHours(),t.getMinutes())},_timeListItemTemplate:function(e){var t=this.dateBox.option("displayFormat");return C.format(e,this.getDisplayFormat(t))},_listItemClickHandler:function(e){if(this.dateBox.option("applyValueMode")!=="useButtons"){var t=this._getDateByItemData(e.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(t,e.event)}},_getDateByItemData:function(e){var t=this.dateBox.option("value"),i=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),r=e.getFullYear(),s=e.getMonth(),o=e.getDate();return t?(this.dateBox.option("dateSerializationFormat")?t=B.deserializeDate(t):t=new Date(t),t.setHours(i),t.setMinutes(a),t.setSeconds(n),t.setFullYear(r),t.setMonth(s),t.setDate(o)):t=new Date(r,s,o,i,a,0,0),t},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var e=bn(this.dateBox.option("dropDownOptions.height"));if(e===void 0||e==="auto"){this.dateBox._setPopupOption("height","auto");var t=Ne(this._widget.$element()),i=.45*Ya(Xl);this.dateBox._setPopupOption("height",Math.min(t,i))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(e,t){var i=this.callBase(e,t);return i&&(i=y.mergeDates(i,new Date(null),Ql)),i}}),Oe=Te(),Me="dx-datebox",tu="dx-auto-width",iu="dx-show-invalid-badge",au="dx-clear-button-area",et="dx-datebox-wrapper",nu="dx-dropdowneditor-overlay",W={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Y={date:"date",datetime:"datetime",time:"time"},Le={calendar:"Calendar",dateView:"DateView",native:"Native",calendarWithTime:"CalendarWithTime",list:"List"},ru={Calendar:Bn,DateView:wl,Native:Al,CalendarWithTime:Zl,List:eu},su=di.inherit({_supportedKeys:function(){return c(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return c(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:W.calendar,invalidDateMessage:x.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:x.format("validation-range"),applyButtonText:x.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var e=T.real(),t=e.platform;return t==="ios"||t==="android"},options:{pickerType:W.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(e){this._userOptions=c({},e),this.callBase(e),this._updatePickerOptions()},_updatePickerOptions:function(){var e=this.option("pickerType"),t=this.option("type");e===W.list&&(t===Y.datetime||t===Y.date)&&(e=W.calendar),t===Y.time&&e===W.calendar&&(e=W.list),this.option("showDropDownButton",T.real().platform!=="generic"||e!==W.native),this._pickerType=e},_init:function(){this._initStrategy(),this.option(c({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.substr(1)},_initStrategy:function(){var e=this._getStrategyName(this._getFormatType()),t=ru[e];this._strategy&&this._strategy.NAME===e||(this._strategy=new t(this))},_getFormatType:function(){var e=this.option("type"),t=/h|m|s/g.test(e),i=/d|M|Y/g.test(e),a="";return i&&(a+=Y.date),t&&(a+=Y.time),a},_getStrategyName:function(e){var t=this._pickerType;return t===W.rollers?Le.dateView:t===W.native?Le.native:e===Y.date?Le.calendar:e===Y.datetime?Le.calendarWithTime:Le.list},_initMarkup:function(){this.$element().addClass(Me),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass(tu,!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged:function(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight:function(){if(this._popup){var e,t;(e=(t=this._strategy)._updatePopupHeight)===null||e===void 0||e.call(t)}},_refreshFormatClass:function(){var e=this.$element();g(Y,function(t,i){e.removeClass(Me+"-"+i)}),e.addClass(Me+"-"+this.option("type"))},_refreshPickerTypeClass:function(){var e=this.$element();g(W,function(t,i){e.removeClass(Me+"-"+i)}),e.addClass(Me+"-"+this._pickerType)},_formatValidationIcon:function(){if(F()){var e=this._input().get(0),t=this.option("rtlEnabled"),i=this._getClearButtonWidth(),a=this._getLongestElementDimensions(),n=parseFloat(Oe.getComputedStyle(e).width)-i,r=a.width>n,s=e.style;this.$element().toggleClass(iu,!r&&this.option("_showValidationIcon")),r?(this._storedPadding===void 0&&(this._storedPadding=t?a.leftPadding:a.rightPadding),t?s.paddingLeft=0:s.paddingRight=0):t?s.paddingLeft=this._storedPadding+"px":s.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var e=0;if(this._isClearButtonVisible()&&this._input().val()===""){var t=this.$element().find("."+au).get(0);e=parseFloat(Oe.getComputedStyle(t).width)}return e},_getLongestElementDimensions:function(){var e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=C.format(y.getLongestDate(e,C.getMonthNames(),C.getDayNames()),e),i=this._input(),a=i.get(0),n=Er(i,t),r=this._storedPadding!==void 0,s=r?this._storedPadding:0;n.appendTo(this.$element());var o=parseFloat(Oe.getComputedStyle(n.get(0)).width),l=parseFloat(Oe.getComputedStyle(a).paddingRight),d=parseFloat(Oe.getComputedStyle(a).paddingLeft),h=o+d+l+s;return n.remove(),{width:h,leftPadding:d,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass(et),this._renderPopupWrapper()},_getPopupToolbarItems(){var e,t,i,a=this.callBase();return(e=(t=(i=this._strategy)._getPopupToolbarItems)===null||t===void 0?void 0:t.call(i,a))!==null&&e!==void 0?e:a},_popupConfig:function(){var e=this.callBase();return c(this._strategy.popupConfig(e),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(this._popup){var e=this.$element(),t=c({},Y,W);g(t,(function(i,a){e.removeClass(et+"-"+a)}).bind(this)),this._popup.$wrapper().addClass(et+"-"+this.option("type")).addClass(et+"-"+this._pickerType).addClass(nu)}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_getFirstPopupElement:function(){return this._strategy.getFirstPopupElement()||this.callBase()},_getLastPopupElement:function(){return this._strategy.getLastPopupElement()||this.callBase()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(e){e&&this._formatValidationIcon()},_clearValueHandler:function(e){this.option("text",""),this.callBase(e)},_readOnlyPropValue:function(){if(this._pickerType===W.rollers)return!0;var e=T.real().platform,t=this._isNativeType()&&(e==="ios"||e==="android");return t?this.option("readOnly"):this.callBase()},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var e=this.dateOption("value");return this.option("text",this._getDisplayedText(e)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var e=this.dateOption("value"),t=this.option("dateSerializationFormat"),i=y.SUBMIT_FORMATS_MAP[this.option("type")],a=t?B.serializeDate(e,t):y.toStandardDateFormat(e,i);this._getSubmitElement().val(a)},_getDisplayedText:function(e){var t=this.option("mode"),i;if(t==="text"){var a=this._strategy.getDisplayFormat(this.option("displayFormat"));i=C.format(e,a)}else{var n=this._getFormatByMode(t);n?i=C.format(e,n):i=y.toStandardDateFormat(e,t)}return i},_getFormatByMode:function(e){return si(e)?null:y.FORMATS_MAP[e]},_valueChangeEventHandler:function(e){var{text:t,type:i,validationError:a}=this.option(),n=this.dateOption("value");if(t===this._getDisplayedText(n)){this._recallInternalValidation(n,a);return}var r=this._getParsedDate(t),s=n??this._getDateByDefault(),o=y.mergeDates(s,r,i),l=r&&i==="time"?o:r;if(this._applyInternalValidation(l).isValid){var d=this._getDisplayedText(o);s&&o&&s.getTime()===o.getTime()&&d!==t?this._renderValue():this.dateValue(o,e)}},_recallInternalValidation(e,t){(!t||t.editorSpecific)&&(this._applyInternalValidation(e),this._applyCustomValidation(e))},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(e){var t=this._strategy.getDisplayFormat(this.option("displayFormat")),i=this._strategy.getParsedText(e,t);return i??void 0},_applyInternalValidation(e){var t=this.option("text"),i=!!t&&e!==null,a=!!e&&X(e)&&!isNaN(e.getTime()),n=a&&f.dateInRange(e,this.dateOption("min"),this.dateOption("max"),this.option("type")),r=!i&&!e||n,s="";return a?n||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this._updateInternalValidationState(r,s),{isValid:r,isDate:a}},_updateInternalValidationState(e,t){this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:t}})},_applyCustomValidation:function(e){this.validationRequest.fire({editor:this,value:this._serializeDate(e)})},_isValueChanged:function(e){var t=this.dateOption("value"),i=t&&t.getTime(),a=e&&e.getTime();return i!==a},_isTextChanged:function(e){var t=this.option("text"),i=e&&this._getDisplayedText(e)||"";return t!==i},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var e=this.option("placeholder");if(e)return e;var t=this.option("type");return t===Y.time?x.format("dxDateBox-simulatedDataPickerTitleTime"):t===Y.date||t===Y.datetime?x.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(e){var t=this._strategy.getValue();this.dateValue(t,e.event),this.callBase()},_dispose:function(){var e;this.callBase(),(e=this._strategy)===null||e===void 0||e.dispose()},_isNativeType:function(){return this._pickerType===W.native},_updatePopupTitle:function(){var e;(e=this._popup)===null||e===void 0||e.option("title",this._getPopupTitle())},_optionChanged:function(e){switch(e.name){case"showClearButton":case"buttons":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:e.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:e.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var t=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),t||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(e.value),this.callBase.apply(this,arguments);break;case"isValid":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var e=this.option("value");if(this.option("dateSerializationFormat")&&ut().forceIsoDateParsing)return this.option("dateSerializationFormat");if(be(e))return"number";if(N(e))return B.getDateSerializationFormat(e)},_updateValue:function(e){this.callBase(),this._applyInternalValidation(e??this.dateOption("value"))},dateValue:function(e,t){var i=this._isValueChanged(e);return i&&t&&this._saveValueChangeEvent(t),i||(this._isTextChanged(e)?this._updateValue(e):this.option("text")===""&&this._applyCustomValidation(e)),this.dateOption("value",e)},dateOption:function(e,t){if(arguments.length===1)return B.deserializeDate(this.option(e));this.option(e,this._serializeDate(t))},_serializeDate:function(e){var t=this._getSerializationFormat();return B.serializeDate(e,t)},_clearValue:function(){var e=this.option("value");this.callBase(),e===null&&this._applyCustomValidation(null)},reset:function(){var e=this.option("value");this.callBase(),e===null&&this._applyInternalValidation(null)}}),Ce="dateBoxMask",ie=1,De=-1,ou=su.inherit({_supportedKeys(e){var t=this.callBase(e),i=n=>{var r=t[ne(n)];return r&&r.apply(this,[n])},a=(n,r)=>this._shouldUseOriginalHandler(n)?i.apply(this,[n]):r.apply(this,[n]);return c({},t,{del:n=>a(n,r=>{this._revertPart(ie),this._isAllSelected()||r.preventDefault()}),backspace:n=>a(n,r=>{this._revertPart(De),this._isAllSelected()||r.preventDefault()}),home:n=>a(n,r=>{this._selectFirstPart(),r.preventDefault()}),end:n=>a(n,r=>{this._selectLastPart(),r.preventDefault()}),escape:n=>a(n,r=>{this._revertChanges(r)}),enter:n=>a(n,()=>{this._enterHandler()}),leftArrow:n=>a(n,r=>{this._selectNextPart(De),r.preventDefault()}),rightArrow:n=>a(n,r=>{this._selectNextPart(ie),r.preventDefault()}),upArrow:n=>a(n,r=>{this._upDownArrowHandler(ie),r.preventDefault()}),downArrow:n=>a(n,r=>{this._upDownArrowHandler(De),r.preventDefault()})})},_shouldUseOriginalHandler(e){var t=this.option("opened")&&e&&["backspace","del"].indexOf(ne(e))===-1;return!this._useMaskBehavior()||t||e&&e.altKey},_upDownArrowHandler(e){this._setNewDateIfEmpty();var t=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue(),a=i-t;this._loadMaskValue(this._initialMaskValue),this._partIncrease(a+e,!0)},_getDefaultOptions(){return c(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(e){var{originalEvent:t,alt:i}=e,a=t.data||t.key;return typeof a=="string"&&a.length===1&&!i&&!q(t)},_isSingleDigitKey(e){var t,i=(t=e.originalEvent)===null||t===void 0?void 0:t.data;return(i==null?void 0:i.length)===1&&parseInt(i,10)},_useBeforeInputEvent:function(){return T.real().android},_keyInputHandler(e,t){var i=this._input().val();this._processInputKey(t),e.preventDefault();var a=i!==this._input().val();a&&v.trigger(this._input(),"input")},_keyboardHandler(e){var t=e.originalEvent.key,i=this.callBase(e);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(at.chrome&&e.key==="Process"&&e.code.indexOf("Digit")===0?(t=e.code.replace("Digit",""),this._processInputKey(t),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(e)&&this._keyInputHandler(e.originalEvent,t)),i},_maskBeforeInputHandler(e){this._maskInputHandler=null;var{inputType:t}=e.originalEvent;t==="insertCompositionText"&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var i=t==="deleteContentBackward",a=t==="deleteContentForward";if(i||a){var n=i?De:ie;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(n)}}if(!(!this._useMaskBehavior()||!this._isSingleCharKey(e))){var r=e.originalEvent.data;return this._keyInputHandler(e,r),!0}},_keyPressHandler(e){var{originalEvent:t}=e;(t==null?void 0:t.inputType)==="insertCompositionText"&&this._isSingleDigitKey(e)&&(this._processInputKey(t.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(e),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(e){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(e))?this._searchString(e):this._searchNumber(e)},_isAllSelected(){var e=this._caret();return e.end-e.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=N(e)&&!C._getPatternByFormat(e);return t?this._formatPattern=e:this._formatPattern=ur(function(i){return C.format(i,e)}),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var e=this.option("type")==="time"?new Date(null):new Date;this._maskValue=e,this._initialMaskValue=e,this._renderDateParts()}},_partLimitsReached(e){var t=String(e).length,i=this._getActivePartProp("pattern").length,a=i===1,n=a?t:Math.min(i,t),r=this._searchValue.length===n,s=parseInt(this._searchValue+"0")>e;return r||s},_searchNumber(e){var{max:t}=this._getActivePartLimits(),i=String(t).length;this._searchValue=(this._searchValue+e).substr(-i),isNaN(this._searchValue)&&(this._searchValue=e),this._setActivePartValue(this._searchValue),this._partLimitsReached(t)&&this._selectNextPart(ie)},_searchString(e){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var t=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+e.toLowerCase(),a=t.max-t.min,n=0;n<=a;n++)if(this._loadMaskValue(this._initialMaskValue),this._partIncrease(n+1),this._getActivePartProp("text").toLowerCase().indexOf(i)===0){this._searchValue=i;return}this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(e))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(e){if(!this._isAllSelected()){var t=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(t),this._selectNextPart(e)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&this.option("mode")==="text"},_prepareRegExpInfo(){this._regExpInfo=dr(this._getFormatPattern(),C);var e=this._regExpInfo.regexp,t=e.source,i=e.flags,a=new RegExp(/(\{[0-9]+,?[0-9]*\})/),n=t.split(a).map(r=>a.test(r)?r:E.convertDigits(r,!1)).join("");this._regExpInfo.regexp=new RegExp(n,i)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var e=this.option("text")||this._getDisplayedText(this._maskValue);e&&(this._dateParts=bo(e,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){v.off(this._input(),"."+Ce)},_attachMaskEvents(){v.on(this._input(),b("dxclick",Ce),this._maskClickHandler.bind(this)),v.on(this._input(),b("paste",Ce),this._maskPasteHandler.bind(this)),v.on(this._input(),b("drop",Ce),()=>{this._renderSelectedPart()}),v.on(this._input(),b("compositionend",Ce),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&v.on(this._input(),b("beforeinput",Ce),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(De))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(ie))},_onMouseWheel(e){this._useMaskBehavior()&&this._partIncrease(e.delta>0?ie:De,e)},_selectNextPart(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!(!this.option("text")||this._disposed)){e&&(this._initialMaskValue=new Date(this._maskValue));var t=re(this._activePartIndex+e,0,this._dateParts.length-1);if(this._dateParts[t].isStub){var i=t===0&&e<0||t===this._dateParts.length-1&&e>0;if(i)t=this._activePartIndex;else{this._selectNextPart(e>=0?e+1:e-1);return}}this._activePartIndex!==t&&this._clearSearchValue(),this._activePartIndex=t,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if(this._getActivePartProp("pattern")[0]==="d")return"dM"},_getActivePartLimits(e){var t=this._getActivePartProp("limits");return t(this._maskValue,e&&this._getRealLimitsPattern())},_getActivePartValue(e){e=e||this._maskValue;var t=this._getActivePartProp("getter");return K(t)?t(e):e[t]()},_addLeadingZeroes(e){var t=this._searchValue.match(/^0+/),i=this._getActivePartLimits(),a=String(i.max).length;return((t&&t[0]||"")+String(e)).substr(-a)},_setActivePartValue(e,t){t=t||this._maskValue;var i=this._getActivePartProp("setter"),a=this._getActivePartLimits();e=ce(e,a.min,a.max)?e:e%10,e=this._addLeadingZeroes(re(e,a.min,a.max)),K(i)?i(t,e):t[i](e),this._renderDisplayText(this._getDisplayedText(t)),this._renderDateParts()},_getActivePartProp(e){if(!(!this._dateParts||!this._dateParts[this._activePartIndex]))return this._dateParts[this._activePartIndex][e]},_loadMaskValue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dateOption("value");this._maskValue=e&&new Date(e),this._initialMaskValue=e&&new Date(e)},_saveMaskValue(){var e=this._maskValue&&new Date(this._maskValue);e&&this.option("type")==="date"&&e.setHours(0,0,0,0),this._initialMaskValue=new Date(e),this.dateOption("value",e)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(e){this.callBase(e),this._useMaskBehavior()&&this.option("text",e)},_partIncrease(e,t){this._setNewDateIfEmpty();var{max:i,min:a}=this._getActivePartLimits(t),n=i-a;n===1&&n++;var r=e+this._getActivePartValue();r>i?r=this._applyLimits(r,{limitBase:a,limitClosest:i,limitDelta:n}):r<a&&(r=this._applyLimits(r,{limitBase:i,limitClosest:a,limitDelta:n})),this._setActivePartValue(r)},_applyLimits(e,t){var{limitBase:i,limitClosest:a,limitDelta:n}=t,r=(e-a)%n;return r?i+r-1*zt(r):a},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=Io(this._dateParts,this._caret().start),this._isAllSelected()||(p(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(e){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(e){var t=this._replaceSelectedText(this.option("text"),this._caret(),xr(e)),i=C.parse(t,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),e.preventDefault()},_isDateValid:e=>X(e)&&!isNaN(e),_isValueDirty(){var e=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(e&&e.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&v.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(ie)},_focusOutHandler(e){var t=this._useMaskBehavior()&&!e.isDefaultPrevented();t?(this._fireChangeEvent(),this.callBase(e),this._selectFirstPart(e)):this.callBase(e)},_valueChangeEventHandler(e){var t=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(e),t?this._maskValue===null&&this._loadMaskValue(t):this._maskValue=null,this._saveMaskValue()):this.callBase(e)},_optionChanged(e){switch(e.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(e),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(e),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(e)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},reset(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});V("dxDateBox",ou);class Rn{constructor(){this._map={}}_findWidgetInstance(t){var i;return g(this._map,function(a,n){var{widgetInstance:r,item:s}=n;if(t(s))return i=r,!1}),i}_findFieldByCondition(t,i){var a;return g(this._map,function(n,r){if(t(r))return a=i==="guid"?n:r[i],!1}),a}clear(){this._map={}}removeItemsByItems(t){g(t.getItems(),i=>this.removeItemByKey(i))}removeItemByKey(t){delete this._map[t]}add(t){var i=t.guid||new Q;return this._map[i]=t,i}addItemsOrExtendFrom(t){t.each((i,a)=>{this._map[i]?(a.widgetInstance&&(this._map[i].widgetInstance=a.widgetInstance),this._map[i].$itemContainer=a.$itemContainer):this.add({item:a.item,widgetInstance:a.widgetInstance,guid:i,$itemContainer:a.$itemContainer})})}extendRunTimeItemInfoByKey(t,i){this._map[t]&&(this._map[t]=c(this._map[t],i))}findWidgetInstanceByItem(t){return this._findWidgetInstance(i=>i===t)}findGroupOrTabLayoutManagerByPath(t){return this._findFieldByCondition(i=>{var{path:a}=i;return a===t},"layoutManager")}findKeyByPath(t){return this._findFieldByCondition(i=>{var{path:a}=i;return a===t},"guid")}findWidgetInstanceByName(t){return this._findWidgetInstance(i=>t===i.name)}findWidgetInstanceByDataField(t){return this._findWidgetInstance(i=>t===(N(i)?i:i.dataField))}findItemContainerByItem(t){for(var i in this._map)if(this._map[i].item===t)return this._map[i].$itemContainer;return null}findItemIndexByItem(t){return this._findFieldByCondition(i=>{var{item:a}=i;return a===t},"itemIndex")}findPreparedItemByItem(t){return this._findFieldByCondition(i=>{var{item:a}=i;return a===t},"preparedItem")}getItems(){return this._map}each(t){g(this._map,function(i,a){t(i,a)})}removeItemsByPathStartWith(t){var i=Object.keys(this._map),a=i.filter(n=>this._map[n].path?this._map[n].path.indexOf(t,0)>-1:!1);a.forEach(n=>this.removeItemByKey(n))}}var tt={move(e,t){ye(e,{left:t})}},Pt={moveTo(e,t,i,a){z.animate(e,{type:"slide",to:{left:t},duration:i,complete:a})},complete(e){z.stop(e,!0)}},lu="dx-multiview",uu="dx-multiview-wrapper",du="dx-multiview-item-container",ca="dx-multiview-item",hu="dx-multiview-item-hidden",cu="dxMultiViewItemData",_u=200,_a=e=>+e,pu=e=>Ua(e).left,_i=Qa.inherit({_activeStateUnit:"."+ca,_supportedKeys:function(){return c(this.callBase(),{pageUp:D,pageDown:D})},_getDefaultOptions:function(){return c(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,_itemAttributes:{role:"tabpanel"},loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return T.real().deviceType==="desktop"&&!T.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return ca},_itemDataKey:function(){return cu},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=oe(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(e){var t=this._itemsCount();return e<0&&(e+=t),e>=t&&(e-=t),e},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var e=this.$element();e.addClass(lu),this._$wrapper=u("<div>").addClass(uu),this._$wrapper.appendTo(e),this._$itemContainer=u("<div>").addClass(du),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0])},_afterItemElementDeleted:function(e,t){this.callBase(e,t),this._deferredItems&&this._deferredItems.splice(t.itemIndex,1)},_beforeItemElementInserted:function(e){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(e.index,0,null)},_executeItemRenderAction:function(e,t,i){e=(this.option("items")||[]).indexOf(t),this.callBase(e,t,i)},_renderItemContent:function(e){var t=new $,i=this,a=this.callBase,n=new $;return n.done(function(){var r=a.call(i,e);t.resolve(r)}),this._deferredItems[e.index]=n,this.option("deferRendering")||n.resolve(),t.promise()},_render:function(){this.callBase(),hr(()=>{var e=this._getSelectedItemIndices();this._updateItems(e[0])})},_updateItems:function(e,t){this._updateItemsPosition(e,t),this._updateItemsVisibility(e,t)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0])},_updateItemsPosition:function(e,t){var i=this._itemElements(),a=p(t)?-this._animationDirection(t,e):void 0,n=i.eq(e);tt.move(n,0),p(t)&&tt.move(i.eq(t),100*a+"%")},_updateItemsVisibility:function(e,t){var i=this._itemElements();i.each((function(a,n){var r=u(n),s=a!==e&&a!==t;s||this._renderSpecificItem(a),r.toggleClass(hu,s),this.setAria("hidden",s||void 0,r)}).bind(this))},_renderSpecificItem:function(e){var t=this._itemElements().eq(e),i=t.find(this._itemContentClass()).length>0;p(e)&&!i&&(this._deferredItems[e].resolve(),Ka(t))},_refreshItem:function(e,t){this.callBase(e,t),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:D,_updateSelection:function(e,t){var i=e[0],a=t[0];Pt.complete(this._$itemContainer),this._updateItems(a,i);var n=this._animationDirection(i,a);this._animateItemContainer(n*this._itemWidth(),(function(){tt.move(this._$itemContainer,0),this._updateItems(i),oe(this._$itemContainer)}).bind(this))},_animateItemContainer:function(e,t){var i=this.option("animationEnabled")?_u:0;Pt.moveTo(this._$itemContainer,e,i,t)},_animationDirection:function(e,t){var i=pu(this._$itemContainer),a=(t-e)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection(),n=i!==0,r=n?i:a;return zt(r)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),lt,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:e=>this._swipeStartHandler(e.event),onUpdated:e=>this._swipeUpdateHandler(e.event),onEnd:e=>this._swipeEndHandler(e.event)})},_findBoundaryIndices(){var e,t,i=this.option("items"),a,n;i.forEach((r,s)=>{var o=!!(r!=null&&r.disabled);if(!o){var l;(l=a)!==null&&l!==void 0||(a=s),n=s}}),this._boundaryIndices={firstAvailableIndex:(e=a)!==null&&e!==void 0?e:0,lastAvailableIndex:(t=n)!==null&&t!==void 0?t:i.length-1,firstTrueIndex:0,lastTrueIndex:i.length-1}},_swipeStartHandler:function(e){Pt.complete(this._$itemContainer);var t=this.option("selectedIndex"),i=this.option("loop"),{firstAvailableIndex:a,lastAvailableIndex:n}=this._boundaryIndices,r=this.option("rtlEnabled");e.maxLeftOffset=_a(i||(r?t>a:t<n)),e.maxRightOffset=_a(i||(r?t<n:t>a)),this._swipeDirection=null},_swipeUpdateHandler:function(e){var t=e.offset,i=zt(t)*this._getRTLSignCorrection();if(tt.move(this._$itemContainer,t*this._itemWidth()),i!==this._swipeDirection){this._swipeDirection=i;var a=this.option("selectedIndex"),n=this._normalizeIndex(a-i);this._updateItems(a,n)}},_findNextAvailableIndex(e,t){var{items:i,loop:a}=this.option(),{firstAvailableIndex:n,lastAvailableIndex:r,firstTrueIndex:s,lastTrueIndex:o}=this._boundaryIndices,l=[s,n].includes(e),d=[o,r].includes(e);if(a){if(l&&t<0)return r;if(d&&t>0)return n}for(var h=e+t;h>=n&&h<=r;h+=t){var _=!!i[h].disabled;if(!_)return h}return e},_swipeEndHandler:function(e){var t=e.targetOffset*this._getRTLSignCorrection();if(t){var i=this._findNextAvailableIndex(this.option("selectedIndex"),-t);this.option("selectedIndex",i);var a=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",j(a))}else this._animateItemContainer(0,D)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function(e){var t=this.callBase.apply(this,arguments);return this._itemFocusLooped=t.is(e.last()),t},_nextItem:function(e){var t=this.callBase.apply(this,arguments);return this._itemFocusLooped=t.is(e.first()),t},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(e){e&&this._dimensionChanged()},_updateSwipeDisabledState(){var e=this._getSwipeDisabledState();lt.getInstance(this.$element()).option("disabled",e)},_dispose:function(){delete this._boundaryIndices,this.callBase()},_optionChanged:function(e){var t=e.value;switch(e.name){case"loop":this.option("loopItemFocus",t);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(e);break;default:this.callBase(e)}}});V("dxMultiView",_i);const lh=Object.freeze(Object.defineProperty({__proto__:null,default:_i},Symbol.toStringTag,{value:"Module"}));var fu="dx-tabs-item-badge",pa="dx-badge",vu=li.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(e){if(this._$element.children("."+pa).remove(),!!e){var t=u("<div>").addClass(fu).addClass(pa).text(e);this._$element.append(t)}}}),fa="dx-tabs-expanded";function kn(e){return e.scrollWidth-e.clientWidth}function mu(e,t){return Math.round(e)<=t}function gu(e,t,i){return Math.round(kn(e)-t)<=i}var Cu="dx-tabs",Du="dx-tabs-wrapper",va="dx-tabs-stretched",yu="dx-tabs-scrollable",ma="dx-tabs-nav-buttons",ga="dx-overflow-hidden",Ca="dx-tab",Su="dx-tab-selected",bu="dx-tabs-nav-button",Iu="dx-tabs-nav-button-left",Tu="dx-tabs-nav-button-right",Eu="dx-tab-text",xu="dx-focused-next-tab",wu="dxTabData",Da="chevronnext",ya="chevronprev",Au=100,Sa=5,Bu=300,ba=30,vt=Qa.inherit({_activeStateUnit:"."+Ca,_getDefaultOptions:function(){return c(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(e){return e?e.badge:void 0},_itemAttributes:{role:"tab"}})},_defaultOptionsRules:function(){var e=wr();return this.callBase().concat([{device:function(){return T.real().deviceType!=="desktop"},options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:function(){return T.real().deviceType==="desktop"&&!T.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return ht(e)},options:{useInkRipple:!0,selectOnFocus:!1}}])},_init:function(){this.callBase(),this.setAria("role","tablist"),this.$element().addClass(Cu),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=Au},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Ja((function(e,t){$e(t)?this._prepareDefaultItemTemplate(t,e):e.text(String(t));var i=Xa(t.icon);i&&i.prependTo(e),e.wrapInner(u("<span>").addClass(Eu))}).bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(e,t){var{itemData:i,container:a,index:n}=t;return this._deferredTemplates[n]=new $,e.render({model:i,container:a,index:n,onRendered:()=>this._deferredTemplates[n].resolve()})},_itemClass:function(){return Ca},_selectedItemClass:function(){return Su},_itemDataKey:function(){return wu},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(ga)},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){cr.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling:function(){var e=[va,fa,ga];if(this.$element().removeClass(e.join(" ")),this.option("scrollingEnabled")&&this._isItemsWidthExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var t=this.getScrollable();if(t.update(),this.option("rtlEnabled")){var i=kn(u(this.getScrollable().container()).get(0));t.scrollTo({left:i})}this._updateNavButtonsVisibility(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsWidthExceeded()||(this._cleanScrolling(),this._needStretchItems()&&!this._isItemsWidthExceeded()&&this.$element().addClass(va),this.$element().removeClass(ma).addClass(fa))},_isItemsWidthExceeded:function(){var e=this._getSummaryItemsWidth(this._getVisibleItems(),!0);return e-1>oe(this.$element())},_needStretchItems:function(){var e=this._getVisibleItems(),t=oe(this.$element()),i=[];g(e,(n,r)=>{i.push(za(r,!0))});var a=Math.max.apply(null,i);return a>=t/e.length},_cleanNavButtons:function(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=Rr()},_getPointerEvent:()=>_e.up,_toggleActiveState:function(e,t,i){if(this.callBase.apply(this,arguments),!!this._inkRipple){var a={element:e,event:i};t?this._inkRipple.showWave(a):this._inkRipple.hideWave(a)}},_renderMultiple:function(){this.option("selectionMode")==="multiple"&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=u("<div>").addClass(Du),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_renderScrollable:function(){var e=this.$element().wrapInner(u("<div>").addClass(yu)).children();this._scrollable=this._createComponent(e,oi,{direction:"horizontal",showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsVisibility()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(e){if(this._scrollable){var t=this._editStrategy.getItemElement(e);this._scrollable.scrollToElement(t)}},_renderNavButtons:function(){if(this.$element().toggleClass(ma,this.option("showNavButtons")),!!this.option("showNavButtons")){var e=this.option("rtlEnabled");this._leftButton=this._createNavButton(-ba,e?Da:ya);var t=this._leftButton.$element();t.addClass(Iu),this.$element().prepend(t),this._rightButton=this._createNavButton(ba,e?ya:Da);var i=this._rightButton.$element();i.addClass(Tu),this.$element().append(i)}},_updateNavButtonsVisibility:function(){var e=this.getScrollable();this._leftButton&&this._leftButton.option("disabled",mu(e.scrollLeft(),1)),this._rightButton&&this._rightButton.option("disabled",gu(u(e.container()).get(0),e.scrollLeft(),1))},_updateScrollPosition:function(e,t){this._scrollable.update(),this._scrollable.scrollBy(e/t)},_createNavButton:function(e,t){var i=this,a=i._createAction(function(){i._holdInterval=setInterval(function(){i._updateScrollPosition(e,Sa)},Sa)}),n=b(Ut.name,"dxNavButton"),r=b(_e.up,"dxNavButton"),s=b(_e.out,"dxNavButton"),o=this._createComponent(u("<div>").addClass(bu),Se,{focusStateEnabled:!1,icon:t,onClick:function(){i._updateScrollPosition(e,1)},integrationOptions:{}}),l=o.$element();return v.on(l,n,{timeout:Bu},(function(d){a({event:d})}).bind(this)),v.on(l,r,function(){i._clearInterval()}),v.on(l,s,function(){i._clearInterval()}),o},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(e){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(e[0]),{left:1,right:1})},_visibilityChanged:function(e){e&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(e){this.option("selectionMode")==="single"&&this.isItemSelected(e.currentTarget)||this.callBase(e)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleFocusedNextClass(e,t){this._itemElements().eq(e).toggleClass(xu,t)},_optionChanged:function(e){switch(e.name){case"useInkRipple":case"scrollingEnabled":case"showNavButtons":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(e.name,e.value);break;case"width":this.callBase(e),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(e);break;case"badgeExpr":this._invalidate();break;case"focusedElement":var{selectedIndex:t}=this.option(),i=u(e.value).index();i!==t&&this._toggleFocusedNextClass(t,i===t+1),this.callBase(e),this._scrollToItem(e.value);break;default:this.callBase(e)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(e,t){this.callBase(e,t),this._renderScrolling()},getScrollable(){return this._scrollable}});vt.ItemClass=vu;V("dxTabs",vt);const uh=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"}));class Vu extends li{_renderWatchers(){return this._startWatcher("badge",D),super._renderWatchers()}}var Ou="dx-tabpanel",Mu="dx-tabpanel-tabs",Lu="dx-tabpanel-container",Ru="dx-tab-text",ku="dx-disabled-focused-tab",mt=_i.inherit({_getDefaultOptions:function(){return c(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(e){return e?e.badge:void 0}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return T.real().deviceType==="desktop"&&!T.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!Ar},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}}])},_init:function(){this.callBase(),this.$element().addClass(Ou),this.setAria("role","tabpanel")},_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Ja(function(e,t){if($e(t)){var i=Xa(t.icon);i&&e.append(i),p(t.title)&&!$e(t.title)&&e.append(se.createTextNode(t.title))}else p(t)&&e.text(String(t));e.wrapInner(u("<span>").addClass(Ru))},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderContent:function(){var e=this;this.callBase(),this.option("templatesRenderAsynchronously")&&(this._resizeEventTimer=setTimeout(function(){e._updateLayout()},0))},_renderLayout:function(){if(this._tabs){this._updateLayout();return}var e=this.$element();this._$tabContainer=u("<div>").addClass(Mu).appendTo(e);var t=u("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(t,vt,this._tabConfig()),this._$container=u("<div>").addClass(Lu).appendTo(e),this._$container.append(this._$wrapper),this._updateLayout()},_updateLayout:function(){if(F()){var e=Ne(this._$tabContainer);this._$container.css({marginTop:-e,paddingTop:e})}},_refreshActiveDescendant:function(){if(this._tabs){var e=this._tabs,t=e.itemElements(),i=u(t[e.option("selectedIndex")]),a=this.getFocusedItemId();this.setAria("controls",void 0,u(t)),this.setAria("controls",a,i)}},_tabConfig:function(){return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:(function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}).bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:(function(e){if(e.name==="focusedElement")if(e.value){var t=u(e.value),i=this._itemElements().eq(t.index());this.option("focusedElement",j(i))}else this.option("focusedElement",e.value)}).bind(this),onFocusIn:(function(e){this._focusInHandler(e.event)}).bind(this),onFocusOut:(function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}).bind(this)}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_toggleWrapperFocusedClass(e){this._toggleFocusClass(e,this._$wrapper)},_toggleDisabledFocusedClass(e){this._focusTarget().toggleClass(ku,e)},_updateFocusState:function(e,t){this.callBase(e,t);var i=e.target===this._tabs._focusTarget().get(0),a=e.target===this._focusTarget().get(0);if(i&&this._toggleFocusClass(t,this._focusTarget()),i||a){var n=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(t&&!n),this._toggleDisabledFocusedClass(t&&n)}a&&this._toggleFocusClass(t,this._tabs.option("focusedElement"))},_focusOutHandler:function(e){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(e),this._isFocusOutHandlerExecuting=!1},_setTabsOption:function(e,t){this._tabs&&this._tabs.option(e,t)},_visibilityChanged:function(e){e&&(this._tabs._dimensionChanged(),this._updateLayout())},registerKeyHandler:function(e,t){this.callBase(e,t),this._tabs&&this._tabs.registerKeyHandler(e,t)},repaint:function(){this.callBase(),this._tabs.repaint()},_optionChanged:function(e){var t=e.name,i=e.value,a=e.fullName;switch(t){case"dataSource":this.callBase(e);break;case"items":this._setTabsOption(t,this.option(t)),this._updateLayout(),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(e);break;case"width":this.callBase(e),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(a,i),this.callBase(e),this.option("focusStateEnabled")===!0){var n=this.option("selectedIndex"),r=this._itemElements().eq(n);this.option("focusedElement",j(r))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(a,i),this.callBase(e);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(a,i);break;case"focusedElement":var s=i&&u(i).index(),o=i&&this._tabs._itemElements().eq(s);this._setTabsOption("focusedElement",j(o));var l=this._isDisabled(i);this._toggleWrapperFocusedClass(!l),this._toggleDisabledFocusedClass(l),this.callBase(e);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i);break;case"badgeExpr":this._invalidate();break;default:this.callBase(e)}},_clean:function(){clearTimeout(this._resizeEventTimer),this.callBase()}});mt.ItemClass=Vu;V("dxTabPanel",mt);const dh=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));class fe{constructor(t){this._options=t,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){dt.abstract()}}var Xt=(e,t)=>"".concat(t?"tabs":"items","[").concat(e,"]"),Fn=(e,t)=>p(e)&&p(t)?"".concat(e,".").concat(t):e||t,Qt=e=>e?e.replace(/\s/g,""):void 0,Fu=(e,t)=>e?e.dataField===t||e.name===t||Qt(e.title)===t||e.itemType==="group"&&Qt(e.caption)===t:!1,ke=(e,t)=>"".concat(e,".").concat(t),Ia=e=>{var t=e.split(".");return t[t.length-1].replace(/\[\d+]/,"")},Nu=e=>{for(var t=e.split("."),i=[...t],a=t.length-1;a>=0;a--){if(Nn(t[a]))return i.join(".");i.splice(a,1)}return""},Nn=e=>e.indexOf("tabs")>-1,Pn=(e,t,i)=>{var a=e.indexOf(t);if(a>-1)return Xt(a,i);for(var n=0;n<e.length;n++){var r=e[n],s=r.tabs||r.items;if(s){var o=Pn(s,t,r.tabs);if(o)return Fn(Xt(n,i),o)}}};function Pu(e){var{form:t,$formElement:i,formOptions:a,items:n,validationGroup:r,extendedLayoutManagerOptions:s,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:h}=e,_={form:t,items:n,$formElement:i,validationGroup:r,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:h,validationBoundary:a.scrollingEnabled?i:void 0,scrollingEnabled:a.scrollingEnabled,showRequiredMark:a.showRequiredMark,showOptionalMark:a.showOptionalMark,requiredMark:a.requiredMark,optionalMark:a.optionalMark,requiredMessage:a.requiredMessage,screenByWidth:a.screenByWidth,layoutData:a.formData,labelLocation:a.labelLocation,customizeItem:a.customizeItem,minColWidth:a.minColWidth,showColonAfterLabel:a.showColonAfterLabel,onEditorEnterKey:a.onEditorEnterKey,labelMode:a.labelMode},m=c(_,{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width});return m}class $u extends fe{tryExecute(){var{value:t}=this._options,i=this.findInstance();return i?(i.option(t),!0):!1}}class Ta extends fe{tryExecute(){var t=this.findInstance();if(t){var{optionName:i,item:a,value:n}=this._options,r=this._itemsRunTimeInfo.findItemIndexByItem(a);if(r>=0)return t.option(ke("items[".concat(r,"]"),i),n),!0}return!1}}class Hu extends fe{tryExecute(){return!1}}class Wu extends fe{tryExecute(){var t=this.findPreparedItem();return t!=null&&t._prepareGroupItemTemplate&&t._renderGroupContentTemplate?(t._prepareGroupItemTemplate(this._options.item.template),t._renderGroupContentTemplate(),!0):!1}}class zu extends fe{tryExecute(){var t=this.findInstance();if(t){var{value:i}=this._options;return t.option("dataSource",i),!0}return!1}}class Gu extends fe{tryExecute(){var{item:t}=this._options,i=this.findInstance(),a=i&&ri(i.$element()[0],"dxValidator");if(a&&t){var n=o=>o.type==="required",r=(a.option("validationRules")||[]).some(n),s=(t.validationRules||[]).some(n);if(!r&&!s||r&&s)return a.option("validationRules",t.validationRules),!0}return!1}}class Uu extends fe{tryExecute(){var t=this.findItemContainer(),{previousValue:i,value:a}=this._options;return t?(t.removeClass(i).addClass(a),!0):!1}}var Yu=(e,t)=>{switch(e){case"editorOptions":case"buttonOptions":return new $u(t);case"validationRules":return new Gu(t);case"cssClass":return new Uu(t);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new Ta(c(t,{optionName:e}));case"tabs":return new zu(t);case"template":var i,a,n,r=(i=t==null||(a=t.item)===null||a===void 0?void 0:a.itemType)!==null&&i!==void 0?i:(n=t.itemsRunTimeInfo.findPreparedItemByItem(t==null?void 0:t.item))===null||n===void 0?void 0:n.itemType;return r==="simple"?new Hu(t):r==="group"?new Wu(t):new Ta(c(t,{optionName:e}));default:return null}},$n="dx-responsivebox",Ea=$n+"-screen-",Ku="dx-box-item",xa="dxBoxItemData",qu=1920,pi=ui.inherit({_getDefaultOptions:function(){return c(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",qa),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return Ku},_itemDataKey:function(){return xa},_initMarkup:function(){this.callBase(),this.$element().addClass($n)},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(e){var t=this._findItemElementByItem(e);t.length&&(this._refreshItem(t,e),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var e=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(Ea+e),this.option("currentScreenFactor",e)},_removeScreenSizeClass:function(){var e=this.option("currentScreenFactor");e&&this.$element().removeClass(Ea+e)},_prepareGrid:function(){var e=this._grid=[];this._prepareRowsAndCols(),g(this._rows,(function(){var t=[];e.push(t),g(this._cols,(function(){t.push(this._createEmptyCell())}).bind(this))}).bind(this))},getSingleColumnRows:function(){var e=this.option("rows"),t=this._screenItems.length;if(e.length){for(var i=this._filterByScreen(e),a=[],n=0;n<t;n++){var r=this._defaultSizeConfig();n<i.length&&p(i[n].shrink)&&(r.shrink=i[n].shrink),a.push(r)}return a}else return this._defaultSizeConfig(t)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort(function(e,t){return e.location.row-t.location.row||e.location.col-t.location.col}),g(this._screenItems,function(e,t){c(t.location,{row:e,col:0,rowspan:1,colspan:1})})},_sizesByScreen:function(e){return ai(this._filterByScreen(e),(function(t){return c(this._defaultSizeConfig(),t)}).bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(e){var t=this._createDefaultSizeConfig();if(!arguments.length)return t;for(var i=[],a=0;a<e;a++)i.push(t);return i},_filterByScreen:function(e){var t=this._screenRegExp();return Fe(e,function(i){return!i.screen||t.test(i.screen)})},_screenRegExp:function(){var e=this._getCurrentScreen();return new RegExp("(^|\\s)"+e+"($|\\s)","i")},_getCurrentScreen:function(){var e=this._screenWidth();return this.option("screenByWidth")(e)},_screenWidth:function(){return F()?oe(Te()):qu},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){g(this._screenItems,(function(e,t){var i=t.location||{},a=i.col,n=i.row,r=this._grid[n],s=r&&r[a];this._occupyCells(s,t)}).bind(this))},_itemsByScreen:function(){return this.option("items").reduce((e,t)=>{var i=t.location||{};return i=$e(i)?[i]:i,this._filterByScreen(i).forEach(a=>{e.push({item:t,location:c({rowspan:1,colspan:1},a)})}),e},[])},_occupyCells:function(e,t){!e||this._isItemCellOccupied(e,t)||(c(e,t),this._markSpanningCell(e))},_isItemCellOccupied:function(e,t){if(!Pe(e.item))return!0;var i=!1;return this._loopOverSpanning(t.location,function(a){i=i||!Pe(a.item)}),i},_loopOverSpanning:function(e,t){var i=e.row+e.rowspan-1,a=e.col+e.colspan-1,n=Math.min(i,this._rows.length-1),r=Math.min(a,this._cols.length-1);e.rowspan-=i-n,e.colspan-=a-r;for(var s=e.row;s<=n;s++)for(var o=e.col;o<=r;o++)(s!==e.row||o!==e.col)&&t(this._grid[s][o])},_markSpanningCell:function(e){this._loopOverSpanning(e.location,function(t){c(t,{item:e.item,spanningCell:e})})},_linkNodeToItem:function(){g(this._itemElements(),function(e,t){var i=u(t),a=i.data(xa);a.box||(a.node=i.children())})},_layoutItems:function(){var e=this._grid.length,t=e&&this._grid[0].length;if(!(!e&&!t)){var i=this._layoutBlock({direction:"col",row:{start:0,end:e-1},col:{start:0,end:t-1}}),a=this._prepareBoxConfig(i.box||{direction:"row",items:[c(i,{ratio:1})]});c(a,this._rootBoxConfig(a.items)),this._$root=u("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,J,a)}},_rootBoxConfig:function(e){var t=g(e,(function(i,a){this._needApplyAutoBaseSize(a)&&c(a,{baseSize:"auto"})}).bind(this));return{width:"100%",height:"100%",items:t,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(e){return!e.baseSize&&(!e.minSize||e.minSize==="auto")&&(!e.maxSize||e.maxSize==="auto")},_prepareBoxConfig:function(e){return c(e||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(e){return this._isSingleItem(e)?this._itemByCell(e.row.start,e.col.start):this._layoutDirection(e)},_isSingleItem:function(e){var t=this._grid[e.row.start][e.col.start].location,i=e.row.end-e.row.start===t.rowspan-1,a=e.col.end-e.col.start===t.colspan-1;return i&&a},_itemByCell:function(e,t){var i=this._grid[e][t];return i.spanningCell?null:i.item},_layoutDirection:function(e){for(var t=[],i=e.direction,a=this._crossDirection(i),n;n=this._nextBlock(e);){if(this._isBlockIndivisible(e.prevBlockOptions,n))throw ze.Error("E1025");var r=this._layoutBlock({direction:a,row:n.row,col:n.col,prevBlockOptions:e});r&&(c(r,this._blockSize(n,a)),t.push(r)),e[a].start=n[a].end+1}return{box:this._prepareBoxConfig({direction:i,items:t})}},_isBlockIndivisible:function(e,t){return e&&e.col.start===t.col.start&&e.col.end===t.col.end&&e.row.start===t.row.start&&e.row.end===t.row.end},_crossDirection:function(e){return e==="col"?"row":"col"},_nextBlock:function(e){var t=e.direction,i=this._crossDirection(t),a=e[t].start,n=e[t].end,r=e[i].start;if(r>e[i].end)return null;for(var s=1,o=r;o<r+s;o++){for(var l=1,d=a;d<=n;d++){var h=this._cellByDirection(t,d,o);l=Math.max(l,h.location[i+"span"])}var _=o+l,m=r+s;_>m&&(s+=_-m)}var S={};return S[t]={start:a,end:n},S[i]={start:r,end:r+s-1},S},_cellByDirection:function(e,t,i){return e==="col"?this._grid[i][t]:this._grid[t][i]},_blockSize:function(e,t){for(var i=t==="row"?"auto":0,a=t==="row"?this._rows:this._cols,n=c(this._createDefaultSizeConfig(),{ratio:0}),r=e[t].start;r<=e[t].end;r++){var s=a[r];n.ratio+=s.ratio,n.baseSize+=s.baseSize,n.minSize+=s.minSize,n.maxSize+=s.maxSize,p(s.shrink)&&(n.shrink=s.shrink)}return n.minSize=n.minSize?n.minSize:i,n.maxSize=n.maxSize?n.maxSize:"auto",this._isSingleColumnScreen()&&(n.baseSize="auto"),n},_update:function(e){var t=this._$root;this._renderItems(),t&&(e?t.remove():(t.detach(),this._saveAssistantRoot(t))),this._layoutChangedAction()},_saveAssistantRoot:function(e){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(e)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){this._assistantRoots&&g(this._assistantRoots,function(e,t){u(t).remove()})},_clearItemNodeTemplates:function(){g(this.option("items"),function(){delete this.node})},_attachClickEvent:D,_optionChanged:function(e){switch(e.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(e),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(e);break;case"currentScreenFactor":break;default:this.callBase(e)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});V("dxResponsiveBox",pi);const hh=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"}));var ju="dx-form",$t="dx-form-group",Zu="dx-form-group-caption",wa="dx-col-",Hn="dx-field-item",Aa="dx-layout-manager-one-col",Wn="dx-field-item-label-content",Xu="dx-layout-manager",zn="dx-field-item-label",Jt="dx-field-item-content",Qu="dx-single-column-item-content",Gn="dx-root-simple-item",Ju="dx-form-group-content",ed="dx-field-item-has-group",td="dx-field-item-has-tabs",id="dx-form-group-with-caption",Ba="dx-field-item-tab",Va="dx-group-colcount-",Oa="group-col-count",ad="dx-form-validation-summary",nd="dx-form-styling-mode-underlined",ei="simple",rd=dt.inherit({ctor(e,t){this.editor=e,this.validator=t,this.validationRequestsCallbacks=[];var i=a=>{this.validationRequestsCallbacks.forEach(n=>n(a))};e.validationRequest.add(i),e.on("disposing",function(){e.validationRequest.remove(i)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(e){this.editor.option({validationErrors:e.brokenRules,validationStatus:e.status})},reset(){this.editor.reset()},focus(){this.editor.focus()}}),sd="dx-validator",Ma="valid",od="invalid",Ht="pending",gt=ni.inherit({_initOptions:function(e){this.callBase.apply(this,arguments),this.option(w.initValidationOptions(e))},_getDefaultOptions(){return c(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=_r(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var e=this._findGroup();this._groupWasInit||this.on("disposing",function(t){w.removeRegisteredValidator(t.component._validationGroup,t.component)}),(!this._groupWasInit||this._validationGroup!==e)&&(w.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=e,w.registerValidatorInGroup(e,this))},_setOptionsByReference(){this.callBase(),c(this._optionsByReference,{validationGroup:!0})},_getEditor(){var e=this.$element()[0];return ri(e,"dx-validation-target")},_initAdapter(){var e=this._getEditor(),t=this.option("adapter");if(!t){if(e){t=new rd(e,this),t.validationRequestsCallbacks.push(a=>{this._validationInfo.skipValidation||this.validate(a)}),this.option("adapter",t);return}throw ze.Error("E0120")}var i=t.validationRequestsCallbacks;i&&i.push(a=>{this.validate(a)})},_toggleRTLDirection(e){var t,i,a,n=(t=(i=this.option("adapter"))===null||i===void 0||(a=i.editor)===null||a===void 0?void 0:a.option("rtlEnabled"))!==null&&t!==void 0?t:e;this.callBase(n)},_initMarkup(){this.$element().addClass(sd),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var e=this._getEditor();if(e){var t=this.option("validationRules")||[],i=t.some(a=>{var{type:n}=a;return n==="required"})||null;e.isInitialized()&&e.setAria("required",i),e.option("_onMarkupRendered",()=>{e.setAria("required",i)})}},_visibilityChanged(e){e&&this._initGroupRegistration()},_optionChanged(e){switch(e.name){case"validationGroup":this._initGroupRegistration();return;case"validationRules":this._resetValidationRules(),this._toggleAccessibilityAttributes(),this.option("isValid")!==void 0&&this.validate();return;case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(w.synchronizeValidationOptions(e,this.option()));break;default:this.callBase(e)}},_getValidationRules(){return this._validationRules||(this._validationRules=ai(this.option("validationRules"),(e,t)=>c({},e,{validator:this,index:t}))),this._validationRules},_findGroup(){var e=this.$element();return this.option("validationGroup")||w.findGroup(e,this._modelByElement(e))},_resetValidationRules(){delete this._validationRules},validate(e){var t=this.option("adapter"),i=this.option("name"),a=t.bypass&&t.bypass(),n=e&&e.value!==void 0?e.value:t.getValue(),r=t.getCurrentValidationError&&t.getCurrentValidationError(),s=this._getValidationRules(),o=this._validationInfo&&this._validationInfo.result;if(o&&o.status===Ht&&o.value===n)return c({},o);var l;return a?l={isValid:!0,status:Ma}:r&&r.editorSpecific?(r.validator=this,l={isValid:!1,status:od,brokenRule:r,brokenRules:[r]}):l=w.validate(n,s,i),l.id=new Q().toString(),this._applyValidationResult(l,t),l.complete&&l.complete.then(d=>{d.id===this._validationInfo.result.id&&this._applyValidationResult(d,t)}),c({},this._validationInfo.result)},reset(){var e=this.option("adapter"),t={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:Ma,complete:null};this._validationInfo.skipValidation=!0,e.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(t,e)},_updateValidationResult(e){if(!this._validationInfo.result||this._validationInfo.result.id!==e.id){var t=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=c({},e,{complete:t})}else for(var i in e)i!=="id"&&i!=="complete"&&(this._validationInfo.result[i]=e[i])},_applyValidationResult(e,t){var i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(e.validator=this,this._updateValidationResult(e),t.applyValidationResults&&t.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===Ht){this._validationInfo.deferred||(this._validationInfo.deferred=new $,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);return}this._validationInfo.result.status!==Ht&&(i(e),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(e),this._validationInfo.deferred=null))},focus(){var e=this.option("adapter");e&&e.focus&&e.focus()},_useTemplates:function(){return!1}});V("dxValidator",gt);const ch=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"}));var ld=["dxTagBox","dxRangeSlider","dxDateRangeBox"],ud=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function dd(e){var{$parent:t,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:n,item:r,template:s,labelTemplate:o,name:l,formLabelLocation:d,requiredMessageTemplate:h,validationGroup:_,editorValue:m,canAssignUndefinedValueToEditor:S,editorValidationBoundary:A,editorStylingMode:I,showColonAfterLabel:ee,managerLabelLocation:Ee,itemId:le,managerMarkOptions:xe,labelMode:Ye,onLabelTemplateRendered:U}=e,L=p(r.isRequired)?r.isRequired:!!_d(r.validationRules),ue=r.itemType===ei,we=r.helpText?"dx-"+new Q:null,H=pd({item:r,id:le,isRequired:L,managerMarkOptions:xe,showColonAfterLabel:ee,labelLocation:Ee,formLabelMode:Ye,labelTemplate:o,onLabelTemplateRendered:U}),Ke=H.visible&&(H.text||H.labelTemplate&&ue),{location:qe,labelID:Ct}=H,Dt=qe!=="top"&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(r.editorType),te=cd({editorType:r.editorType,editorValue:m,defaultEditorName:r.dataField,canAssignUndefinedValueToEditor:S,externalEditorOptions:r.editorOptions,editorInputId:le,editorValidationBoundary:A,editorStylingMode:I,formLabelMode:Ye,labelText:H.textWithoutColon,labelMark:H.markOptions.showRequiredMark?String.fromCharCode(160)+H.markOptions.requiredMark:""}),yt=H.markOptions.showOptionalMark&&!H.visible&&te.labelMode!=="hidden"&&!p(r.helpText),Ae=yt?H.markOptions.optionalMark:r.helpText;return{$parent:t,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:n,labelOptions:H,labelNeedBaselineAlign:Dt,labelLocation:qe,needRenderLabel:Ke,item:r,isSimpleItem:ue,isRequired:L,template:s,helpID:we,labelID:Ct,name:l,helpText:Ae,formLabelLocation:d,requiredMessageTemplate:h,validationGroup:_,editorOptions:te}}function hd(e){var{showRequiredMark:t,requiredMark:i,showOptionalMark:a,optionalMark:n}=e;return!t&&!a?"":String.fromCharCode(160)+(t?i:n)}function Un(e,t){var{showRequiredMark:i,requiredMark:a,showOptionalMark:n,optionalMark:r}=e;return{showRequiredMark:i&&t,requiredMark:a,showOptionalMark:n&&!t,optionalMark:r}}function cd(e){var{editorType:t,defaultEditorName:i,editorValue:a,canAssignUndefinedValueToEditor:n,externalEditorOptions:r,editorInputId:s,editorValidationBoundary:o,editorStylingMode:l,formLabelMode:d,labelText:h,labelMark:_}=e,m={};(a!==void 0||n)&&(m.value=a),ld.indexOf(t)!==-1&&(m.value=m.value||[]);var S=r==null?void 0:r.labelMode;p(S)||(S=d==="outside"?"hidden":d);var A=(r==null?void 0:r.stylingMode)||l,I=c(!0,m,r,{inputAttr:{id:s},validationBoundary:o,stylingMode:A,label:h,labelMode:S,labelMark:_});return r&&(I.dataSource&&(I.dataSource=r.dataSource),I.items&&(I.items=r.items)),i&&!I.name&&(I.name=i),I}function _d(e){var t;return e&&e.length&&g(e,function(i,a){if(a.type==="required")return t=!0,!1}),t}function pd(e){var{item:t,id:i,isRequired:a,managerMarkOptions:n,showColonAfterLabel:r,labelLocation:s,labelTemplate:o,formLabelMode:l,onLabelTemplateRendered:d}=e,h=ud.includes(t.editorType),_=c({showColon:r,location:s,id:i,visible:l==="outside"||h&&l!=="hidden",isRequired:a},t?t.label:{},{markOptions:Un(n,a),labelTemplate:o,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(t.editorType)&&(_.labelID="dx-label-".concat(new Q)),!_.text&&t.dataField&&(_.text=Wa(t.dataField)),_.text&&(_.textWithoutColon=_.text,_.text+=_.showColon?":":""),_}var fd="dx-field-item-required-mark",Yn="dx-field-item-label-location-",vd="dx-field-item-optional-mark",md="dx-field-item-label-text";function gd(e){var{text:t,id:i,location:a,alignment:n,labelID:r=null,markOptions:s={},labelTemplate:o,labelTemplateData:l,onLabelTemplateRendered:d}=e;if((!p(t)||t.length<=0)&&!p(o))return null;var h=u("<label>").addClass(zn+" "+Yn+a).attr("for",i).attr("id",r).css("textAlign",n),_=u("<span>").addClass(Wn),m=u("<span>").addClass(md).text(t);return o&&(m=u("<div>").addClass("dx-field-item-custom-label-content"),l.text=t,o.render({container:j(m),model:l,onRendered(){d==null||d()}})),h.append(_.append(m,Cd(s)))}function Cd(e){var t=hd(e);return t===""?null:u("<span>").addClass(e.showRequiredMark?fd:vd).text(t)}function Dd(e,t,i){var a="".concat(t," > .").concat(zn,":not(.").concat(Yn,"top) > .").concat(Wn),n=e.find(a),r=n.length,s,o,l=0;for(o=0;o<r;o++)s=yd(n[o]),s>l&&(l=s);for(o=0;o<r;o++)n[o].style.width=l+"px"}function yd(e){for(var t=0,i=e.children.length,a=0;a<i;a++){var n=e.children[a];t+=n.offsetWidth}return t}var Sd="dx-flex-layout",bd="dx-field-item-optional",Id="dx-field-item-required",Kn="dx-field-item-content-wrapper",Td="dx-field-item-content-location-",Ed="dx-field-item-label-align",xd="dx-field-item-help-text",wd="dx-label-v-align",Ad="dx-label-h-align",Bd="dx-toggle-controls-paddings",Vd="dx-template-wrapper",ti="dx-validation-target",Od="dx-invalid";function Md(e){var{$parent:t,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:n,labelOptions:r,labelNeedBaselineAlign:s,labelLocation:o,needRenderLabel:l,formLabelLocation:d,item:h,editorOptions:_,isSimpleItem:m,isRequired:S,template:A,helpID:I,labelID:ee,name:Ee,helpText:le,requiredMessageTemplate:xe,validationGroup:Ye}=e,U=u("<div>").addClass(i.join(" ")).appendTo(t);U.addClass(S?Id:bd),m&&U.addClass(Sd),m&&s&&U.addClass(Ed);var L=u("<div>");L.data("dx-form-item",h),L.addClass(Jt).addClass(Td+{right:"left",left:"right",top:"bottom"}[d]);var ue=null;if(l&&(r.labelTemplate&&(r.labelTemplateData=ka(h,_,a)),ue=gd(r)),ue){var{editorType:we}=h;U.append(ue),(o==="top"||o==="left")&&U.append(L),o==="right"&&U.prepend(L),o==="top"?U.addClass(wd):U.addClass(Ad),(we==="dxCheckBox"||we==="dxSwitch")&&v.on(ue,Ie,function(){v.trigger(L.children(),Ie)});var H=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(we),Ke=r.alignment,qe=Ke==="left"||!Ke,Ct=!A,Dt=o==="top";Ct&&H&&Dt&&qe&&L.addClass(Bd)}else U.append(L);var te;if(A)A.render({container:j(L),model:ka(h,_,a),onRendered(){var St=La(L),Qn=Ld(St);Ra(Qn)}});else{var yt=u("<div>").appendTo(L);try{te=n(yt,h.editorType,_),te.setAria("describedby",I),ee&&te.setAria("labelledby",ee),te.setAria("required",S)}catch(St){ze.log("E1035",St.message)}}var Ae=La(L),mi=Ae&&Ae.data(ti);if(mi){var gi=h.label&&h.label.text,Ci=gi?null:Ee,jn=gi?h.label.text:Ci&&Wa(Ci),Be;if(m)if(h.validationRules)Be=h.validationRules;else{var Zn=pr(xe,jn||"");Be=h.isRequired?[{type:"required",message:Zn}]:null}Array.isArray(Be)&&Be.length&&n(Ae,gt,{validationRules:Be,validationGroup:Ye,dataGetter:function(){return{formItem:h}}}),Ra(mi)}if(le&&m){var Xn=L.parent();Xn.append(u("<div>").addClass(Kn).append(L).append(u("<div>").addClass(xd).attr("id",I).text(le)))}return{$fieldEditorContainer:L,$rootElement:U,widgetInstance:te}}function La(e){var t=e.children().first();return t.hasClass(Vd)?t.children().first():t}function Ld(e){var t,i;return(e==null?void 0:e.data(ti))||(e==null||(t=e.parent)===null||t===void 0||(i=t.call(e))===null||i===void 0?void 0:i.data(ti))}function Ra(e){if(e&&ht()){var t=".".concat(Kn),i=a=>{var{element:n,component:r}=a,{isValid:s,validationMessageMode:o}=r.option();u(n).parents(t).toggleClass(Od,s===!1&&(r._isFocused()||o==="always"))};e.on("optionChanged",a=>{a.name==="isValid"&&i(a)}),e.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function ka(e,t,i){return{dataField:e.dataField,editorType:e.editorType,editorOptions:t,component:i,name:e.name}}var Rd="dx-field-button-item";function kd(e){var{item:t,$parent:i,rootElementCssClassList:a,validationGroup:n,createComponentCallback:r}=e,s=u("<div>").appendTo(i).addClass(a.join(" ")).addClass(Rd).css("textAlign",Fd(t.horizontalAlignment));i.css("justifyContent",Nd(t.verticalAlignment));var o=u("<div>").appendTo(s);return{$rootElement:s,buttonInstance:r(o,"dxButton",c({validationGroup:n},t.buttonOptions))}}function Fd(e){return p(e)?e:"right"}function Nd(e){switch(e){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}var Pd="dx-field-empty-item";function Fa(e){var{$parent:t,rootElementCssClassList:i}=e;return u("<div>").addClass(Pd).html("&nbsp;").addClass(i.join(" ")).appendTo(t)}var $d="dxTextBox",Hd="dx-first-row",Wd="dx-last-row",zd="dx-first-col",Gd="dx-last-col",Ud=pe.inherit({_getDefaultOptions:function(){return c(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:x.format("dxForm-optionalMark"),requiredMessage:x.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),c(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var e=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new Rn,this._updateReferencedOptions(e),this._initDataAndItems(e)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(e){this._syncDataWithItems(),this._updateItems(e)},_syncDataWithItems:function(){var e=this.option("layoutData"),t=this.option("items");p(t)&&t.forEach(i=>{if(i.dataField&&this._getDataByField(i.dataField)===void 0){var a;i.editorOptions&&(a=i.editorOptions.value),(p(a)||i.dataField in e)&&this._updateFieldValue(i.dataField,a)}})},_getDataByField:function(e){return e?this.option("layoutData."+e):null},_isCheckboxUndefinedStateEnabled:function(e){var{allowIndeterminateState:t,editorType:i,dataField:a}=e;if(t===!0&&i==="dxCheckBox"){var n=["layoutData",...a.split(".")],r=n.pop(),s=this.option(n.join("."));return s&&r in s}return!1},_updateFieldValue:function(e,t){var i=this.option("layoutData"),a=t;!de.isWrapped(i[e])&&p(e)?this.option("layoutData."+e,a):de.isWritableWrapped(i[e])&&(a=K(a)?a():a,i[e](a)),this._triggerOnFieldDataChanged({dataField:e,value:a})},_triggerOnFieldDataChanged:function(e){this._createActionByOption("onFieldDataChanged")(e)},_updateItems:function(e){var t=this,i=this.option("items"),a=p(i),n=t.option("customizeItem"),r=a?i:this._generateItemsByData(e);if(p(r)){var s=[];g(r,function(o,l){t._isAcceptableItem(l)&&(l=t._processItem(l),n&&n(l),M(l)&&de.unwrap(l.visible)!==!1&&s.push(l))}),(!t._itemWatchers.length||!a)&&t._updateItemWatchers(r),this._setItems(s),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach(function(e){e()}),this._itemWatchers=[]},_updateItemWatchers:function(e){var t=this,i=t._getWatch();e.forEach(function(a){M(a)&&p(a.visible)&&K(i)&&t._itemWatchers.push(i(function(){return de.unwrap(a.visible)},function(){t._updateItems(t.option("layoutData")),t.repaint()},{skipImmediate:!0}))})},_generateItemsByData:function(e){var t=[];return p(e)&&g(e,function(i){t.push({dataField:i})}),t},_isAcceptableItem:function(e){var t=e.dataField||e,i=this._getDataByField(t);return!(K(i)&&!de.isWrapped(i))},_processItem:function(e){if(typeof e=="string"&&(e={dataField:e}),typeof e=="object"&&!e.itemType&&(e.itemType=ei),!p(e.editorType)&&p(e.dataField)){var t=this._getDataByField(e.dataField);e.editorType=p(t)?this._getEditorTypeByDataType(fr(t)):$d}if(e.editorType==="dxCheckBox"){var i;e.allowIndeterminateState=(i=e.allowIndeterminateState)!==null&&i!==void 0?i:!0}return e},_getEditorTypeByDataType:function(e){switch(e){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){Br(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort(function(e,t){var i=e.visibleIndex,a=t.visibleIndex,n;return i>a?n=1:i<a?n=-1:n=0,n})},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass(Xu),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var e=[];if(this._items&&this._items.length){var t=this._getColCount(),i=u("<div>").appendTo(this.$element());this._prepareItemsWithMerging(t);var a=this._generateLayoutItems();this._responsiveBox=this._createComponent(i,pi,this._getResponsiveBoxConfig(a,t,e)),F()||this._renderTemplates(e)}},_itemStateChangedHandler:function(e){this._refresh()},_renderTemplates:function(e){var t=this,i=0;e.forEach(a=>{var n,{item:r}=a;r!=null&&(n=r.label)!==null&&n!==void 0&&n.template&&i++}),g(e,function(a,n){switch(n.itemType){case"empty":Fa(n);break;case"button":t._renderButtonItem(n);break;default:t._renderFieldItem(n,i)}})},_getResponsiveBoxConfig:function(e,t,i){var a=this,n=a.option("colCountByScreen"),r=n&&n.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var s=a.option("onLayoutChanged"),o=a.isSingleColumnMode();s&&(a.$element().toggleClass(Aa,o),s(o))},onContentReady:function(s){F()&&a._renderTemplates(i),a.option("onLayoutChanged")&&a.$element().toggleClass(Aa,a.isSingleColumnMode(s.component))},itemTemplate:function(s,o,l){if(s.location){var d=u(l),h=s.location.row*t,_=a._items[s.location.col+h];if(_){var m=[_.cssClass];d.toggleClass(Qu,a.isSingleColumnMode(this)),s.location.row===0&&m.push(Hd),s.location.col===0&&m.push(zd),_.itemType===ei&&a.option("isRoot")&&d.addClass(Gn);var S=s.location.col===t-1||s.location.col+s.location.colspan===t,A=a._getRowsCount(),I=s.location.row===A-1;S&&m.push(Gd),I&&m.push(Wd),_.itemType!=="empty"&&(m.push(Hn),m.push(a.option("cssItemClass")),p(_.col)&&m.push("dx-col-"+_.col)),i.push({itemType:_.itemType,item:_,$parent:d,rootElementCssClassList:m})}}},cols:a._generateRatio(t),rows:a._generateRatio(a._getRowsCount(),!0),dataSource:e,screenByWidth:a.option("screenByWidth"),singleColumnScreen:r?!1:"xs"}},_getColCount:function(){var e=this.option("colCount"),t=this.option("colCountByScreen");if(t){var i=this.option("form").getTargetScreenFactor();i||(i=F()?ja(this.option("screenByWidth")):"lg"),e=t[i]||e}if(e==="auto"){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=e=this._getMaxColCount()}return e<1?1:e},_getMaxColCount:function(){if(!F())return 1;var e=this.option("minColWidth"),t=oe(this.$element()),i=this._items.length,a=Math.floor(t/e)||1;return i<a?i:a},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(e){var t=this._items.slice(0),i,a,n=[],r,s;for(s=0;s<t.length;s++)if(i=t[s],n.push(i),(this.option("alignItemLabels")||i.alignItemLabels||i.colSpan)&&(i.col=this._getColByIndex(n.length-1,e)),i.colSpan>1&&i.col+i.colSpan<=e){for(a=[],r=0;r<i.colSpan-1;r++)a.push({merged:!0});n=n.concat(a)}else delete i.colSpan;this._setItems(n)},_getColByIndex:function(e,t){return e%t},_setItems:function(e){this._items=e,this._cashedColCount=null},_generateLayoutItems:function(){var e=this._items,t=this._getColCount(),i=[],a,n;for(n=0;n<e.length;n++)if(a=e[n],!a.merged){var r={location:{row:parseInt(n/t),col:this._getColByIndex(n,t)}};p(a.disabled)&&(r.disabled=a.disabled),p(a.visible)&&(r.visible=a.visible),p(a.colSpan)&&(r.location.colspan=a.colSpan),p(a.rowSpan)&&(r.location.rowspan=a.rowSpan),i.push(r)}return i},_renderEmptyItem:function(e){Fa({$container:e})},_renderButtonItem:function(e){var{item:t,$parent:i,rootElementCssClassList:a}=e,{$rootElement:n,buttonInstance:r}=kd({item:t,$parent:i,rootElementCssClassList:a,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:t,widgetInstance:r,guid:t.guid,$itemContainer:n})},_renderFieldItem:function(e,t){var i,a,{item:n,$parent:r,rootElementCssClassList:s}=e,o=this._getDataByField(n.dataField),l=!1;if(o===void 0){var{allowIndeterminateState:d,editorType:h,dataField:_}=n;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:d,editorType:h,dataField:_})}var m=n.dataField||n.name,S=this._getFormOrThis(),{$fieldEditorContainer:A,widgetInstance:I,$rootElement:ee}=Md(dd({$parent:r,rootElementCssClassList:s,item:n,name:m,editorValue:o,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:n.template?this._getTemplate(n.template):null,labelTemplate:(i=n.label)!==null&&i!==void 0&&i.template?this._getTemplate(n.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(m),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(S,t)&&S._alignLabels(this,this.isSingleColumnMode(S))}}));(a=this.option("onFieldItemRendered"))===null||a===void 0||a(),I&&n.dataField&&this._bindDataField(I,n.dataField,n.editorType,A),this._itemsRunTimeInfo.add({item:n,widgetInstance:I,guid:n.guid,$itemContainer:ee})},_incTemplateRenderedCallCount(){var e;this._labelTemplateRenderedCallCount=((e=this._labelTemplateRenderedCallCount)!==null&&e!==void 0?e:0)+1},_shouldAlignLabelsOnTemplateRendered(e,t){return e.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===t},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(e,t,i,a){var n=this._getFormOrThis();e.on("enterKey",function(r){n._createActionByOption("onEditorEnterKey")(c(r,{dataField:t}))}),this._createWatcher(e,a,t),this.linkEditorToDataField(e,t,i)},_createWatcher:function(e,t,i){var a=this,n=a._getWatch();if(K(n)){var r=n(function(){return a._getDataByField(i)},function(){var s=a._getDataByField(i);if(e.NAME==="dxTagBox"){var o=e.option("value");if(s!==o&&function(l,d){if(!Array.isArray(l)||!Array.isArray(d)||l.length!==d.length)return!1;for(var h=0;h<l.length;h++)if(l[h]!==d[h])return!1;return!0}(s,o))return}e.option("value",s)},{deep:!0,skipImmediate:!0});v.on(t,Vr,r)}},_getWatch:function(){if(!p(this._watch)){var e=this.option("form");this._watch=e&&e.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(e,t,i){var a=this.option("readOnly"),n=Object.hasOwn(i,"readOnly"),r=this.callBase(e,t,ii({},i,{readOnly:n?i.readOnly:a})),s=!1;return r.on("optionChanged",o=>{o.name==="readOnly"&&!s&&(n=!0)}),this.on("optionChanged",function(o){o.name==="readOnly"&&!n&&(s=!0,r.option(o.name,o.value),s=!1)}),r},_generateRatio:function(e,t){var i=[],a,n;for(n=0;n<e;n++)a={ratio:1},t&&(a.baseSize="auto"),i.push(a);return i},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(e){var t=this.option("layoutData");M(t)&&Object.getOwnPropertyNames(t).forEach(i=>delete this._optionsByReference["layoutData."+i]),M(e)&&Object.getOwnPropertyNames(e).forEach(i=>this._optionsByReference["layoutData."+i]=!0)},_resetWidget(e){this._disableEditorValueChangedHandler=!0,e.reset(),this._disableEditorValueChangedHandler=!1,e.option("isValid",!0)},_optionChanged(e){if(e.fullName.search("layoutData.")!==0)switch(e.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(e.value),this.option("items")?Pe(e.value)||this._itemsRunTimeInfo.each((t,i)=>{if(p(i.item)){var a=i.item.dataField;if(a&&p(i.widgetInstance)){var n=Wt(a),r=n(e.value),{allowIndeterminateState:s,editorType:o}=i.item;r!==void 0||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:s,editorType:o,dataField:a})?i.widgetInstance.option("value",r):this._resetWidget(i.widgetInstance)}}}):(this._initDataAndItems(e.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(e.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":this.option("colCount")==="auto"&&this._resetColCount();break;case"readOnly":break;case"width":this.callBase(e),this.option("colCount")==="auto"&&this._resetColCount();break;case"onFieldDataChanged":break;default:this.callBase(e)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(e,t){this.on("optionChanged",i=>{i.fullName==="layoutData.".concat(t)&&e._setOptionWithoutOptionChange("value",i.value)}),e.on("valueChanged",i=>{var a=M(i.value)||Array.isArray(i.value);!this._disableEditorValueChangedHandler&&!(a&&i.value===i.previousValue)&&this._updateFieldValue(t,i.value)})},_dimensionChanged:function(){this.option("colCount")==="auto"&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(e,t){var i=this;M(e)?g(e,function(a,n){i._updateFieldValue(a,n)}):typeof e=="string"&&i._updateFieldValue(e,t)},getEditor:function(e){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(e)||this._itemsRunTimeInfo.findWidgetInstanceByName(e)},isSingleColumnMode:function(e){var t=this._responsiveBox||e;if(t)return t.option("currentScreenFactor")===t.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});V("dxLayoutManager",Ud);var fi="dx-validationsummary",Yd=fi+"-item",Kd=fi+"-item-data",vi=ui.inherit({_getDefaultOptions(){return c(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),c(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var e=this.$element(),t=this.option("validationGroup")||w.findGroup(e,this._modelByElement(e)),i=w.addGroup(t);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=t,this.groupSubscription=this._groupValidationHandler.bind(this),i.on("validated",this.groupSubscription)},_unsubscribeGroup(){var e=w.getGroupConfig(this._validationGroup);e&&e.off("validated",this.groupSubscription)},_getOrderedItems(e,t){var i=[];return g(e,function(a,n){var r=Fe(t,function(s){if(s.validator===n)return!0});r.length&&(i=i.concat(r))}),i},_groupValidationHandler(e){var t=this._getOrderedItems(e.validators,ai(e.brokenRules,function(i){return{text:i.message,validator:i.validator,index:i.index}}));this.validators=e.validators,g(this.validators,(i,a)=>{if(a._validationSummary!==this){var n=this._itemValidationHandler.bind(this);a.on("validated",n),a.on("disposing",function(){a.off("validated",n),a._validationSummary=null,n=null}),a._validationSummary=this}}),this.option("items",t)},_itemValidationHandler(e){for(var{isValid:t,validator:i,brokenRules:a}=e,n=this.option("items"),r=!1,s=0,o=function(){var d=n[s];if(d.validator===i){var h=Fe(a||[],function(_){return _.index===d.index})[0];if(t||!h)return n.splice(s,1),r=!0,"continue";h.message!==d.text&&(d.text=h.message,r=!0)}s++};s<n.length;)var l=o();g(a,function(d,h){var _=Fe(n,function(m){return m.validator===i&&m.index===h.index})[0];_||(n.push({text:h.message,validator:i,index:h.index}),r=!0)}),r&&(n=this._getOrderedItems(this.validators,n),this.option("items",n))},_initMarkup(){this.$element().addClass(fi),this.callBase()},_optionChanged(e){switch(e.name){case"validationGroup":this._initGroupRegistration();break;default:this.callBase(e)}},_itemClass:()=>Yd,_itemDataKey:()=>Kd,_postprocessRenderItem(e){v.on(e.itemElement,"click",function(){e.itemData.validator&&e.itemData.validator.focus&&e.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});V("dxValidationSummary",vi);const _h=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"}));var Na="dx-validationgroup",qd="dx-validator",jd="dx-validationsummary";class qn extends ni{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),w.addGroup(this)}_initMarkup(){var t=this.$element();t.addClass(Na),t.find(".".concat(qd)).each(function(i,a){gt.getInstance(u(a))._initGroupRegistration()}),t.find(".".concat(jd)).each(function(i,a){vi.getInstance(u(a)).refreshValidationGroup()}),super._initMarkup()}validate(){return w.validateGroup(this)}reset(){return w.resetGroup(this)}_dispose(){w.removeGroup(this),this.$element().removeClass(Na),super._dispose()}_useTemplates(){return!1}}V("dxValidationGroup",qn);const ph=Object.freeze(Object.defineProperty({__proto__:null,default:qn},Symbol.toStringTag,{value:"Module"}));var Pa="dx-state-focused",Zd=["items","isRequired","validationRules","visible"],Xd=pe.inherit({_init:function(){this.callBase(),this._cachedColCountOptions=[],this._itemsRunTimeInfo=new Rn,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return c(this.callBase(),{formID:"dx-"+new Q,formData:{},colCount:1,screenByWidth:qa,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:x.format("dxForm-optionalMark"),requiredMessage:x.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:ut().editorStylingMode,labelMode:"outside"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return ht()},options:{showColonAfterLabel:!1,labelLocation:"top"}}])},_setOptionsByReference:function(){this.callBase(),c(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(e){return parseInt(e.attr(Oa))},_applyLabelsWidthByCol:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.inOneColumn?Hn:wa+t,n=i.excludeTabbed?":not(.".concat(Ba,")"):"";Dd(e,".".concat(a).concat(n))},_applyLabelsWidth:function(e,t,i,a,n){a=i?1:a||this._getGroupColCount(e);var r={excludeTabbed:t,inOneColumn:i},s;for(s=0;s<a;s++)this._applyLabelsWidthByCol(e,s,r,n)},_getGroupElementsInColumn:function(e,t,i){var a=p(i)?"."+Va+i:"",n="."+wa+t+" > ."+Jt+" > ."+$t+a;return e.find(n)},_applyLabelsWidthWithGroups:function(e,t,i,a){if(this.option("alignRootItemLabels")===!0)for(var n=e.find(".".concat(Gn)),r=0;r<t;r++)this._applyLabelsWidthByCol(n,r,i,a);var s=this.option("alignItemLabelsInAllGroups");if(s)this._applyLabelsWidthWithNestedGroups(e,t,i,a);else{var o=this.$element().find("."+$t),l;for(l=0;l<o.length;l++)this._applyLabelsWidth(o.eq(l),i,void 0,void 0,a)}},_applyLabelsWidthWithNestedGroups:function(e,t,i,a){var n={excludeTabbed:i},r,s,o,l;for(r=0;r<t;r++)for(l=this._getGroupElementsInColumn(e,r),this._applyLabelsWidthByCol(l,0,n,a),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(e,r,this._groupsColCount[s]);var d=this._getGroupColCount(l);for(o=1;o<d;o++)this._applyLabelsWidthByCol(l,o,n,a)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(e){var{layoutManager:t,inOneColumn:i,$container:a,excludeTabbed:n,items:r}=e;if(!(!F()||this._labelLocation()==="top")){var s=Un(t._getMarkOptions());i?this._applyLabelsWidth(a,n,!0,void 0,s):this._checkGrouping(r)?this._applyLabelsWidthWithGroups(a,t._getColCount(),n,s):this._applyLabelsWidth(a,n,!1,t._getColCount(),s)}},_prepareFormData:function(){p(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){this.option("stylingMode")==="underlined"&&this.$element().addClass(nd)},_initMarkup:function(){w.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass(ju),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if(F()){var e=this.$element().get(0);It.unobserve(e),It.observe(e,()=>{this._resizeHandler()})}},_resizeHandler:function(){this._cachedLayoutManagers.length&&g(this._cachedLayoutManagers,(e,t)=>{var i;(i=t.option("onLayoutChanged"))===null||i===void 0||i(t.isSingleColumnMode())})},_getCurrentScreenFactor:function(){return F()?ja(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(e,t){this._alignLabelsInColumn({$container:this.$element(),layoutManager:e,excludeTabbed:!0,items:this.option("items"),inOneColumn:t}),Ka(this.$element().find(".".concat(Hr)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,It.unobserve(this.$element().get(0))},_renderScrollable:function(){var e=this.option("useNativeScrolling");this._scrollable=new oi(this.$element(),{useNative:!!e,useSimulatedScrollbar:!e,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?u(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var e;(e=this._$validationSummary)===null||e===void 0||e.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=u("<div>").addClass(ad).appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(e,t,i,a){if(e){for(var n=[],r=0;r<e.length;r++){var s=e[r],o=Fn(i,Xt(r,a)),l={item:s,itemIndex:r,path:o},d=this._itemsRunTimeInfo.add(l);if(N(s)&&(s={dataField:s}),M(s)){var h=ii({},s);l.preparedItem=h,h.guid=d,this._tryPrepareGroupItem(h),this._tryPrepareTabbedItem(h,o),this._tryPrepareItemTemplate(h),t&&(h.cssItemClass=Ba),h.items&&(h.items=this._prepareItems(h.items,t,o)),n.push(h)}else n.push(s)}return n}},_tryPrepareGroupItem:function(e){e.itemType==="group"&&(e.alignItemLabels=k(e.alignItemLabels,!0),e._prepareGroupItemTemplate=t=>{e.template&&(e.groupContentTemplate=this._getTemplate(t)),e.template=this._itemGroupTemplate.bind(this,e)},e._prepareGroupItemTemplate(e.template))},_tryPrepareTabbedItem:function(e,t){e.itemType==="tabbed"&&(e.template=this._itemTabbedTemplate.bind(this,e),e.tabs=this._prepareItems(e.tabs,!0,t,!0))},_tryPrepareItemTemplate:function(e){e.template&&(e.template=this._getTemplate(e.template))},_checkGrouping:function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];if(i.itemType==="group")return!0}},_renderLayout:function(){var e=this,t=e.option("items"),i=e._getContent();t=e._prepareItems(t),e._rootLayoutManager=e._renderLayoutManager(i,this._createLayoutManagerOptions(t,{isRoot:!0,colCount:e.option("colCount"),alignItemLabels:e.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(a){e._alignLabels.bind(e)(e._rootLayoutManager,a)},onContentReady:function(a){e._alignLabels(a.component,a.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(e){return e.items||[]},_itemTabbedTemplate:function(e,t,i){var a,n=u("<div>").appendTo(i),r=c({},e.tabPanelOptions,{dataSource:e.tabs,onItemRendered:l=>{var d,h;(d=e.tabPanelOptions)===null||d===void 0||(h=d.onItemRendered)===null||h===void 0||h.call(d,l),Or(l.itemElement)},itemTemplate:(l,d,h)=>{var _=u(h),m=k(l.alignItemLabels,!0),S=this._renderLayoutManager(_,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(l),{colCount:l.colCount,alignItemLabels:m,screenByWidth:this.option("screenByWidth"),colCountByScreen:l.colCountByScreen,cssItemClass:l.cssItemClass,onLayoutChanged:A=>{this._alignLabelsInColumn({$container:_,layoutManager:S,items:l.items,inOneColumn:A})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(l.guid,{layoutManager:S}),m&&this._alignLabelsInColumn({$container:_,layoutManager:S,items:l.items,inOneColumn:S.isSingleColumnMode()})}}),s=(l,d)=>{Array.isArray(l)&&l.forEach(h=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(h.guid,{widgetInstance:d}))},o=this._createComponent(n,mt,r);u(i).parent().addClass(td),o.on("optionChanged",l=>{l.fullName==="dataSource"&&s(l.value,l.component)}),s([{guid:e.guid},...(a=e.tabs)!==null&&a!==void 0?a:[]],o)},_itemGroupTemplate:function(e,t,i){var a=t.editorOptions.inputAttr.id,n=u("<div>").toggleClass(id,p(e.caption)&&e.caption.length).addClass($t).appendTo(i),r={role:"group",labelledby:a};this.setAria(r,n),u(i).parent().addClass(ed),e.caption&&u("<span>").addClass(Zu).text(e.caption).attr("id",a).appendTo(n);var s=u("<div>").addClass(Ju).appendTo(n);if(e.groupContentTemplate)e._renderGroupContentTemplate=()=>{s.empty();var d={formData:this.option("formData"),component:this};e.groupContentTemplate.render({model:d,container:j(s)})},e._renderGroupContentTemplate();else{var o=this._renderLayoutManager(s,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(e),{colCount:e.colCount,colCountByScreen:e.colCountByScreen,alignItemLabels:e.alignItemLabels,cssItemClass:e.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(e.guid,{layoutManager:o});var l=o._getColCount();this._groupsColCount.includes(l)||this._groupsColCount.push(l),n.addClass(Va+l),n.attr(Oa,l)}},_createLayoutManagerOptions:function(e,t){return Pu({form:this,formOptions:this.option(),$formElement:this.$element(),items:e,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:t,onFieldDataChanged:i=>{this._isDataUpdating||this._triggerOnFieldDataChanged(i)},onContentReady:i=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(i.component._itemsRunTimeInfo),t.onContentReady&&t.onContentReady(i)},onDisposing:i=>{var{component:a}=i,n=a.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(n)},onFieldItemRendered:()=>{var i;(i=this._validationSummary)===null||i===void 0||i.refreshValidationGroup()}})},_renderLayoutManager:function(e,t){var i={lg:t.colCount,md:t.colCount,sm:t.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:c(i,t.colCountByScreen)});var a=u("<div>");a.appendTo(e);var n=this._createComponent(a,"dxLayoutManager",t);return n.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(n),n},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(e,t,i){return i=i||{},this._extendConfig(i,{readOnly:this.option("readOnly")}),this.callBase(e,t,i)},_attachSyncSubscriptions:function(){var e=this;e.on("optionChanged",function(t){var i=t.fullName;i==="formData"&&(p(t.value)||e._options.silent("formData",t.value={}),e._triggerOnFieldDataChangedByDataSet(t.value)),e._cachedLayoutManagers.length&&g(e._cachedLayoutManagers,function(a,n){i==="formData"&&(e._isDataUpdating=!0,n.option("layoutData",t.value),e._isDataUpdating=!1),(t.name==="readOnly"||t.name==="disabled")&&n.option(i,t.value)})})},_optionChanged:function(e){var t=e.fullName.split(".");t.length>1&&t[0].search("items")!==-1&&this._itemsOptionChangedHandler(e)||t.length>1&&t[0].search("formData")!==-1&&this._formDataOptionChangedHandler(e)||this._defaultOptionChangedHandler(e)},_defaultOptionChangedHandler:function(e){switch(e.name){case"formData":this.option("items")?Pe(e.value)&&this._resetValues():this._invalidate();break;case"onFieldDataChanged":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":this.option("colCount")==="auto"&&this._invalidate();break;case"alignRootItemLabels":case"readOnly":break;case"width":this.callBase(e),this._rootLayoutManager.option(e.name,e.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":w.removeGroup(e.previousValue||this),this._invalidate();break;default:this.callBase(e)}},_itemsOptionChangedHandler:function(e){var t=e.fullName.split("."),i=e.value,a=this._getItemPath(t),n=this.option(a),r=e.fullName.replace(a+".",""),s=r.split(".")[0].replace(/\[\d+]/,""),o=this._tryCreateItemOptionAction(s,n,n[s],e.previousValue,a),l=this._tryExecuteItemOptionAction(o)||this._tryChangeLayoutManagerItemOption(e.fullName,i);if(!l&&n){this._changeItemOption(n,r,i);var d=this._generateItemsFromData(this.option("items"));this.option("items",d),l=!0}return l},_formDataOptionChangedHandler:function(e){var t=e.fullName.split("."),i=e.value,a=t.slice(1).join("."),n=this.getEditor(a);return n?n.option("value",i):this._triggerOnFieldDataChanged({dataField:a,value:i}),!0},_tryCreateItemOptionAction:function(e,t,i,a,n){return e==="tabs"&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(n,".tabs")),i=this._prepareItems(i,!0,n,!0)),Yu(e,{item:t,value:i,previousValue:a,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(e){return e&&e.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(e){var t=Ia(e);if(Zd.indexOf(t)>-1&&(w.addGroup(this._getValidationGroup()),this.option("showValidationSummary"))){var i;(i=this._validationSummary)===null||i===void 0||i.refreshValidationGroup()}},_setLayoutManagerItemOption(e,t,i,a){if(this._updateLockCount>0){!e._updateLockCount&&e.beginUpdate();var n=this._itemsRunTimeInfo.findKeyByPath(a);this.postponedOperations.add(n,()=>(!e._disposed&&e.endUpdate(),new $().resolve()))}var r=s=>{if(s.component.off("contentReady",r),Nn(a)){var o=Nu(a),l=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);l&&this._alignLabelsInColumn({items:l.option("items"),layoutManager:l,$container:l.$element(),inOneColumn:l.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};e.on("contentReady",r),e.option(t,i),this._updateValidationGroupAndSummaryIfNeeded(t)},_tryChangeLayoutManagerItemOption(e,t){var i=e.split("."),a=Ia(e);if(a==="items"&&i.length>1){var n=this._getItemPath(i),r=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(n);if(r){this._itemsRunTimeInfo.removeItemsByItems(r.getItemsRunTimeInfo());var s=this._prepareItems(t,!1,n);return this._setLayoutManagerItemOption(r,a,s,n),!0}}else if(i.length>2){var o=i.length-2,l=this._getItemPath(i.slice(0,o)),d=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(l);if(d){var h=ke(i[o],a);if(a==="editorType"&&d.option(h)!==t)return!1;if(a==="visible"){var _=this.option(ke(l,"items"));if(_&&_.length){var m=d.option("items");_.forEach((S,A)=>{var I=m[A];I.visibleIndex=S.visibleIndex})}}return this._setLayoutManagerItemOption(d,h,t,l),!0}}return!1},_tryChangeLayoutManagerItemOptions(e,t){var i;return this.beginUpdate(),g(t,(a,n)=>{if(i=this._tryChangeLayoutManagerItemOption(ke(e,a),n),!i)return!1}),this.endUpdate(),i},_getItemPath:function(e){var t=e[0],i;for(i=1;i<e.length&&e[i].search(/items\[\d+]|tabs\[\d+]/)!==-1;i++)t+="."+e[i];return t},_triggerOnFieldDataChanged:function(e){this._createActionByOption("onFieldDataChanged")(e)},_triggerOnFieldDataChangedByDataSet:function(e){var t=this;e&&M(e)&&g(e,function(i,a){t._triggerOnFieldDataChanged({dataField:i,value:a})})},_updateFieldValue:function(e,t){if(p(this.option("formData"))){var i=this.getEditor(e);if(this.option("formData."+e,t),i){var a=i.option("value");a!==t&&i.option("value",t)}}},_generateItemsFromData:function(e){var t=this.option("formData"),i=[];return!e&&p(t)&&g(t,function(a){i.push({dataField:a})}),e&&g(e,function(a,n){M(n)?i.push(n):i.push({dataField:n})}),i},_getItemByField:function(e,t){var i=this,a=M(e)?e:i._getFieldParts(e),n=a.fieldName,r=a.fieldPath,s;return t.length&&g(t,function(o,l){var d=l.itemType;if(r.length){var h=r.slice();l=i._getItemByFieldPath(h,n,l)}else if(d==="group"&&!(l.caption||l.name)||d==="tabbed"&&!l.name){var _=i._getSubItemField(d);l.items=i._generateItemsFromData(l.items),l=i._getItemByField({fieldName:n,fieldPath:r},l[_])}if(Fu(l,n))return s=l,!1}),s},_getFieldParts:function(e){for(var t=e,i=t.indexOf("."),a=[];i!==-1;)a.push(t.substr(0,i)),t=t.substr(i+1),i=t.indexOf(".");return{fieldName:t,fieldPath:a.reverse()}},_getItemByFieldPath:function(e,t,i){var a=i.itemType,n=this._getSubItemField(a),r=a==="group"||a==="tabbed"||i.title,s;do if(r){var o=i.name||i.caption||i.title,l=p(o),d=Qt(o),h=void 0;if(i[n]=this._generateItemsFromData(i[n]),l&&(h=e.pop()),!e.length&&(s=this._getItemByField(t,i[n]),s))break;(!l||l&&d===h)&&e.length&&(s=this._searchItemInEverySubItem(e,t,i[n]))}else break;while(e.length&&!p(s));return s},_getSubItemField:function(e){return e==="tabbed"?"tabs":"items"},_searchItemInEverySubItem:function(e,t,i){var a=this,n;return g(i,function(r,s){if(n=a._getItemByFieldPath(e.slice(),t,s),n)return!1}),n||(n=!1),n},_changeItemOption:function(e,t,i){M(e)&&(e[t]=i)},_dimensionChanged:function(){var e=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==e&&(this._isColCountChanged(this._lastMarkupScreenFactor,e)&&(this._targetScreenFactor=e,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=e)},_isColCountChanged:function(e,t){var i=!1;return g(this._cachedColCountOptions,function(a,n){if(n.colCountByScreen[e]!==n.colCountByScreen[t])return i=!0,!1}),i},_refresh:function(){var e="."+Pa+" input, ."+Pa+" textarea";v.trigger(this.$element().find(e),"change"),this.callBase()},_resetValues:function(){this._itemsRunTimeInfo.each(function(e,t){p(t.widgetInstance)&&ct.isEditor(t.widgetInstance)&&(t.widgetInstance.reset(),t.widgetInstance.option("isValid",!0))}),w.resetGroup(this._getValidationGroup())},_updateData:function(e,t,i){var a=this,n=i?t:e;M(n)?g(n,function(r,s){a._updateData(i?e+"."+r:r,s,M(s))}):N(e)&&a._updateFieldValue(e,t)},registerKeyHandler:function(e,t){this.callBase(e,t),this._itemsRunTimeInfo.each(function(i,a){p(a.widgetInstance)&&a.widgetInstance.registerKeyHandler(e,t)})},_focusTarget:function(){return this.$element().find("."+Jt+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),w.removeGroup(this._getValidationGroup()),this.callBase()},resetValues:function(){this._resetValues()},updateData:function(e,t){this._updateData(e,t)},getEditor:function(e){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(e)||this._itemsRunTimeInfo.findWidgetInstanceByName(e)},getButton:function(e){return this._itemsRunTimeInfo.findWidgetInstanceByName(e)},updateDimensions:function(){var e=this,t=new $;return e._scrollable?e._scrollable.update().done(function(){t.resolveWith(e)}):t.resolveWith(e),t.promise()},itemOption:function(e,t,i){var a=this._generateItemsFromData(this.option("items")),n=this._getItemByField(e,a),r=Pn(a,n);if(n)switch(arguments.length){case 1:return n;case 3:var s=this._tryCreateItemOptionAction(t,n,i,n[t],r);this._changeItemOption(n,t,i);var o=ke(r,t);!this._tryExecuteItemOptionAction(s)&&!this._tryChangeLayoutManagerItemOption(o,i)&&this.option("items",a);break;default:if(M(t)&&!this._tryChangeLayoutManagerItemOptions(r,t)){var l;g(t,(d,h)=>{var _=this._tryCreateItemOptionAction(d,n,h,n[d],r);this._changeItemOption(n,d,h),!l&&!this._tryExecuteItemOptionAction(_)&&(l=!0)}),l&&this.option("items",a)}}},validate:function(){return w.validateGroup(this._getValidationGroup())},getItemID:function(e){return"dx_"+this.option("formID")+"_"+(e||new Q)},getTargetScreenFactor:function(){return this._targetScreenFactor}});V("dxForm",Xd);export{An as C,ou as D,Xd as F,Zt as N,lt as S,mt as T,gt as V,In as a,B as b,di as c,f as d,Bn as e,ao as f,Hi as g,hi as h,Ni as i,uh as j,_h as k,ch as l,lh as m,oh as n,bn as o,hh as r,sh as s,dh as t,ph as v};
